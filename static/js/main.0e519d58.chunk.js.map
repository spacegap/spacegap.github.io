{"version":3,"sources":["services/filecoin/economics.js","services/filecoin/stats.js","services/filecoin/index.js","components/Summary.js","observable/d0ffd921b8188ba9@41.js","observable/b1c1bcfaa4edd969@128.js","observable/2ef1e084af5636f7@98.js","observable/2f20d5b55f4d0b31@205.js","observable/691ae3b95f02db79@1159.js","observable/3d9d1394d858ca97@403.js","observable/691ae3b95f02db79@1157.js","observable/a82f06f54ea1d92b@1656.js","observable/4c826221db5599e4@748.js","components/Spacegap.js","components/FilToken.js","views/Home.js","components/WindowPoStStatus.js","views/Status.js","components/WindowPoSt.js","views/Full.js","components/MinerBar.js","views/Deadline.js","views/MinerInfo.js","services/drand/index.js","components/TinySummary.js","views/Gas.js","App.js","serviceWorker.js","index.js"],"names":["computeEffectiveNetworkTime","cumsumRealized","x0","k","Math","pow","c","log","a","computeBlockReward","newWallClockEpoch","prevWallClockEpoch","newNetworkTimeEpoch","prevNetworkTimeEpoch","mintRate","prevSimpleSupply","E","newSimpleSupply","prevBaselineSupply","getCurrBaseline","e","Comp","currEpoch","nwqap","nwqapP","nwqapV","nwCircSupply","perEpochRewardP","perEpochRewardV","perDurationNwRbGrowth","projectedDays","perDurationMinerQaGrowth","nwCumsumRealized","Object","assign","this","sectorQAP","days","networkQAPFilter","AlphaBetaFilter","perEpochRewardFilter","extrapolateCumsumRatio","projectFutureReward","max","sectorIp","computeInitialPledgeForQAPower","sectorProjectedReward","sectorFaultFee","perEpochNwRbGrowth","perEpochMinerQaGrowth","newInitialPledges","totalInitialPledge","currNetworkQAP","currCumsumRealized","prevNetworkTime","newInitialPledge","push","newNetworkTime","newReward","addNewEntry","p","v","alpha","beta","value","deltaT","residual","numerator","denominator","futureT","x2a","x2b","blockLimit","objectFilter","obj","fn","fromEntries","entries","filter","objectMap","map","i","sizeToString","s","biUnits","unit","length","toFixed","Stats","client","average","fetcher","tipsets","console","fetchHead","head","height","Height","fetchTipsetHead","tipset","keys","transactions","msgs","totalGas","reduce","total","GasUsed","acc","tup","Message","GasLimit","avg","method","parentAndReceiptsMessages","Cids","parseInt","GasFeeCap","div","reduc","tx","allTx","concat","gasUsedMethod","totalUsed","gasLimitMethod","totalLimit","ratios","totalGasLimit","nbBlocks","ratio","totalGasUsed","used","limit","datas","users","tuple","undefined","To","sorted","gas","user","sort","b","slice","miner","allHeights","sortedHeights","getMinerPower","mif","avgGasOfMethod","MinerPower","RawBytePower","nbSectors","size","dailyGas","avgGasFeeCap","maxDailyPrice","raw","TotalPower","atto","d3","require","f","format","b64","bx","BN","schema","testnet","fullNode","b64ToBn","window","BigInt","bin","atob","hex","split","forEach","ch","h","charCodeAt","toString","join","partitionSchema","Sectors","Unproven","Faults","Recoveries","Terminated","ExpirationEpochs","EarlyTerminated","LivePower","UnprovenPower","FaultyPower","RecoveringPower","preCommitSchema","type","key","info","seal_proof","sector_number","sealed_cid","seal_rand_epoch","deal_ids","expiration","replace_capacity","replace_sector_deadline","replace_sector_partition","replace_sector_number","precommit_deposit","precommit_epoch","deal_weight","verified_deal_weight","bytesToBig","bytesToBigRev","mul","add","nextBits","n","res","num","and","shln","sub","shrn","left","toNumber","decodeRLE2","buf","first","x","Error","runs","decodeRLE","cur","r","Filecoin","endpointUrl","url","provider","BrowserProvider","LotusRPC","parents","receipts","minfo","path","state","Blocks","ParentStateRoot","node","chainGetNode","data","Obj","self","Fil","methods","decode","asObject","chainHead","cid","partitionRaw","partitionObj","curr","ChainGetTipSetByHeight","storagePowerActorRaw","TotalRawBytePower","TotalBytesCommitted","TotalQualityAdjPower","TotalQABytesCommitted","TotalPledgeCollateral","ThisEpochRawBytePower","ThisEpochQualityAdjPower","ThisEpochPledgeCollateral","hash","StateReadState","State","Balance","PreCommitDeposits","LockedFunds","InitialPledge","FeeDebt","Available","cached","localStorage","getItem","cachedTime","Date","now","JSON","parse","fetch","json","miners","address","setItem","stringify","deadlinesCids","asyncPool","minerCid","ChainGetNode","deadline","Partitions","LiveSectors","TotalSectors","Raw","Number","deadlines","StateMinerInfo","Promise","all","StateMinerProvingDeadline","fetchDeadlinesProxy","nextDeadlines","Array","_","Index","Close","SectorsCount","d","FaultsCount","ActiveCount","minersInfo","minerId","setMinersIfMounted","minerInfo","fetchMinerInfo","then","catch","error","fetchDeadlines","fetchDeposits","deposits","fetchPreCommittedSectors","preCommits","getData","preCommittedSectors","PreCommitDeadlines","groups","SectorNumber","Expiry","Count","StateMinerSectors","sectorList","ID","number","sectorsCount","chainGetParentMessages","chainGetParentReceipts","parentMessages","receiptParentMessages","zip","entry","exit","ExitCode","inMethod","includes","Method","stateMinerPower","m","StateCirculatingSupply","Supply","Reward","Power","inputs","ThisEpochQAPowerSmoothed","PositionEstimate","VelocityEstimate","ThisEpochRewardSmoothed","CumsumRealized","Economics","summary","arr","arrs","val","Summary","title","desc","className","href","define","runtime","observer","main","module","variable","md","global","exports","createREGLCamera","t","o","u","code","call","1","out","Float32Array","2","3","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","4","identity","eye","center","up","x1","x2","y0","y1","y2","z0","z1","z2","len","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","sqrt","5","b0","b1","b2","b3","6","fovy","aspect","near","far","tan","nf","7","y","z","8","9","10","11","12","a0","a1","a2","EPSILON","13","14","by","bz","py","pz","sc","sin","cc","cos","15","px","16","scale","17","w","18","transformMat4","vec3RotateY","vec3RotateX","vec3Equals","vec3Add","vec3ScaleAndAdd","vec3Copy","vec3Normalize","mat4Identity","mat4Invert","mat4Translate","mat4Scale","lookAt","perspective","MAX_PHI","PI","MIN_PHI","opts","willBeDirty","params","aspectRatio","zoomAboutCursor","distance","phi","theta","fovY","panDecayTime","zoomDecayTime","rotationDecayTime","dirty","rotationCenter","zoom","panX","panY","panZ","pitch","yaw","dTheta","dPhi","mouseX","mouseY","t0","camera","tick","mergeState","accumulator","zeroChanges","cachedDPhi","cachedDTheta","cachedZoom","cachedPanX","cachedPanY","cachedPanZ","cachedPitch","cachedYaw","previousState","paramsChanges","applyViewChanges","viewIsChanging","dt","panDecay","exp","LN2","zoomDecay","rotateDecay","decay","storeCurrentState","taint","resize","rotate","pivot","scaleFactor","pan","computeMatrices","projection","viewInv","view","width","tmp","viewUp","viewRight","viewForward","origin","dView","changes","zoomScaleFactor","rotateAboutCenter","prevPhi","min","prevTheta","clippedPhi","clippedPitch","19","mat4create","mat4multiply","createCamera","regl","element","_gl","canvas","getAspectRatio","clientWidth","clientHeight","mProjectionView","setCameraUniforms","context","uniforms","uProjectionView","ctx","invokeCamera","props","callback","afterTick","setUniforms","defineProperties","get","set","addEventListener","createInteractions","normalizeOpts","isCallable","contains","dscr","options","arguments","configurable","enumerable","writable","gs","foo","bar","trzy","dest","src","_undefined","isValue","object","prototype","create","process","opts1","result","TypeError","String","str","indexOf","searchString","on","once","off","emit","descriptors","base","callable","apply","Function","defineProperty","hasOwnProperty","descriptor","listener","__eeOnceListener__","__ee__","listeners","candidate","splice","l","args","buttonState","mods","shift","alt","control","meta","attached","updateMods","ev","changed","altKey","shiftKey","ctrlKey","metaKey","handleEvent","nextButtons","nextX","mouse","nextY","buttons","clearState","handleBlur","handleMods","handleMouseMove","handleMouseDown","handleMouseUp","attachListeners","enabled","removeEventListener","detachListeners","20","rootPosition","top","target","currentTarget","srcElement","isArray","cx","clientX","cy","clientY","rect","document","body","getBoundingClientRect","21","mouseElement","which","button","offsetX","bounds","offsetY","22","vec3TransformMat4","interactionEvents","zoomSpeed","touchZoom","onStart","onEnd","onMove","singletonEventData","defaultPrevented","resetLocalPreventDefault","providePreventDefault","preventDefault","xy","originalEvent","dy","active","dx","RADIANS_PER_HALF_SCREEN_WIDTH","invViewportShift","transformXY","zoomx","setInteractions","interactions","23","emitter","eventEmitter","previousPosition","previousFingerPosition","currentPosition","fingers","activeTouchCount","getSize","innerWidth","innerHeight","changeListener","mouseChange","pbuttons","pmods","onWheel","event","eventOffset","deltaX","deltaY","dz","deltaZ","zoomy","dtheta","onMouseUp","onMouseDown","onMouseMove","indexOfTouch","touch","id","identifier","onTouchStart","changedTouches","newTouch","newIndex","oldIndex","newFinger","position","xavg","yavg","fingerCount","atan2","onTouchMove","idx","movedTouch","pos0A","pos0B","dx0","dy0","pos1A","pos1B","dx1","dy1","r0","theta0","r1","theta1","dr","onTouchRemoved","lastFinger","otherIdx","enable","disable","mat4","mat4clone","mat4copy","mat4identity","mat4transpose","mat4invert","mat4adjoint","mat4determinant","mat4translate","mat4scale","mat4rotate","mat4rotateX","mat4rotateY","mat4rotateZ","mat4fromMat3","mat4fromRotation","mat4fromRotationTranslation","mat4fromScaling","mat4fromTranslation","mat4fromXRotation","mat4fromYRotation","mat4fromZRotation","mat4fromQuat","mat4frustum","mat4perspective","mat4perspectiveFromFieldOfView","mat4ortho","mat4lookAt","mat4str","clone","copy","transpose","invert","adjoint","determinant","multiply","translate","rotateX","rotateY","rotateZ","fromMat3","fromRotation","fromRotationTranslation","fromScaling","fromTranslation","fromXRotation","fromYRotation","fromZRotation","fromQuat","frustum","perspectiveFromFieldOfView","ortho","q","xx","yx","yy","zx","zy","zz","wx","wy","wz","rad","axis","xz","yz","right","bottom","rl","tb","lr","bt","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","b12","b20","b21","b22","mat3","mat3create","mat3adjoint","mat3clone","mat3copy","mat3determinant","mat3frob","mat3fromMat2d","mat3fromMat4","mat3fromQuat","mat3identity","mat3invert","mat3multiply","mat3normalFromMat4","mat3rotate","mat3scale","mat3str","mat3translate","mat3transpose","frob","fromMat2d","fromMat4","normalFromMat4","vec2","vec2create","vec2clone","vec2fromValues","vec2copy","vec2set","vec2equals","vec2exactEquals","vec2add","vec2subtract","vec2sub","vec2multiply","vec2mul","vec2divide","vec2div","vec2inverse","vec2min","vec2max","vec2rotate","vec2floor","vec2ceil","vec2round","vec2scale","vec2scaleAndAdd","vec2distance","vec2dist","vec2squaredDistance","vec2sqrDist","vec2length","vec2len","vec2squaredLength","vec2sqrLen","vec2negate","vec2normalize","vec2dot","vec2cross","vec2lerp","vec2random","vec2transformMat2","vec2transformMat2d","vec2transformMat3","vec2transformMat4","vec2forEach","vec2limit","fromValues","equals","exactEquals","subtract","divide","inverse","floor","ceil","round","scaleAndAdd","dist","squaredDistance","sqrDist","squaredLength","sqrLen","negate","normalize","dot","cross","lerp","random","transformMat2","transformMat2d","transformMat3","vec","stride","offset","count","arg","ax","ay","mSq","angle","PINNED","views","name","signature","fitSize","description","example","tests","assert","sourceWidth","sourceHeight","tw","th","crop","ar","importAsset","blob","Blob","invalidation","URL","createObjectURL","revokeObjectURL","importImage","DOM","img","context2d","naturalWidth","naturalHeight","drawImage","err","getImageData","test","crossorigin","attr","query","decodeURI","textContent","scopedStyle","html","scope","css","style","replace","getPinnedSlug","parseVersion","getLines","route","rtVersion","lines","response","text","parsers","v1","ln","version","v3","pathname","match","reader","separator","Infinity","merge","Uint8Array","tail","next","read","done","cancel","deprecateImport","$0","G","input","PINNED_LIB","nulled","source","warn","child1","define1","import","_dep_signature","_dep_code","_dep_signature_theme","_dep_createStepper","_dep_defaultTestRunner","_dep_defaultSignatureParser","open","runTests","testRunner","expect","sig","formatter","trim","RUN_TESTS","signature_theme","defaultSignatureParser","defaultTestRunner","promise","uid","defaultFormatter","signatureParser","testList","list","run","cta","race","resolve","onclick","replaceWith","examples","classList","createStepper","stopPropagation","cb","ret","step","cond","msg","formatList","items","formatItem","status","icon","pending","success","runners","end","substring","pref","async","gen","fnName","suffix","sw","sh","demoFunction","child2","myCustomSig","select","runType","Promises","callUndefined","delay","createREGL","dpi","reglOptions","devicePixelRatio","createElement","pixelRatio","__reglConfig","reglCanvas","existingCanvas","config","newConfig","destroy","svg","fo","selectAll","enter","append","Element","layerConstructors","layers","dpiWidth","dpiHeight","container","createLayer","ctor","zIndex","appendChild","layerNames","command","scissor","box","margin","framebufferWidth","framebufferHeight","viewport","viewportResolution","viewportWidth","viewportHeight","framebufferResolution","inverseViewportResolution","inverseFramebufferResolution","tex","mat3fromLinearScales","matrices","view3","inverseView3","inverseView","prop","transform","vert","attributes","aUV","depth","primitive","xRange","range","yRange","xDomain","domain","yDomain","xs","ys","xLabelSpacing","yLabelSpacing","xAxis","axisBottom","yAxis","axisLeft","selection","xa","empty","ticks","ya","newScale","refScale","newDomain","refDomain","newRange","refRange","newDomainLength","newRangeLength","refDomainLength","refRes","newRes","currentAspect","newDomainCenter","originalXScale","originalYScale","invertX","invertY","iStride","hasExtension","framebuffer","colorType","colorFormat","radius","uintFBO","draw","frag","aXY","transfer","use","createLayerStack","createViewport","stack","constrainLinearScaleAspectRatio","viewportAxes","configureViewport","configureLinearScales","drawStrip","mat3ViewportFromLinearScales","scaleLinear","clamp","points","pointsBuffer","buffer","remove","g","handles","drag","update","subdata","poll","clear","color","viewport3","ctxTransform","clearRect","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","createReglLinearScaleConfiguration","createReglViewportConfiguration","define2","child3","define3","child4","define4","child5","define5","extensions","optionalExtensions","scrollY","buffers","opacity","specular","cartoonEdgeWidth","cartoonEdgeOpacity","gridWidth","gridOpacity","passes","drawMesh","meshProps","frame","solidPass","meshFromFunction","resolution","uDomain","vDomain","uPeriodic","vPeriodic","uv","blend","func","srcRGB","srcAlpha","dstRGB","dstAlpha","equation","rgb","elements","time","mesh","positions","flat","cells","surfaceFn","j","nbUFaces","nbVFaces","nbBoundaryAdjustedUFaces","nbBoundaryAdjustedVFaces","iPlusOne","jPlusOne","createReglCamera","Spacegap","ref","useRef","useState","obs","setObs","useEffect","Runtime","Inspector","into","current","querySelector","redefine","handleScroll","FilToken","class","f0","f3","f1","withRouter","actors","econSummary","computeEconomics","setMinersInfo","mounted","updateMinerInfo","placeholder","onKeyDown","location","ThisEpochReward","MinerAboveMinPowerCount","to","align","rawBytePower","WindowPoStStatus","f2","Status","spa","minersDeadlines","setMinersDeadlines","minersDeadlines2880","setMinersDeadlines2880","prev60","setPrev60","prev120","setPrev120","getPrev","diff","prevHead","fetchPower","prevSpa","fetchingPrevious","minersList","deadlines2880","WindowPoSt","link","Full","setHead","fetched","fetchingHead","MinerBar","deadlineId","tag","flagEmoji","useParams","partitions","setPartitions","minerDeadlines","setMinerDeadlines","todayDeadlines","setTodayDeadlines","fetchPartitionsSectors","epochs","day","reverse","data-tip","data-for","effect","place","partition","sector","PostSubmissions","FaultCutoff","Challenge","Open","getFilecoinExpectedHeight","filGenesis","getTime","TinySummary","expected","setFilExpectedHeight","setRound","Drand","interval","setInterval","clearInterval","GrowthCard","nstats","commits","setCommits","wposts","setWposts","graph","setGraph","canvasRef","cardRef","setCollapseEvent","display","scales","yAxes","scaleLabel","labelString","fillDataset","transactionsPerHeight","allSealed","allProven","sealed","proven","newCommits","newWposts","rounds","filteredCommits","dataCommits","filteredPosts","dataWposts","myGraph","dataset","borderColor","chartColors","blue","fill","label","yAxisID","red","lineData","datasets","labels","getContext","newGraph","Chart","data-toggle","data-target","aria-expanded","aria-controls","aria-labelledby","data-parent","MinerInfoCard","minerAddr","setAddr","setData","searchMiner","for","onChange","onClick","BiggestGasSpenderCard","setOpts","pie","setPie","biggestGasUserFor","sortedHeight","rawData","backgroundColor","newOpts","newDataset","myPie","newPie","GasTableCard","headers","wpost","pre","prove","avgGas","setAvgGas","updateAverage","avgTotalGasUsed","avgGasLimit","computeEntry","avgNumberTx","nTx","gasUsed","gasLimit","avgRatioUsedOverTotalUsed","ratioUsed","avgRatioLimitOverTotalLimit","ratioLimit","avgRatioUsedOverLimit","ratioUsedLimit","avgTotalGasUsedOverTipsetLimit","ratioUsedBlockLimit","avgTotalGasLimitOverTipsetLimit","ratioBlockLimit","results","RowInfo","values","isNaN","stats","setStat","updateStats","fetchCids","orange","yellow","green","purple","grey","App","setMiners","setFilClient","setActors","reload","fetchGenesisActors","fetchingEcon","getMiners","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.0e519d58.chunk.js","sourcesContent":["const EPOCHS_PER_DAY = (24 * 60 * 60) / 30\nconst EPOCHS_PER_YEAR = 365 * EPOCHS_PER_DAY\nconst INITIAL_BASELINE = 2888888880000000000\nconst BASELINE_ANNUAL_GROWTH = 1\n\nconst computeEffectiveNetworkTime = function (cumsumRealized) {\n  const x0 = INITIAL_BASELINE\n  const annualGrowth = BASELINE_ANNUAL_GROWTH\n  const k = Math.pow(1 + annualGrowth, 1 / EPOCHS_PER_YEAR)\n  const c = 1 / Math.log(k)\n  const a = -x0 * c\n  return Math.log((cumsumRealized - a) / (x0 * c)) / Math.log(k)\n}\n\nconst computeBlockReward = function (\n  newWallClockEpoch,\n  prevWallClockEpoch,\n  newNetworkTimeEpoch,\n  prevNetworkTimeEpoch\n) {\n  const totalSimpleSupply = 330e6\n  const totalBaselineSupply = 770e6\n  const mintRate = Math.log(2) / (6 * EPOCHS_PER_YEAR)\n\n  const prevSimpleSupply =\n    totalSimpleSupply * (1 - Math.pow(Math.E, -mintRate * prevWallClockEpoch))\n  const newSimpleSupply =\n    totalSimpleSupply * (1 - Math.pow(Math.E, -mintRate * newWallClockEpoch))\n\n  const prevBaselineSupply =\n    totalBaselineSupply *\n    (1 - Math.pow(Math.E, -mintRate * prevNetworkTimeEpoch))\n  const newBaselineSupply =\n    totalBaselineSupply *\n    (1 - Math.pow(Math.E, -mintRate * newNetworkTimeEpoch))\n\n  return (\n    newSimpleSupply + newBaselineSupply - prevSimpleSupply - prevBaselineSupply\n  )\n}\n\nconst getCurrBaseline = function (e) {\n  const x0 = INITIAL_BASELINE\n  const annualGrowth = BASELINE_ANNUAL_GROWTH\n  const k = Math.pow(1 + annualGrowth, 1 / EPOCHS_PER_YEAR)\n  return x0 * Math.pow(k, e)\n}\n\nexport default class Comp {\n  constructor ({\n    currEpoch,\n    nwqap,\n    nwqapP,\n    nwqapV,\n    nwCircSupply,\n    perEpochRewardP,\n    perEpochRewardV,\n    perDurationNwRbGrowth,\n    projectedDays,\n    perDurationMinerQaGrowth,\n    nwCumsumRealized\n  }) {\n    Object.assign(this, {\n      currEpoch,\n      nwqap,\n      nwqapP,\n      nwqapV,\n      nwCircSupply,\n      perEpochRewardP,\n      perEpochRewardV,\n      perDurationNwRbGrowth,\n      projectedDays,\n      perDurationMinerQaGrowth,\n      nwCumsumRealized\n    })\n  }\n\n  projectFutureReward (sectorQAP, days) {\n    const networkQAPFilter = new AlphaBetaFilter(this.nwqapP, this.nwqapV)\n    const perEpochRewardFilter = new AlphaBetaFilter(\n      this.perEpochRewardP,\n      this.perEpochRewardV\n    )\n    return (\n      sectorQAP *\n      extrapolateCumsumRatio(\n        perEpochRewardFilter,\n        networkQAPFilter,\n        days * EPOCHS_PER_DAY\n      )\n    )\n  }\n\n  computeInitialPledgeForQAPower (sectorQAP, currEpoch) {\n    return (\n      this.projectFutureReward(sectorQAP, 20) +\n      (sectorQAP * 0.3 * this.nwCircSupply) /\n        Math.max(this.nwqap, getCurrBaseline(currEpoch))\n    )\n  }\n\n  summary () {\n    const sectorIp = this.computeInitialPledgeForQAPower(\n      32 * 2 ** 30,\n      this.currEpoch\n    )\n    const sectorProjectedReward = this.projectFutureReward(32 * 2 ** 30, 360)\n    const sectorFaultFee = this.projectFutureReward(32 * 2 ** 30, 3.51)\n\n    return {\n      sectorIp,\n      sectorProjectedReward,\n      sectorFaultFee\n    }\n  }\n\n  computeInitialPledgeFromAssumptions () {\n    const {\n      currEpoch,\n      nwqap,\n      nwqapP,\n      nwqapV,\n      nwCircSupply,\n      perEpochRewardP,\n      perEpochRewardV,\n      perDurationNwRbGrowth,\n      projectedDays,\n      perDurationMinerQaGrowth,\n      nwCumsumRealized\n    } = this\n\n    const networkQAPFilter = new AlphaBetaFilter(nwqapP, nwqapV)\n    const perEpochRewardFilter = new AlphaBetaFilter(\n      perEpochRewardP,\n      perEpochRewardV\n    )\n    const perEpochNwRbGrowth =\n      perDurationNwRbGrowth / projectedDays / EPOCHS_PER_DAY\n    const perEpochMinerQaGrowth =\n      perDurationMinerQaGrowth / projectedDays / EPOCHS_PER_DAY\n\n    const newInitialPledges = []\n    var totalInitialPledge = 0\n    let currNetworkQAP = nwqap\n    let currCumsumRealized = nwCumsumRealized\n    var prevNetworkTime = computeEffectiveNetworkTime(nwCumsumRealized)\n\n    for (\n      var e = currEpoch + 1;\n      e < currEpoch + projectedDays * EPOCHS_PER_DAY + 1;\n      e++\n    ) {\n      // first compute initial pledge required for this epoch\n      const newInitialPledge =\n        perEpochMinerQaGrowth *\n        (extrapolateCumsumRatio(\n          perEpochRewardFilter,\n          networkQAPFilter,\n          20 * EPOCHS_PER_DAY\n        ) +\n          (0.3 * nwCircSupply) / Math.max(currNetworkQAP, getCurrBaseline(e)))\n      newInitialPledges.push(newInitialPledge)\n      totalInitialPledge += newInitialPledge\n      // then update filter values\n      currNetworkQAP += perEpochNwRbGrowth\n      currCumsumRealized += currNetworkQAP\n      const newNetworkTime = computeEffectiveNetworkTime(currCumsumRealized)\n      const newReward = computeBlockReward(\n        e,\n        e - 1,\n        newNetworkTime,\n        prevNetworkTime\n      )\n      perEpochRewardFilter.addNewEntry(newReward, 1)\n      networkQAPFilter.addNewEntry(currNetworkQAP, 1)\n      prevNetworkTime = newNetworkTime\n    }\n\n    return { newInitialPledges, totalInitialPledge }\n  }\n}\n\nclass AlphaBetaFilter {\n  constructor (p, v) {\n    this.alpha = 9.25e-4\n    this.beta = 2.84e-7\n    this.p = p\n    this.v = v\n  }\n\n  addNewEntry (value, deltaT) {\n    this.p += this.v * deltaT\n    const residual = value - this.p\n    this.p += this.alpha * residual\n    this.p = Math.max(this.p, 0)\n    this.v += (this.beta * residual) / deltaT\n  }\n}\n\nconst extrapolateCumsumRatio = function (numerator, denominator, futureT) {\n  const x2a = Math.log(denominator.p + denominator.v)\n  const x2b = Math.log(denominator.p + denominator.v + denominator.v * futureT)\n  const m1 = denominator.v * numerator.p * (x2b - x2a)\n  const m2 =\n    numerator.v * (denominator.p * (x2a - x2b) + denominator.v * futureT)\n  return (m1 + m2) / Math.pow(denominator.v, 2)\n}\n","const blockLimit = 5 * 10 ** 9\nconst roundsPerDay = 2 * 60 * 24\nconst roundsInDeadline = 2 * 30\nconst deadlines = 48\nconst maxSectorsPerPost = 2349\nexport function wpostToSectors (wpost) {\n  return maxSectorsPerPost * wpost\n}\n\nfunction gbToPB (v) {\n  return v / 1024 / 1024\n}\nfunction pbToGB (v) {\n  return v * 1024 * 1024\n}\n// Returns the estimated growthRate per day assuming this number of prove\n// commits at one height (or an average etc)\nexport function growthRate (prove) {\n  return gbToPB(prove * 32) * roundsPerDay\n}\n\nexport function objectFilter (obj, fn) {\n  return Object.fromEntries(Object.entries(obj).filter(([k, v]) => fn(v, k)))\n}\n\nexport function objectMap (obj, fn) {\n  return Object.entries(obj).map(([k, v], i) => fn(v, k, i))\n}\n\nfunction roundsInDays (rounds) {\n  return Math.ceil(rounds / 2 / 60 / 24)\n}\n\nfunction sectorsToPost (sectors) {\n  return sectors / maxSectorsPerPost\n}\n\nfunction sizeToString (s) {\n  var biUnits = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB']\n  var unit = 0\n  while (s >= 1024 && unit < biUnits.length - 1) {\n    s /= 1024\n    unit++\n  }\n  s = s.toFixed(2)\n  return `${s} ${biUnits[unit]}`\n}\n\nfunction sizeToSectors (s) {\n  return s / 1024 / 1024 / 1024 / 32\n}\n\nfunction attoToFIL (atto) {\n  return atto * 10 ** -18\n}\n\nexport default class Stats {\n  constructor (client, average) {\n    this.fetcher = client\n    this.average = average\n    this.tipsets = {}\n  }\n\n  // XXX Make head a paramter and fethc only what it needs\n  async fetchCids () {\n    // at the moment take the first block - this is ok since parent tipset\n    // is the same for all the blocks\n    console.log('Initializing gas stats engine')\n    const head = await this.fetcher.fetchHead()\n    const height = head.Height\n    this.tipsets[head.Height] = head\n    for (var i = 1; i < this.average; i++) {\n      const tipset = await this.fetcher.fetchTipsetHead(height - i)\n      this.tipsets[tipset.Height] = tipset\n      console.log(\n        i,\n        '/',\n        this.average,\n        ': init fetched tipset at height ',\n        tipset.Height,\n        ' with [0] = ',\n        tipset\n      )\n    }\n    console.log(\n      'Stats: got ' +\n        Object.keys(this.tipsets).length +\n        ' tipset CIDs to make stats from'\n    )\n  }\n\n  // returns the average gas used of a given method\n  async avgGasOfMethod (...method) {\n    const msgs = await this.transactions(...method)\n    const totalGas = msgs.reduce((total, v) => total + v[1].GasUsed, 0)\n    return totalGas / msgs.length\n  }\n\n  // Return the average of the gas limit PER height\n  async avgGasLimit (...method) {\n    return (await this.transactions(...method)).reduce(\n      (acc, tup) => acc + tup[0].Message.GasLimit,\n      0\n    )\n  }\n\n  async avgGasFeeCap (...method) {\n    var avg = 0\n    for (var height in this.tipsets) {\n      const tipset = this.tipsets[height]\n      const msgs = await this.fetcher.parentAndReceiptsMessages(\n        tipset.Cids[0],\n        ...method\n      )\n      avg +=\n        msgs.reduce((total, v) => total + parseInt(v[0].Message.GasFeeCap), 0) /\n        msgs.length\n    }\n    return avg / Object.keys(this.tipsets).length\n  }\n\n  // Returns the average of the total gas used PER height\n  async avgTotalGasUsed (...method) {\n    const div = Object.keys(this.tipsets).length\n    const reduc = (await this.transactions(...method)).reduce(\n      (total, tup) => total + tup[1].GasUsed,\n      0\n    )\n    return reduc / div\n  }\n\n  async avgNumberTx (...method) {\n    const tx = await this.transactions(...method)\n    return tx.length / Object.keys(this.tipsets).length\n  }\n\n  async transactions (...method) {\n    var allTx = []\n    for (var height in this.tipsets) {\n      const tipset = this.tipsets[height]\n      const msgs = await this.fetcher.parentAndReceiptsMessages(\n        tipset.Cids[0],\n        ...method\n      )\n      allTx = allTx.concat(msgs)\n    }\n    return allTx\n  }\n\n  async transactionsPerHeight (...method) {\n    const allTx = {}\n    for (var height in this.tipsets) {\n      const tipset = this.tipsets[height]\n      const msgs = await this.fetcher.parentAndReceiptsMessages(\n        tipset.Cids[0],\n        ...method\n      )\n      allTx[height] = msgs\n    }\n    return allTx\n  }\n\n  async avgRatioUsedOverTotalUsed (...method) {\n    const gasUsedMethod = (await this.transactions(...method)).reduce(\n      (acc, v) => acc + v[1].GasUsed,\n      0\n    )\n    const totalUsed = (await this.transactions()).reduce(\n      (acc, v) => acc + v[1].GasUsed,\n      0\n    )\n    return gasUsedMethod / totalUsed\n  }\n\n  async avgRatioLimitOverTotalLimit (...method) {\n    const gasLimitMethod = (await this.transactions(...method)).reduce(\n      (acc, v) => acc + v[0].Message.GasLimit,\n      0\n    )\n    const totalLimit = (await this.transactions()).reduce(\n      (acc, v) => acc + v[0].Message.GasLimit,\n      0\n    )\n    return gasLimitMethod / totalLimit\n  }\n\n  // return the avg total gas limit set per height for the given method over\n  // the maximal theoretical gas limit\n  async avgTotalGasLimitOverTipsetLimit (...method) {\n    var ratios = []\n    for (var height in this.tipsets) {\n      const tipset = this.tipsets[height]\n      const msgs = await this.fetcher.parentAndReceiptsMessages(\n        tipset.Cids[0],\n        ...method\n      )\n      const totalGasLimit = msgs.reduce(\n        (total, tup) => total + tup[0].Message.GasLimit,\n        0\n      )\n      const nbBlocks = tipset.Cids.length\n      const ratio = totalGasLimit / (blockLimit * nbBlocks)\n      ratios.push(ratio)\n    }\n    // make the average\n    return ratios.reduce((acc, v) => acc + v, 0) / ratios.length\n  }\n\n  async avgTotalGasUsedOverTipsetLimit (...method) {\n    var ratios = []\n    for (var height in this.tipsets) {\n      const tipset = this.tipsets[height]\n      const msgs = await this.fetcher.parentAndReceiptsMessages(\n        tipset.Cids[0],\n        ...method\n      )\n      const totalGasUsed = msgs.reduce(\n        (total, tup) => total + tup[1].GasUsed,\n        0\n      )\n      const nbBlocks = tipset.Cids.length\n      const ratio = totalGasUsed / (blockLimit * nbBlocks)\n      ratios.push(ratio)\n    }\n    // make the average\n    return ratios.reduce((acc, v) => acc + v, 0) / ratios.length\n  }\n\n  async avgRatioUsedOverLimit (...method) {\n    const used = (await this.transactions(...method)).reduce(\n      (acc, v) => acc + v[1].GasUsed,\n      0\n    )\n    const limit = (await this.transactions(...method)).reduce(\n      (acc, v) => acc + v[0].Message.GasLimit,\n      0\n    )\n    return used / limit\n  }\n\n  async biggestGasUserFor (...methods) {\n    var datas = {}\n    for (var height in this.tipsets) {\n      const msgs = await this.transactions(...methods)\n      var users = msgs.reduce((acc, tuple) => {\n        if (acc[tuple[0].Message.To] == undefined) {\n          acc[tuple[0].Message.To] = 0\n        }\n        acc[tuple[0].Message.To] += tuple[1].GasUsed\n        return acc\n      }, {})\n      // combinatio of mapping over dict\n      // https://stackoverflow.com/questions/14810506/map-function-for-objects-instead-of-arrays\n      // and sorting in decreasing order\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n      const sorted = objectMap(users, (gas, user) => [user, gas]).sort(\n        (a, b) => b[1] - a[1]\n      )\n      datas[height] = sorted\n      console.log('Biggest txs at height', height, ' -> ', sorted.slice(0, 10))\n    }\n    return datas\n  }\n\n  sortedHeights () {\n    return Object.keys(this.tipsets).sort((a, b) => b - a)\n  }\n\n  async minerInfo (miner) {\n    const allHeights = this.sortedHeights()\n    const tipset = this.tipsets[allHeights[0]]\n    const mif = await this.fetcher.getMinerPower(\n      tipset.Cids,\n      tipset.Height,\n      miner\n    )\n    const gas = await this.avgGasOfMethod(5)\n    const nbSectors = sizeToSectors(mif.MinerPower.RawBytePower)\n    const size = sizeToString(mif.MinerPower.RawBytePower)\n    const dailyGas = sectorsToPost(nbSectors) * gas\n    const maxDailyPrice = dailyGas * (await this.avgGasFeeCap(5))\n    return {\n      raw: mif.MinerPower.RawBytePower,\n      ratio: (\n        mif.MinerPower.RawBytePower / mif.TotalPower.RawBytePower\n      ).toFixed(3),\n      size: size,\n      dailyGas: dailyGas.toFixed(2),\n      maxDailyPrice: attoToFIL(maxDailyPrice).toFixed(2)\n    }\n  }\n}\n","import { LotusRPC } from '@filecoin-shipyard/lotus-client-rpc'\nimport { BrowserProvider } from '@filecoin-shipyard/lotus-client-provider-browser'\nimport Fil from 'js-hamt-filecoin'\nimport Economics from './economics'\nimport Stats from './stats'\nimport { partition } from 'd3'\nimport asyncPool from 'tiny-async-pool'\nconst d3 = require('d3')\nconst f = d3.format('0.2f')\nconst bx = require('base-x')\nconst BASE64 =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nconst b64 = bx(BASE64)\nconst BN = require('bn.js')\n\nconst schema = require('@filecoin-shipyard/lotus-client-schema').testnet\n  .fullNode\n\nfunction b64ToBn (b64) {\n  if (b64 === '') return window.BigInt(0)\n  var bin = atob(b64)\n  var hex = []\n\n  bin.split('').forEach(function (ch) {\n    var h = ch.charCodeAt(0).toString(16)\n    if (h.length % 2) {\n      h = '0' + h\n    }\n    hex.push(h)\n  })\n\n  return window.BigInt('0x' + hex.join(''))\n}\n\nconst partitionSchema = height => {\n  if (!height || height >= 138720) {\n    return {\n      Sectors: 'buffer',\n      Unproven: 'buffer',\n      Faults: 'buffer',\n      Recoveries: 'buffer',\n      Terminated: 'buffer',\n      ExpirationEpochs: 'cid',\n      EarlyTerminated: 'cid',\n      LivePower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      UnprovenPower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      FaultyPower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      RecoveringPower: {\n        a: 'bigint',\n        b: 'bigint'\n      }\n    }\n  }\n  return {\n    Sectors: 'buffer',\n    Faults: 'buffer',\n    Recoveries: 'buffer',\n    Terminated: 'buffer',\n    ExpirationEpochs: 'cid',\n    EarlyTerminated: 'cid',\n    LivePower: {\n      a: 'bigint',\n      b: 'bigint'\n    },\n    FaultyPower: {\n      a: 'bigint',\n      b: 'bigint'\n    },\n    RecoveringPower: {\n      a: 'bigint',\n      b: 'bigint'\n    }\n  }\n}\n\nconst preCommitSchema = {\n  type: 'hamt',\n  key: 'bigint',\n  value: {\n    info: {\n      seal_proof: 'int',\n      sector_number: 'int',\n      sealed_cid: 'cid',\n      seal_rand_epoch: 'int',\n      deal_ids: ['list', 'int'],\n      expiration: 'int',\n      replace_capacity: 'bool',\n      replace_sector_deadline: 'int',\n      replace_sector_partition: 'int',\n      replace_sector_number: 'int'\n    },\n    precommit_deposit: 'bigint',\n    precommit_epoch: 'int',\n    deal_weight: 'bigint',\n    verified_deal_weight: 'bigint'\n  }\n}\n\nfunction bytesToBig (p) {\n  let acc = 0n\n  for (let i = 0; i < p.length; i++) {\n    acc *= 256n\n    acc += window.BigInt(p[i])\n  }\n  return acc\n}\n\nfunction bytesToBigRev (p) {\n  let acc = new BN(0)\n  for (let i = 0; i < p.length; i++) {\n    acc = acc.mul(new BN(256))\n    acc = acc.add(new BN(p[p.length - i - 1]))\n  }\n  return acc\n}\n\nfunction nextBits (obj, n) {\n  // if (obj.left < n) throw new Error(\"out of bits\")\n  const res = obj.num.and(new BN(1).shln(n).sub(new BN(1)))\n  obj.num = obj.num.shrn(n)\n  obj.left -= n\n  return res.toNumber()\n}\n\nfunction decodeRLE (buf) {\n  const obj = {\n    left: 8 * buf.length,\n    num: bytesToBigRev(buf)\n  }\n  const version = nextBits(obj, 2)\n  const first = nextBits(obj, 1)\n  const res = []\n  while (obj.left > 0) {\n    let b1 = nextBits(obj, 1)\n    if (b1 === 1) {\n      res.push(1)\n      continue\n    }\n    let b2 = nextBits(obj, 1)\n    if (b2 === 1) {\n      const a = nextBits(obj, 4)\n      res.push(a)\n      continue\n    }\n    let x = 0\n    let s = 0\n    for (let i = 0; true; i++) {\n      if (i === 10) {\n        throw new Error('run too long')\n      }\n      let b = nextBits(obj, 8)\n      if (b < 0x80) {\n        if (i > 9 || (i === 9 && b > 1)) {\n          throw new Error('run too long')\n        } else if (b === 0 && s > 0) {\n          throw new Error('invalid run')\n        }\n        x |= b << s\n        break\n      }\n      x |= (b & 0x7f) << s\n      s += 7\n    }\n    res.push(x)\n  }\n  return { first, runs: res }\n}\n\nfunction decodeRLE2 (buf) {\n  const { first, runs } = decodeRLE(buf)\n  let cur = first\n  const res = []\n  let acc = 0\n  for (let r of runs) {\n    for (let i = 0; i < r; i++) {\n      if (cur === 1) res.push(acc)\n      acc++\n    }\n    cur = 1 - cur\n  }\n  return res\n}\n\nfunction decodeRLE3 (runs) {\n  let cur = 0\n  const res = []\n  let acc = 0\n  for (let r of runs) {\n    for (let i = 0; i < r; i++) {\n      if (cur === 1) res.push(acc)\n      acc++\n    }\n    cur = 1 - cur\n  }\n  return res\n}\n\nexport default class Filecoin {\n  constructor (endpointUrl) {\n    this.url = endpointUrl\n    const provider = new BrowserProvider(endpointUrl)\n    console.log('new endpoint', endpointUrl)\n    this.client = new LotusRPC(provider, { schema })\n    this.parents = {}\n    this.receipts = {}\n    this.minfo = {}\n  }\n\n  async getData (head, path, schema) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720 ? `${state}/1/${path}` : `${state}/${path}`\n    const data = (await this.client.chainGetNode(node)).Obj\n\n    const self = this\n    return await Fil.methods.decode(schema, data).asObject(async a => {\n      const res = await self.client.chainGetNode(a)\n      return res.Obj\n    })\n  }\n\n  async fetchHead () {\n    return this.client.chainHead()\n  }\n\n  // async fetchPartitionsSectors (head, miner, deadline) {\n  //   const partitions = await this.client.StateMinerPartitions(\n  //     miner,\n  //     deadline,\n  //     head.Cids\n  //   )\n  //   partitions.map(p => ({\n  //     Sectors: decodeRLE3(p.AllSectors),\n  //     Faults: decodeRLE3(p.FaultySectors).reduce((acc, curr) => {\n  //       acc[curr] = true\n  //       return acc\n  //     }, {}),\n  //     Recoveries: decodeRLE2(p.RecoveringSectors).reduce((acc, curr) => {\n  //       acc[curr] = true\n  //       return acc\n  //     }, {}),\n  //     Active: decodeRLE2(p.ActiveSectors).reduce((acc, curr) => {\n  //       acc[curr] = true\n  //       return acc\n  //     }, {})\n  //   }))\n  // }\n\n  async fetchPartitionsSectors (cid, height) {\n    const node = (await this.client.chainGetNode(`${cid['/']}`)).Obj[2][2]\n    return node.map(partitionRaw => {\n      const partitionObj = Fil.methods.decode(\n        partitionSchema(height),\n        partitionRaw\n      )\n      return [\n        {\n          Sectors: decodeRLE2(partitionObj.Sectors),\n          Faults: decodeRLE2(partitionObj.Faults).reduce((acc, curr) => {\n            acc[curr] = true\n            return acc\n          }, {}),\n          Terminated: decodeRLE2(partitionObj.Terminated).reduce(\n            (acc, curr) => {\n              acc[curr] = true\n              return acc\n            },\n            {}\n          ),\n          Recoveries: decodeRLE2(partitionObj.Recoveries).reduce(\n            (acc, curr) => {\n              acc[curr] = true\n              return acc\n            },\n            {}\n          )\n        }\n      ]\n    })\n  }\n\n  async fetchTipsetHead (height) {\n    return await this.client.ChainGetTipSetByHeight(height, null)\n  }\n\n  async fetchPower (head) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720 ? `${state}/1/@Ha:t04/1` : `${state}/@Ha:t04/1`\n    const storagePowerActorRaw = (await this.client.chainGetNode(node)).Obj\n    return {\n      TotalRawBytePower: bytesToBig(b64.decode(storagePowerActorRaw[0])),\n      TotalBytesCommitted: bytesToBig(b64.decode(storagePowerActorRaw[1])),\n      TotalQualityAdjPower: bytesToBig(b64.decode(storagePowerActorRaw[2])),\n      TotalQABytesCommitted: bytesToBig(b64.decode(storagePowerActorRaw[3])),\n      TotalPledgeCollateral: bytesToBig(b64.decode(storagePowerActorRaw[4])),\n      ThisEpochRawBytePower: bytesToBig(b64.decode(storagePowerActorRaw[5])),\n      ThisEpochQualityAdjPower: bytesToBig(b64.decode(storagePowerActorRaw[6])),\n      ThisEpochPledgeCollateral: bytesToBig(b64.decode(storagePowerActorRaw[7]))\n    }\n  }\n\n  async fetchDeposits (hash, head) {\n    const state = await this.client.StateReadState(hash, head.Cids)\n    const { State, Balance } = state\n    const { PreCommitDeposits, LockedFunds, InitialPledge, FeeDebt } = State\n    const Available = Balance - InitialPledge - PreCommitDeposits - LockedFunds\n\n    return {\n      Balance: f(Balance / 1000000000000000000),\n      InitialPledge: f(InitialPledge / 1000000000000000000),\n      Available: f(Available / 1000000000000000000),\n      LockedFunds: f(LockedFunds / 1000000000000000000),\n      PreCommitDeposits: f(PreCommitDeposits / 1000000000000000000),\n      FeeDebt: f(FeeDebt / 1000000000000000000)\n    }\n  }\n\n  async getMiners () {\n    const cached = window.localStorage.getItem('miners')\n    const cachedTime = window.localStorage.getItem('time')\n    if (cached && cachedTime && Date.now() - +cachedTime < 1000)\n      return JSON.parse(cached)\n\n    const json = await (\n      await fetch('https://filfox.info/api/v1/miner/top-miners/power?count=20')\n    ).json()\n    const miners = json.miners.reduce((acc, curr) => {\n      acc[curr.address] = curr\n      return acc\n    }, {})\n\n    window.localStorage.setItem('miners', JSON.stringify(miners))\n    window.localStorage.setItem('time', Date.now())\n\n    return miners\n  }\n\n  async fetchDeadlinesProxy (miner, head) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720\n        ? `${state}/1/@Ha:${miner}/1/12`\n        : `${state}/@Ha:${miner}/1/11`\n    const deadlinesCids = (await this.client.chainGetNode(node)).Obj[0]\n\n    const deadlines = await asyncPool(24, deadlinesCids, async minerCid => {\n      const deadline = (await this.client.ChainGetNode(`${minerCid['/']}`)).Obj\n      return {\n        Partitions: deadline[0],\n        LiveSectors: deadline[4],\n        TotalSectors: deadline[5],\n        FaultyPower: { Raw: Number(b64ToBn(deadline[6][0])) }\n      }\n    })\n    return deadlines\n  }\n\n  async fetchMinerInfo (hash, head) {\n    return this.client.StateMinerInfo(hash, head.Cids)\n  }\n\n  async fetchDeadlines (hash, head) {\n    const [deadline, deadlines] = await Promise.all([\n      this.client.StateMinerProvingDeadline(hash, head.Cids),\n      this.fetchDeadlinesProxy(hash, head)\n    ])\n\n    const nextDeadlines = [...Array(48)].map((_, i) => ({\n      ...deadlines[(deadline.Index + i) % 48],\n      Close: deadline.Close + i * 60,\n      Index: (deadline.Index + i) % 48\n    }))\n\n    const SectorsCount = deadlines\n      .map(d => +d.LiveSectors)\n      .reduce((acc, curr) => acc + curr, 0)\n\n    const FaultsCount =\n      deadlines\n        .map(d => +d.FaultyPower.Raw)\n        .reduce((acc, curr) => acc + curr, 0) /\n      (32 * 1024 * 1024 * 1024)\n\n    return {\n      deadlines: deadlines.map((d, i) => ({\n        ...deadlines[i],\n        Close: deadline.Close + i * 60,\n        Index: i\n      })),\n      nextDeadlines,\n      SectorsCount,\n      FaultsCount,\n      ActiveCount: SectorsCount - FaultsCount,\n      deadline\n    }\n  }\n\n  async updateMinerInfo (\n    minersInfo,\n    minerId,\n    setMinersIfMounted,\n    head,\n    filter = { deadlines: true }\n  ) {\n    const minerInfo = minersInfo[minerId]\n    setMinersIfMounted({ ...minersInfo, [minerId]: { ...minerInfo } })\n\n    this.fetchMinerInfo(minerId, head)\n      .then(info => {\n        minerInfo.info = info\n        setMinersIfMounted({ ...minersInfo, [minerId]: { ...minerInfo } })\n      })\n      .catch(e => {\n        console.error('failed to fetch miner info')\n      })\n\n    if (filter.deadlines)\n      this.fetchDeadlines(minerId, head)\n        .then(deadlines => {\n          minerInfo.deadlines = deadlines\n          setMinersIfMounted({\n            ...minersInfo,\n            [minerId]: { ...minerInfo }\n          })\n        })\n        .catch(e => {\n          console.error('failed to fetch deadlines')\n        })\n\n    this.fetchDeposits(minerId, head)\n      .then(deposits => {\n        minerInfo.deposits = deposits\n        setMinersIfMounted({\n          ...minersInfo,\n          [minerId]: { ...minerInfo }\n        })\n      })\n      .catch(e => {\n        console.error('failed to fetch deposits')\n      })\n\n    this.fetchPreCommittedSectors(minerId, head)\n      .then(preCommits => {\n        minerInfo.preCommits = preCommits\n        setMinersIfMounted({\n          ...minersInfo,\n          [minerId]: { ...minerInfo }\n        })\n      })\n      .catch(e => {\n        console.error('failed to fetch precommitted sectors', e)\n      })\n  }\n\n  async fetchPreCommittedSectors (hash, head) {\n    const node = head.Height >= 138720 ? `@Ha:${hash}/1/6` : `@Ha:${hash}/1/5`\n    const preCommittedSectors = await this.getData(head, node, preCommitSchema)\n    const PreCommitDeadlines = d3\n      .groups(\n        Object.keys(preCommittedSectors).map(d => ({\n          SectorNumber: preCommittedSectors[d].info.sector_number,\n          Expiry: preCommittedSectors[d].precommit_epoch + (10000 + 60 + 150)\n        })),\n        d => d.Expiry\n      )\n      .map(([Expiry, Sectors]) => ({\n        Expiry,\n        Sectors: Sectors.map(d => d.SectorNumber)\n      }))\n      .sort((a, b) => a.Expiry - b.Expiry)\n\n    return {\n      PreCommitDeadlines,\n      Count: Object.keys(preCommittedSectors).length\n    }\n  }\n\n  async fetchSectors (hash, head) {\n    const sectorList = await this.client.StateMinerSectors(\n      hash,\n      null,\n      head.Cids\n    )\n    const Sectors = sectorList.reduce((acc, curr) => {\n      acc[curr.ID] = { number: curr.ID, info: curr }\n      return acc\n    }, {})\n\n    const sectorsCount = Object.keys(Sectors).length\n    return { sectorsCount, Sectors }\n  }\n\n  async parentMessages (cid) {\n    if (cid['/'] in this.parents) {\n      return this.parents[cid['/']]\n    }\n    const msgs = await this.client.chainGetParentMessages(cid)\n    this.parents[cid['/']] = msgs\n    return msgs\n  }\n\n  async receiptParentMessages (cid) {\n    if (cid['/'] in this.receipts) {\n      return this.receipts[cid['/']]\n    }\n    const r = await this.client.chainGetParentReceipts(cid)\n    this.receipts[cid['/']] = r\n    return r\n  }\n\n  async parentAndReceiptsMessages (cid, ...methods) {\n    const msgs = await this.parentMessages(cid)\n    const receipts = await this.receiptParentMessages(cid)\n    if (msgs.length != receipts.length) {\n      throw new Error('invalid length')\n    }\n    return zip(msgs, receipts).filter(entry => {\n      const [tx, r] = entry\n      const exit = r.ExitCode == 0\n      var inMethod = true\n      if (methods.length > 0) {\n        inMethod = methods.includes(tx.Message.Method)\n      }\n      return exit && inMethod\n    })\n  }\n\n  async getMinerPower (tipset, height, miner) {\n    if (tipset['/'] in this.minfo) {\n      return this.minfo[tipset['/']]\n    }\n    //let m = await this.client.minerGetBaseInfo(miner,height,tipset)\n    let m = await this.client.stateMinerPower(miner, tipset)\n    this.minfo[tipset['/']] = m\n    return m\n  }\n\n  async fetchGenesisActors (head) {\n    const [Supply, Reward, Power] = await Promise.all([\n      this.client.StateCirculatingSupply(head.Cids),\n      this.client.StateReadState('f02', head.Cids),\n      this.client.StateReadState('f04', head.Cids)\n    ])\n\n    return { Supply, Reward, Power }\n  }\n\n  computeEconomics (\n    head,\n    { Supply, Reward, Power },\n    {\n      projectedDays,\n      perDurationNwRbGrowth = 10 * 2 ** 50,\n      perDurationMinerQaGrowth = 2 ** 51\n    }\n  ) {\n    const inputs = {\n      currEpoch: +head.Height,\n      nwqap: +Power.State.ThisEpochQualityAdjPower,\n      nwqapP: +Power.State.ThisEpochQAPowerSmoothed.PositionEstimate / 2 ** 128,\n      nwqapV: +Power.State.ThisEpochQAPowerSmoothed.VelocityEstimate / 2 ** 128,\n      nwCircSupply: +Supply / 1e18,\n      perEpochRewardP:\n        +Reward.State.ThisEpochRewardSmoothed.PositionEstimate /\n        (2 ** 128 * 1e18),\n      perEpochRewardV:\n        +Reward.State.ThisEpochRewardSmoothed.VelocityEstimate /\n        (2 ** 128 * 1e18),\n      nwCumsumRealized: +Reward.State.CumsumRealized,\n      perDurationNwRbGrowth,\n      projectedDays,\n      perDurationMinerQaGrowth\n    }\n\n    const econ = new Economics(inputs)\n\n    return econ.summary()\n  }\n}\n\nconst zip = (arr, ...arrs) => {\n  return arr.map((val, i) => arrs.reduce((a, arr) => [...a, arr[i]], [val]))\n}\n","import React from 'react'\n\nexport default function Summary ({ title, url, desc }) {\n  return (\n    <div className='summary col-sm'>\n      <div className={`summary-title ${!title ? 'gradient' : ''}`}>\n        {url ? <a href={url}>{title}</a> : <>{title}</>}\n      </div>\n      <div className='summary-desc'>{desc}</div>\n    </div>\n  )\n}\n","export default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# regl-camera`\n)});\n  main.variable(observer(\"createReglCamera\")).define(\"createReglCamera\", [\"self\",\"require\"], function(self,require)\n{\n  var global = {};\n  var exports = {};\n  var module = {};\n  var define;\n  (function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.createREGLCamera = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\nmodule.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n},{}],2:[function(require,module,exports){\nmodule.exports = identity;\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nfunction identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n},{}],3:[function(require,module,exports){\nmodule.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n},{}],4:[function(require,module,exports){\nvar identity = require('./identity');\n\nmodule.exports = lookAt;\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nfunction lookAt(out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < 0.000001 &&\n        Math.abs(eyey - centery) < 0.000001 &&\n        Math.abs(eyez - centerz) < 0.000001) {\n        return identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n},{\"./identity\":2}],5:[function(require,module,exports){\nmodule.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};\n},{}],6:[function(require,module,exports){\nmodule.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n},{}],7:[function(require,module,exports){\nmodule.exports = scale;\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nfunction scale(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n},{}],8:[function(require,module,exports){\nmodule.exports = translate;\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nfunction translate(out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n},{}],9:[function(require,module,exports){\nmodule.exports = add;\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction add(out, a, b) {\n    out[0] = a[0] + b[0]\n    out[1] = a[1] + b[1]\n    out[2] = a[2] + b[2]\n    return out\n}\n},{}],10:[function(require,module,exports){\nmodule.exports = copy;\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nfunction copy(out, a) {\n    out[0] = a[0]\n    out[1] = a[1]\n    out[2] = a[2]\n    return out\n}\n},{}],11:[function(require,module,exports){\nmodule.exports = 0.000001\n\n},{}],12:[function(require,module,exports){\nmodule.exports = equals\n\nvar EPSILON = require('./epsilon')\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0]\n  var a1 = a[1]\n  var a2 = a[2]\n  var b0 = b[0]\n  var b1 = b[1]\n  var b2 = b[2]\n  return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)))\n}\n\n},{\"./epsilon\":11}],13:[function(require,module,exports){\nmodule.exports = normalize;\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nfunction normalize(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    var len = x*x + y*y + z*z\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len)\n        out[0] = a[0] * len\n        out[1] = a[1] * len\n        out[2] = a[2] * len\n    }\n    return out\n}\n},{}],14:[function(require,module,exports){\nmodule.exports = rotateX;\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateX(out, a, b, c){\n    var by = b[1]\n    var bz = b[2]\n\n    // Translate point to the origin\n    var py = a[1] - by\n    var pz = a[2] - bz\n\n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n\n    // perform rotation and translate to correct position\n    out[0] = a[0]\n    out[1] = by + py * cc - pz * sc\n    out[2] = bz + py * sc + pz * cc\n\n    return out\n}\n\n},{}],15:[function(require,module,exports){\nmodule.exports = rotateY;\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateY(out, a, b, c){\n    var bx = b[0]\n    var bz = b[2]\n\n    // translate point to the origin\n    var px = a[0] - bx\n    var pz = a[2] - bz\n    \n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n  \n    // perform rotation and translate to correct position\n    out[0] = bx + pz * sc + px * cc\n    out[1] = a[1]\n    out[2] = bz + pz * cc - px * sc\n  \n    return out\n}\n\n},{}],16:[function(require,module,exports){\nmodule.exports = scaleAndAdd;\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nfunction scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale)\n    out[1] = a[1] + (b[1] * scale)\n    out[2] = a[2] + (b[2] * scale)\n    return out\n}\n},{}],17:[function(require,module,exports){\nmodule.exports = transformMat4;\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat4(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15]\n    w = w || 1.0\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w\n    return out\n}\n},{}],18:[function(require,module,exports){\n'use strict';\n\nvar transformMat4 = require('gl-vec3/transformMat4');\nvar vec3RotateY = require('gl-vec3/rotateY');\nvar vec3RotateX = require('gl-vec3/rotateX');\nvar vec3Equals = require('gl-vec3/equals');\nvar vec3Add = require('gl-vec3/add');\nvar vec3ScaleAndAdd = require('gl-vec3/scaleAndAdd');\nvar vec3Copy = require('gl-vec3/copy');\nvar vec3Normalize = require('gl-vec3/normalize');\nvar mat4Identity = require('gl-mat4/identity');\nvar mat4Invert = require('gl-mat4/invert');\nvar mat4Translate = require('gl-mat4/translate');\nvar mat4Scale = require('gl-mat4/scale');\nvar lookAt = require('gl-mat4/lookAt');\nvar perspective = require('gl-mat4/perspective');\n\n// This is a quick and dirty way of avoiding the poles.\nvar MAX_PHI = Math.PI * 0.5 - 1e-4;\nvar MIN_PHI = -Math.PI * 0.5 + 1e-4;\n\nmodule.exports = function createCamera (opts) {\n  opts = opts || {};\n\n  // A proxy flag with which we track the dirty params so that it doesn't need\n  // an extra method to tell the camera that the scene *has been* rendered.\n  var willBeDirty = true;\n\n  var params = {\n    aspectRatio: opts.aspectRatio ? opts.aspectRatio : 1,\n\n    // Zoom about the cursor as opposed to the center of the scene\n    zoomAboutCursor: opts.zoomAboutCursor === undefined ? true : opts.zoomAboutCursor,\n\n    // Spherical coords!\n    distance: opts.distance === undefined ? 10 : opts.distance,\n    phi: opts.phi === undefined ? 0 : opts.phi,\n    theta: opts.theta === undefined ? 0 : opts.theta,\n\n    // Camera parameters\n    fovY: opts.fovY === undefined ? Math.PI / 4 : opts.fovY,\n    near: opts.near === undefined ? 0.1 : opts.near,\n    far: opts.far === undefined ? 100 : opts.far,\n\n    // Decay of inertia, in ms\n    panDecayTime: opts.panDecayTime || 100,\n    zoomDecayTime: opts.zoomDecayTime || 100,\n    rotationDecayTime: opts.rotationDecayTime || 100,\n\n    dirty: true,\n\n    up: opts.up || new Float32Array([0, 1, 0]),\n    center: opts.center || new Float32Array(3),\n    rotationCenter: opts.rotationCenter || opts.center && opts.center.slice() || new Float32Array(3),\n\n    // Current interactions, which can be set directly. If setting directly, changes\n    // will be additive to changes resulting from interactions.\n    zoom: 0,\n    panX: 0,\n    panY: 0,\n    panZ: 0,\n    pitch: 0,\n    yaw: 0,\n    dTheta: 0,\n    dPhi: 0,\n\n    // Mouse coordinates of the interaction. Note that we fudge things ever so slightly\n    // here and only store one mouse position per frame, so that we might actually\n    // apply multiple accumulated events per frame about the *slightly* incorrect point.\n    // In reality, I think this fudgeable.\n    mouseX: 0,\n    mouseY: 0,\n  };\n\n  var t0 = null;\n  var camera = {\n    tick: function (mergeState) {\n      // If we've accumulated interactions, then set them in the params directly.\n      // Alternatively, we could recompute the full params on every single interaction\n      // event, but that would result in maybe twice as many full matrix/view updates\n      // as could ever be rendered in browsers like Safari that dispatch multiple\n      // events per requestAnimationFrame.\n      if (accumulator.zoom) params.zoom = accumulator.zoom;\n      if (accumulator.dTheta) params.dTheta = accumulator.dTheta;\n      if (accumulator.dPhi) params.dPhi = accumulator.dPhi;\n      if (accumulator.panX) params.panX = accumulator.panX;\n      if (accumulator.panY) params.panY = accumulator.panY;\n      if (accumulator.panZ) params.panZ = accumulator.panZ;\n      if (accumulator.yaw) params.yaw = accumulator.yaw;\n      if (accumulator.pitch) params.pitch = accumulator.pitch;\n      zeroChanges(accumulator);\n\n      if (mergeState) {\n        // Okay, so if we just merge changes, that totally breaks mouse interaction\n        // because provided dPhi will zero out dPhi resulting from mouse interaction.\n        // It would be better to accumulate mouse pixel changes separately and then\n        // add this in afterwards, but since we've accumulated dPhi etc right in the\n        // params, we need to cache this, then merge changes, then add these back in\n        // if necessary. Consider this a low-priority cleanup item.\n        var cachedDPhi = params.dPhi;\n        var cachedDTheta = params.dTheta;\n        var cachedZoom = params.zoom;\n        var cachedPanX = params.panX;\n        var cachedPanY = params.panY;\n        var cachedPanZ = params.panZ;\n        var cachedPitch = params.pitch;\n        var cachedYaw = params.yaw;\n\n        // This merges anything and everything in the params vector.\n        Object.assign(params, mergeState);\n\n        // Yup, so add them back in.\n        if (mergeState.dPhi !== undefined) params.dPhi += cachedDPhi;\n        if (mergeState.dTheta !== undefined) params.dTheta += cachedDTheta;\n        if (mergeState.zoom !== undefined) params.zoom += cachedZoom;\n        if (mergeState.panX !== undefined) params.panX += cachedPanX;\n        if (mergeState.panY !== undefined) params.panY += cachedPanY;\n        if (mergeState.panZ !== undefined) params.panZ += cachedPanZ;\n        if (mergeState.pitch !== undefined) params.pitch += cachedPitch;\n        if (mergeState.yaw !== undefined) params.yaw += cachedYaw;\n      }\n\n      // Check for and apply passive changes to the params vector. That is, if you\n      // set camera.params.distance, this will automatically factor in those changes.\n      if (paramsVectorHasChanged()) {\n        applyStateChanges();\n      }\n\n      // Check if the view is changing above some threshold tolerance.\n      if (viewIsChanging()) {\n        // If so, update the view.\n        applyViewChanges(params);\n      } else {\n        // If not, fully zero it out.\n        zeroChanges(params);\n      }\n\n      // Not the highest resolution timer, but we only use it for inertia decay.\n      var t = Date.now();\n      if (t0 !== null) decay(t - t0);\n      t0 = t;\n\n      // Transfer this flag in a subtle way so that camera.params.dirty is writable.\n      camera.state.dirty = willBeDirty;\n      willBeDirty = false;\n\n      storeCurrentState();\n    },\n    taint: taint,\n    resize: resize,\n    params: params,\n    rotate: rotate,\n    pivot: pivot,\n    pan: pan,\n    zoom: zoom,\n    computeMatrices: computeMatrices,\n  };\n\n  camera.state = {\n  };\n\n  camera.state.projection = new Float32Array(16);\n  camera.state.viewInv = new Float32Array(16);\n  camera.state.view = new Float32Array(16);\n  camera.state.width = null;\n  camera.state.height = null;\n  camera.state.eye = new Float32Array(3);\n\n  // Vectors used but not exposed. Not they couldn't be, but you can get these\n  // from the view matrix just fine.\n  var tmp = new Float32Array(3);\n  var viewUp = new Float32Array(3);\n  var viewRight = new Float32Array(3);\n  var viewForward = new Float32Array(3);\n  var origin = new Float32Array(3);\n  var dView = new Float32Array(16);\n\n  // Track the previous params so that we can detect changes in these parameters\n  var previousState = {\n    up: new Float32Array(3),\n    center: new Float32Array(3)\n  };\n  storeCurrentState();\n\n  function storeCurrentState () {\n    vec3Copy(previousState.up, params.up);\n    vec3Copy(previousState.center, params.center);\n    previousState.near = params.near;\n    previousState.far = params.far;\n    previousState.distance = params.distance;\n    previousState.phi = params.phi;\n    previousState.theta = params.theta;\n    previousState.fovY = params.fovY;\n  }\n\n  function paramsVectorHasChanged () {\n    if (!vec3Equals(params.up, previousState.up)) return true;\n    if (!vec3Equals(params.center, previousState.center)) return true;\n    if (params.near !== previousState.near) return true;\n    if (params.far !== previousState.far) return true;\n    if (params.phi !== previousState.phi) return true;\n    if (params.theta !== previousState.theta) return true;\n    if (params.distance !== previousState.distance) return true;\n    if (params.fovY !== previousState.fovY) return true;\n    return false;\n  }\n\n  var paramsChanges = {};\n  function applyStateChanges () {\n    paramsChanges.dPhi = params.phi - previousState.phi;\n    paramsChanges.dTheta = params.theta - previousState.theta;\n    paramsChanges.zoom = params.distance / previousState.distance - 1;\n    params.theta = previousState.theta;\n    params.distance = previousState.distance;\n    params.phi = previousState.phi;\n    paramsChanges.yaw = 0;\n    paramsChanges.pitch = 0;\n    paramsChanges.panX = 0;\n    paramsChanges.panY = 0;\n    paramsChanges.panZ = 0;\n    paramsChanges.mouseX = 0;\n    paramsChanges.mouseY = 0;\n\n    applyViewChanges(paramsChanges);\n  }\n\n  // The meat of it. Note that this function is intentionally very simple! There must\n  // not be any logic or complexity to this function. The complexity is in moving this\n  // view, not constructing it.\n  function computeMatrices () {\n    // Spherical coords\n    camera.state.eye[0] = 0;\n    camera.state.eye[1] = 0;\n    camera.state.eye[2] = params.distance;\n    vec3RotateX(camera.state.eye, camera.state.eye, origin, -params.phi);\n    vec3RotateY(camera.state.eye, camera.state.eye, origin, params.theta);\n    vec3Add(camera.state.eye, camera.state.eye, params.center);\n\n    // View + projection\n    lookAt(camera.state.view, camera.state.eye, params.center, params.up);\n    perspective(camera.state.projection, params.fovY, camera.params.aspectRatio, params.near, params.far);\n\n    // For convenience, but also because we already use this, so let's just expose it\n    mat4Invert(camera.state.viewInv, camera.state.view);\n  }\n\n  // Track this not on the params itself so that you can write camera.params.dirty\n  function taint () {\n    willBeDirty = true;\n  }\n\n  function resize (aspectRatio) {\n    camera.params.aspectRatio = aspectRatio\n    computeMatrices();\n    taint();\n  }\n\n  // All of these are mosty unitless, proportional, or at least relative to a window\n  // size that doesn't change much so that fixed tolerances seem fine.\n  function viewIsChanging () {\n    if (Math.abs(params.zoom) > 1e-4) return true;\n    if (Math.abs(params.panX) > 1e-4) return true;\n    if (Math.abs(params.panY) > 1e-4) return true;\n    if (Math.abs(params.panZ) > 1e-4) return true;\n    if (Math.abs(params.dTheta) > 1e-4) return true;\n    if (Math.abs(params.dPhi) > 1e-4) return true;\n    if (Math.abs(params.yaw) > 1e-4) return true;\n    if (Math.abs(params.pitch) > 1e-4) return true;\n  }\n\n  function zeroChanges (obj) {\n    obj.zoom = 0;\n    obj.dTheta = 0;\n    obj.dPhi = 0;\n    obj.panX = 0;\n    obj.panY = 0;\n    obj.panZ = 0;\n    obj.yaw = 0;\n    obj.pitch = 0;\n  }\n\n  // Exponential decay. Basically time-correct proportional decay.\n  function decay (dt) {\n    var panDecay = params.panDecayTime ? Math.exp(-dt / params.panDecayTime / Math.LN2) : 0;\n    var zoomDecay = params.zoomDecayTime ? Math.exp(-dt / params.zoomDecayTime / Math.LN2) : 0;\n    var rotateDecay = params.rotationDecayTime ? Math.exp(-dt / params.rotationDecayTime / Math.LN2) : 0;\n    params.zoom *= zoomDecay;\n    params.panX *= panDecay;\n    params.panY *= panDecay;\n    params.panZ *= panDecay;\n    params.dTheta *= rotateDecay;\n    params.dPhi *= rotateDecay;\n    params.yaw *= rotateDecay;\n    params.pitch *= rotateDecay;\n  }\n\n  // Accumulate changes per-frame since it turns out that Safari dispatches mouse events\n  // more than once per RAF while chrome sticks to strictly once per RAF. How surprising!\n  var accumulator = {};\n  zeroChanges(accumulator);\n\n  function pan (panX, panY) {\n    var scaleFactor = camera.params.distance * Math.tan(camera.params.fovY * 0.5) * 2.0;\n    accumulator.panX += panX * params.aspectRatio * scaleFactor;\n    accumulator.panY += panY * scaleFactor;\n    return camera;\n  }\n\n  function zoom (mouseX, mouseY, zoom) {\n    accumulator.zoom += zoom;\n    params.mouseX = mouseX;\n    params.mouseY = mouseY;\n    return camera;\n  }\n\n  function pivot (yaw, pitch) {\n    var scaleFactor = camera.params.fovY;\n    accumulator.yaw += yaw * scaleFactor * params.aspectRatio;\n    accumulator.pitch += pitch * scaleFactor;\n  }\n\n  function rotate (dTheta, dPhi) {\n    accumulator.dTheta += dTheta;\n    accumulator.dPhi += dPhi;\n  }\n\n  function applyViewChanges (changes) {\n    var zoomScaleFactor;\n\n    // Initialize a veiw-space transformation for panning and zooming\n    mat4Identity(dView);\n\n    // Zoom about the mouse location in view-space\n    if (params.zoomAboutCursor) {\n      zoomScaleFactor = params.distance * Math.tan(params.fovY * 0.5);\n      tmp[0] = changes.mouseX * params.aspectRatio * zoomScaleFactor;\n      tmp[1] = changes.mouseY * zoomScaleFactor;\n      tmp[2] = 0;\n      mat4Translate(dView, dView, tmp);\n    }\n\n    tmp[0] = 1 + changes.zoom;\n    tmp[1] = 1 + changes.zoom;\n    tmp[2] = 1;\n    mat4Scale(dView, dView, tmp);\n\n    if (params.zoomAboutCursor) {\n      zoomScaleFactor = params.distance * Math.tan(params.fovY * 0.5);\n      tmp[0] = -changes.mouseX * params.aspectRatio * zoomScaleFactor;\n      tmp[1] = -changes.mouseY * zoomScaleFactor;\n      tmp[2] = 0;\n      mat4Translate(dView, dView, tmp);\n    }\n\n    // Pan the view matrix\n    dView[12] -= changes.panX * 0.5;\n    dView[13] -= changes.panY * 0.5;\n\n    // transform into view space, then transfor, then invert again\n    transformMat4(params.center, params.center, camera.state.view);\n    transformMat4(params.center, params.center, dView);\n    transformMat4(params.center, params.center, camera.state.viewInv);\n\n    // If rotating about the center of the screen, then copy center -> rotationCenter\n    if (params.rotateAboutCenter) {\n      vec3Copy(params.rotationCenter, params.center);\n    }\n\n    params.distance *= 1 + changes.zoom;\n\n    var prevPhi = params.phi;\n    params.phi += changes.dPhi;\n    params.phi = Math.min(MAX_PHI, Math.max(MIN_PHI, params.phi));\n    var dPhi = params.phi - prevPhi;\n\n    var prevTheta = params.theta;\n    params.theta += changes.dTheta;\n    var dTheta = params.theta - prevTheta;\n\n    vec3RotateY(params.center, params.center, params.rotationCenter, dTheta - params.theta);\n    vec3RotateX(params.center, params.center, params.rotationCenter, -dPhi);\n    vec3RotateY(params.center, params.center, params.rotationCenter, params.theta);\n\n    if (changes.yaw !== 0 || changes.pitch !== 0) {\n      viewRight[0] = camera.state.view[0];\n      viewRight[1] = camera.state.view[4];\n      viewRight[2] = camera.state.view[8];\n      vec3Normalize(viewRight, viewRight);\n\n      viewUp[0] = camera.state.view[1];\n      viewUp[1] = camera.state.view[5];\n      viewUp[2] = camera.state.view[9];\n      vec3Normalize(viewUp, viewUp);\n\n      viewForward[0] = camera.state.view[2];\n      viewForward[1] = camera.state.view[6];\n      viewForward[2] = camera.state.view[10];\n      vec3Normalize(viewForward, viewForward);\n\n      var clippedPhi = Math.min(MAX_PHI, Math.max(MIN_PHI, params.phi + changes.pitch * 0.5));\n      var clippedPitch = clippedPhi - params.phi;\n\n      vec3ScaleAndAdd(params.center, params.center, viewRight, -Math.sin(changes.yaw * 0.5) * params.distance);\n      vec3ScaleAndAdd(params.center, params.center, viewUp, -Math.sin(clippedPitch) * params.distance);\n      vec3ScaleAndAdd(params.center, params.center, viewForward, (2 - Math.cos(changes.yaw * 0.5) - Math.cos(clippedPitch)) * params.distance);\n      params.phi = clippedPhi;\n      params.theta += changes.yaw * 0.5;\n    }\n\n    computeMatrices();\n    taint();\n  }\n\n  resize(camera.params.aspectRatio);\n\n  return camera;\n}\n\n},{\"gl-mat4/identity\":2,\"gl-mat4/invert\":3,\"gl-mat4/lookAt\":4,\"gl-mat4/perspective\":6,\"gl-mat4/scale\":7,\"gl-mat4/translate\":8,\"gl-vec3/add\":9,\"gl-vec3/copy\":10,\"gl-vec3/equals\":12,\"gl-vec3/normalize\":13,\"gl-vec3/rotateX\":14,\"gl-vec3/rotateY\":15,\"gl-vec3/scaleAndAdd\":16,\"gl-vec3/transformMat4\":17}],19:[function(require,module,exports){\n'use strict';\n\nvar mat4create = require('gl-mat4/create');\nvar mat4multiply = require('gl-mat4/multiply');\nvar createCamera = require('./inertial-turntable-camera');\n\nmodule.exports = function createReglCamera (regl, opts) {\n  var element = regl._gl.canvas;\n\n  function getAspectRatio () {\n    return element.clientWidth / element.clientHeight;\n  }\n\n  var camera = createCamera(Object.assign({}, {\n    aspectRatio: getAspectRatio(),\n  }, opts || {}));\n\n  var mProjectionView = mat4create();\n  var setCameraUniforms = regl({\n    context: {\n      projection: () => camera.state.projection,\n      view: () => camera.state.view,\n      viewInv: () => camera.state.viewInv,\n      eye: () => camera.state.eye,\n    },\n    uniforms: {\n      uProjectionView: ctx => mat4multiply(mProjectionView, ctx.projection, ctx.view),\n    }\n  });\n\n  function invokeCamera (props, callback) {\n    if (!callback) {\n      callback = props;\n      props = {};\n    }\n\n    camera.tick(props);\n\n    if (props.afterTick) {\n      props.afterTick(camera.state, camera.params);\n      camera.computeMatrices();\n    }\n\n    setCameraUniforms(function () {\n      callback(camera.state, camera.params);\n    });\n  }\n\n  invokeCamera.taint = camera.taint;\n  invokeCamera.resize = camera.resize;\n  invokeCamera.tick = camera.tick;\n  invokeCamera.setUniforms = setCameraUniforms;\n  invokeCamera.computeMatrices = camera.computeMatrices;\n\n  invokeCamera.rotate = camera.rotate;\n  invokeCamera.pan = camera.pan;\n  invokeCamera.pivot = camera.pivot;\n  invokeCamera.zoom = camera.zoom;\n\n  Object.defineProperties(invokeCamera, {\n    state: {\n      get: function () { return camera.state; },\n      set: function (value) { camera.state = value; }\n    },\n    params: {\n      get: function () { return camera.params; },\n      set: function (value) { camera.params = value; }\n    },\n    element: {\n      get: function () { return element; }\n    },\n  });\n\n  window.addEventListener('resize', function () {\n    camera.resize(getAspectRatio());\n  }, false);\n  \n  return invokeCamera;\n};\n\n},{\"./inertial-turntable-camera\":18,\"gl-mat4/create\":1,\"gl-mat4/multiply\":5}]},{},[19])(19)\n});\n  return module.exports\n}\n);\n  main.variable(observer(\"createInteractions\")).define(\"createInteractions\", [\"self\",\"require\"], function(self,require)\n{\n  var global = {};\n  var exports = {};\n  var module = {};\n  var define;\n  (function(f) {\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n      module.exports = f();\n    } else if (typeof define === \"function\" && define.amd) {\n      define([], f);\n    } else {\n      var g;\n      if (typeof window !== \"undefined\") {\n        g = window;\n      } else if (typeof global !== \"undefined\") {\n        g = global;\n      } else if (typeof self !== \"undefined\") {\n        g = self;\n      } else {\n        g = this;\n      }\n      g.createInteractions = f();\n    }\n  })(function() {\n    var define, module, exports;\n    return (function() {\n      function r(e, n, t) {\n        function o(i, f) {\n          if (!n[i]) {\n            if (!e[i]) {\n              var c = \"function\" == typeof require && require;\n              if (!f && c) return c(i, !0);\n              if (u) return u(i, !0);\n              var a = new Error(\"Cannot find module '\" + i + \"'\");\n              throw ((a.code = \"MODULE_NOT_FOUND\"), a);\n            }\n            var p = (n[i] = { exports: {} });\n            e[i][0].call(\n              p.exports,\n              function(r) {\n                var n = e[i][1][r];\n                return o(n || r);\n              },\n              p,\n              p.exports,\n              r,\n              e,\n              n,\n              t\n            );\n          }\n          return n[i].exports;\n        }\n        for (\n          var u = \"function\" == typeof require && require, i = 0;\n          i < t.length;\n          i++\n        )\n          o(t[i]);\n        return o;\n      }\n      return r;\n    })()(\n      {\n        1: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var assign = require('es5-ext/object/assign'),\n              normalizeOpts = require('es5-ext/object/normalize-options'),\n              isCallable = require('es5-ext/object/is-callable'),\n              contains = require('es5-ext/string/#/contains'),\n              d;\n\n            d = module.exports = function(dscr, value /*, options*/) {\n              var c, e, w, options, desc;\n              if (arguments.length < 2 || typeof dscr !== 'string') {\n                options = value;\n                value = dscr;\n                dscr = null;\n              } else {\n                options = arguments[2];\n              }\n              if (dscr == null) {\n                c = w = true;\n                e = false;\n              } else {\n                c = contains.call(dscr, 'c');\n                e = contains.call(dscr, 'e');\n                w = contains.call(dscr, 'w');\n              }\n\n              desc = {\n                value: value,\n                configurable: c,\n                enumerable: e,\n                writable: w\n              };\n              return !options ? desc : assign(normalizeOpts(options), desc);\n            };\n\n            d.gs = function(dscr, get, set /*, options*/) {\n              var c, e, options, desc;\n              if (typeof dscr !== 'string') {\n                options = set;\n                set = get;\n                get = dscr;\n                dscr = null;\n              } else {\n                options = arguments[3];\n              }\n              if (get == null) {\n                get = undefined;\n              } else if (!isCallable(get)) {\n                options = get;\n                get = set = undefined;\n              } else if (set == null) {\n                set = undefined;\n              } else if (!isCallable(set)) {\n                options = set;\n                set = undefined;\n              }\n              if (dscr == null) {\n                c = true;\n                e = false;\n              } else {\n                c = contains.call(dscr, 'c');\n                e = contains.call(dscr, 'e');\n              }\n\n              desc = { get: get, set: set, configurable: c, enumerable: e };\n              return !options ? desc : assign(normalizeOpts(options), desc);\n            };\n          },\n          {\n            \"es5-ext/object/assign\": 3,\n            \"es5-ext/object/is-callable\": 6,\n            \"es5-ext/object/normalize-options\": 11,\n            \"es5-ext/string/#/contains\": 14\n          }\n        ],\n        2: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            // eslint-disable-next-line no-empty-function\n            module.exports = function() {};\n          },\n          {}\n        ],\n        3: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = require(\"./is-implemented\")()\n              ? Object.assign\n              : require(\"./shim\");\n          },\n          { \"./is-implemented\": 4, \"./shim\": 5 }\n        ],\n        4: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = function() {\n              var assign = Object.assign,\n                obj;\n              if (typeof assign !== \"function\") return false;\n              obj = { foo: \"raz\" };\n              assign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n              return obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n            };\n          },\n          {}\n        ],\n        5: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var keys = require(\"../keys\"),\n              value = require(\"../valid-value\"),\n              max = Math.max;\n\n            module.exports = function(dest, src /*, srcn*/) {\n              var error,\n                i,\n                length = max(arguments.length, 2),\n                assign;\n              dest = Object(value(dest));\n              assign = function(key) {\n                try {\n                  dest[key] = src[key];\n                } catch (e) {\n                  if (!error) error = e;\n                }\n              };\n              for (i = 1; i < length; ++i) {\n                src = arguments[i];\n                keys(src).forEach(assign);\n              }\n              if (error !== undefined) throw error;\n              return dest;\n            };\n          },\n          { \"../keys\": 8, \"../valid-value\": 13 }\n        ],\n        6: [\n          function(require, module, exports) {\n            // Deprecated\n\n            \"use strict\";\n\n            module.exports = function(obj) {\n              return typeof obj === \"function\";\n            };\n          },\n          {}\n        ],\n        7: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\n            module.exports = function(val) {\n              return val !== _undefined && val !== null;\n            };\n          },\n          { \"../function/noop\": 2 }\n        ],\n        8: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = require(\"./is-implemented\")()\n              ? Object.keys\n              : require(\"./shim\");\n          },\n          { \"./is-implemented\": 9, \"./shim\": 10 }\n        ],\n        9: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = function() {\n              try {\n                Object.keys(\"primitive\");\n                return true;\n              } catch (e) {\n                return false;\n              }\n            };\n          },\n          {}\n        ],\n        10: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var isValue = require(\"../is-value\");\n\n            var keys = Object.keys;\n\n            module.exports = function(object) {\n              return keys(isValue(object) ? Object(object) : object);\n            };\n          },\n          { \"../is-value\": 7 }\n        ],\n        11: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var isValue = require(\"./is-value\");\n\n            var forEach = Array.prototype.forEach,\n              create = Object.create;\n\n            var process = function(src, obj) {\n              var key;\n              for (key in src) obj[key] = src[key];\n            };\n\n            // eslint-disable-next-line no-unused-vars\n            module.exports = function(opts1 /*, options*/) {\n              var result = create(null);\n              forEach.call(arguments, function(options) {\n                if (!isValue(options)) return;\n                process(Object(options), result);\n              });\n              return result;\n            };\n          },\n          { \"./is-value\": 7 }\n        ],\n        12: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = function(fn) {\n              if (typeof fn !== \"function\")\n                throw new TypeError(fn + \" is not a function\");\n              return fn;\n            };\n          },\n          {}\n        ],\n        13: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var isValue = require(\"./is-value\");\n\n            module.exports = function(value) {\n              if (!isValue(value))\n                throw new TypeError(\"Cannot use null or undefined\");\n              return value;\n            };\n          },\n          { \"./is-value\": 7 }\n        ],\n        14: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = require(\"./is-implemented\")()\n              ? String.prototype.contains\n              : require(\"./shim\");\n          },\n          { \"./is-implemented\": 15, \"./shim\": 16 }\n        ],\n        15: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var str = \"razdwatrzy\";\n\n            module.exports = function() {\n              if (typeof str.contains !== \"function\") return false;\n              return (\n                str.contains(\"dwa\") === true && str.contains(\"foo\") === false\n              );\n            };\n          },\n          {}\n        ],\n        16: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var indexOf = String.prototype.indexOf;\n\n            module.exports = function(searchString /*, position*/) {\n              return indexOf.call(this, searchString, arguments[1]) > -1;\n            };\n          },\n          {}\n        ],\n        17: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            var d = require('d'),\n              callable = require('es5-ext/object/valid-callable'),\n              apply = Function.prototype.apply,\n              call = Function.prototype.call,\n              create = Object.create,\n              defineProperty = Object.defineProperty,\n              defineProperties = Object.defineProperties,\n              hasOwnProperty = Object.prototype.hasOwnProperty,\n              descriptor = {\n                configurable: true,\n                enumerable: false,\n                writable: true\n              },\n              on,\n              once,\n              off,\n              emit,\n              methods,\n              descriptors,\n              base;\n\n            on = function(type, listener) {\n              var data;\n\n              callable(listener);\n\n              if (!hasOwnProperty.call(this, '__ee__')) {\n                data = descriptor.value = create(null);\n                defineProperty(this, '__ee__', descriptor);\n                descriptor.value = null;\n              } else {\n                data = this.__ee__;\n              }\n              if (!data[type]) data[type] = listener;\n              else if (typeof data[type] === 'object')\n                data[type].push(listener);\n              else data[type] = [data[type], listener];\n\n              return this;\n            };\n\n            once = function(type, listener) {\n              var once, self;\n\n              callable(listener);\n              self = this;\n              on.call(\n                this,\n                type,\n                (once = function() {\n                  off.call(self, type, once);\n                  apply.call(listener, this, arguments);\n                })\n              );\n\n              once.__eeOnceListener__ = listener;\n              return this;\n            };\n\n            off = function(type, listener) {\n              var data, listeners, candidate, i;\n\n              callable(listener);\n\n              if (!hasOwnProperty.call(this, '__ee__')) return this;\n              data = this.__ee__;\n              if (!data[type]) return this;\n              listeners = data[type];\n\n              if (typeof listeners === 'object') {\n                for (i = 0; (candidate = listeners[i]); ++i) {\n                  if (\n                    candidate === listener ||\n                    candidate.__eeOnceListener__ === listener\n                  ) {\n                    if (listeners.length === 2)\n                      data[type] = listeners[i ? 0 : 1];\n                    else listeners.splice(i, 1);\n                  }\n                }\n              } else {\n                if (\n                  listeners === listener ||\n                  listeners.__eeOnceListener__ === listener\n                ) {\n                  delete data[type];\n                }\n              }\n\n              return this;\n            };\n\n            emit = function(type) {\n              var i, l, listener, listeners, args;\n\n              if (!hasOwnProperty.call(this, '__ee__')) return;\n              listeners = this.__ee__[type];\n              if (!listeners) return;\n\n              if (typeof listeners === 'object') {\n                l = arguments.length;\n                args = new Array(l - 1);\n                for (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n                listeners = listeners.slice();\n                for (i = 0; (listener = listeners[i]); ++i) {\n                  apply.call(listener, this, args);\n                }\n              } else {\n                switch (arguments.length) {\n                  case 1:\n                    call.call(listeners, this);\n                    break;\n                  case 2:\n                    call.call(listeners, this, arguments[1]);\n                    break;\n                  case 3:\n                    call.call(listeners, this, arguments[1], arguments[2]);\n                    break;\n                  default:\n                    l = arguments.length;\n                    args = new Array(l - 1);\n                    for (i = 1; i < l; ++i) {\n                      args[i - 1] = arguments[i];\n                    }\n                    apply.call(listeners, this, args);\n                }\n              }\n            };\n\n            methods = {\n              on: on,\n              once: once,\n              off: off,\n              emit: emit\n            };\n\n            descriptors = {\n              on: d(on),\n              once: d(once),\n              off: d(off),\n              emit: d(emit)\n            };\n\n            base = defineProperties({}, descriptors);\n\n            module.exports = exports = function(o) {\n              return o == null\n                ? create(base)\n                : defineProperties(Object(o), descriptors);\n            };\n            exports.methods = methods;\n          },\n          { d: 1, \"es5-ext/object/valid-callable\": 12 }\n        ],\n        18: [\n          function(require, module, exports) {\n            module.exports = transformMat4;\n\n            /**\n             * Transforms the vec3 with a mat4.\n             * 4th vector component is implicitly '1'\n             *\n             * @param {vec3} out the receiving vector\n             * @param {vec3} a the vector to transform\n             * @param {mat4} m matrix to transform with\n             * @returns {vec3} out\n             */\n            function transformMat4(out, a, m) {\n              var x = a[0],\n                y = a[1],\n                z = a[2],\n                w = m[3] * x + m[7] * y + m[11] * z + m[15];\n              w = w || 1.0;\n              out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n              out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n              out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n              return out;\n            }\n          },\n          {}\n        ],\n        19: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = mouseListen;\n\n            var mouse = require('mouse-event');\n\n            function mouseListen(element, callback) {\n              if (!callback) {\n                callback = element;\n                element = window;\n              }\n\n              var buttonState = 0;\n              var x = 0;\n              var y = 0;\n              var mods = {\n                shift: false,\n                alt: false,\n                control: false,\n                meta: false\n              };\n              var attached = false;\n\n              function updateMods(ev) {\n                var changed = false;\n                if ('altKey' in ev) {\n                  changed = changed || ev.altKey !== mods.alt;\n                  mods.alt = !!ev.altKey;\n                }\n                if ('shiftKey' in ev) {\n                  changed = changed || ev.shiftKey !== mods.shift;\n                  mods.shift = !!ev.shiftKey;\n                }\n                if ('ctrlKey' in ev) {\n                  changed = changed || ev.ctrlKey !== mods.control;\n                  mods.control = !!ev.ctrlKey;\n                }\n                if ('metaKey' in ev) {\n                  changed = changed || ev.metaKey !== mods.meta;\n                  mods.meta = !!ev.metaKey;\n                }\n                return changed;\n              }\n\n              function handleEvent(nextButtons, ev) {\n                var nextX = mouse.x(ev);\n                var nextY = mouse.y(ev);\n                if ('buttons' in ev) {\n                  nextButtons = ev.buttons | 0;\n                }\n                if (\n                  nextButtons !== buttonState ||\n                  nextX !== x ||\n                  nextY !== y ||\n                  updateMods(ev)\n                ) {\n                  buttonState = nextButtons | 0;\n                  x = nextX || 0;\n                  y = nextY || 0;\n                  callback && callback(buttonState, x, y, mods);\n                }\n              }\n\n              function clearState(ev) {\n                handleEvent(0, ev);\n              }\n\n              function handleBlur() {\n                if (\n                  buttonState ||\n                  x ||\n                  y ||\n                  mods.shift ||\n                  mods.alt ||\n                  mods.meta ||\n                  mods.control\n                ) {\n                  x = y = 0;\n                  buttonState = 0;\n                  mods.shift = mods.alt = mods.control = mods.meta = false;\n                  callback && callback(0, 0, 0, mods);\n                }\n              }\n\n              function handleMods(ev) {\n                if (updateMods(ev)) {\n                  callback && callback(buttonState, x, y, mods);\n                }\n              }\n\n              function handleMouseMove(ev) {\n                if (mouse.buttons(ev) === 0) {\n                  handleEvent(0, ev);\n                } else {\n                  handleEvent(buttonState, ev);\n                }\n              }\n\n              function handleMouseDown(ev) {\n                handleEvent(buttonState | mouse.buttons(ev), ev);\n              }\n\n              function handleMouseUp(ev) {\n                handleEvent(buttonState & ~mouse.buttons(ev), ev);\n              }\n\n              function attachListeners() {\n                if (attached) {\n                  return;\n                }\n                attached = true;\n\n                element.addEventListener('mousemove', handleMouseMove);\n                element.addEventListener('mousedown', handleMouseDown);\n                element.addEventListener('mouseup', handleMouseUp);\n\n                element.addEventListener('mouseleave', clearState);\n                element.addEventListener('mouseenter', clearState);\n                element.addEventListener('mouseout', clearState);\n                element.addEventListener('mouseover', clearState);\n\n                if (element !== window) {\n                  window.addEventListener('blur', handleBlur);\n                  window.addEventListener('keyup', handleMods);\n                  window.addEventListener('keydown', handleMods);\n                  window.addEventListener('keypress', handleMods);\n                }\n              }\n\n              function detachListeners() {\n                if (!attached) {\n                  return;\n                }\n                attached = false;\n\n                element.removeEventListener('mousemove', handleMouseMove);\n                element.removeEventListener('mousedown', handleMouseDown);\n                element.removeEventListener('mouseup', handleMouseUp);\n\n                element.removeEventListener('mouseleave', clearState);\n                element.removeEventListener('mouseenter', clearState);\n                element.removeEventListener('mouseout', clearState);\n                element.removeEventListener('mouseover', clearState);\n\n                if (element !== window) {\n                  window.removeEventListener('blur', handleBlur);\n                  window.removeEventListener('keyup', handleMods);\n                  window.removeEventListener('keydown', handleMods);\n                  window.removeEventListener('keypress', handleMods);\n                }\n              }\n\n              // Attach listeners\n              attachListeners();\n\n              var result = {\n                element: element\n              };\n\n              Object.defineProperties(result, {\n                enabled: {\n                  get: function() {\n                    return attached;\n                  },\n                  set: function(f) {\n                    if (f) {\n                      attachListeners();\n                    } else {\n                      detachListeners();\n                    }\n                  },\n                  enumerable: true\n                },\n                buttons: {\n                  get: function() {\n                    return buttonState;\n                  },\n                  enumerable: true\n                },\n                x: {\n                  get: function() {\n                    return x;\n                  },\n                  enumerable: true\n                },\n                y: {\n                  get: function() {\n                    return y;\n                  },\n                  enumerable: true\n                },\n                mods: {\n                  get: function() {\n                    return mods;\n                  },\n                  enumerable: true\n                }\n              });\n\n              return result;\n            }\n          },\n          { \"mouse-event\": 21 }\n        ],\n        20: [\n          function(require, module, exports) {\n            var rootPosition = { left: 0, top: 0 };\n\n            module.exports = mouseEventOffset;\n            function mouseEventOffset(ev, target, out) {\n              target = target || ev.currentTarget || ev.srcElement;\n              if (!Array.isArray(out)) {\n                out = [0, 0];\n              }\n              var cx = ev.clientX || 0;\n              var cy = ev.clientY || 0;\n              var rect = getBoundingClientOffset(target);\n              out[0] = cx - rect.left;\n              out[1] = cy - rect.top;\n              return out;\n            }\n\n            function getBoundingClientOffset(element) {\n              if (\n                element === window ||\n                element === document ||\n                element === document.body\n              ) {\n                return rootPosition;\n              } else {\n                return element.getBoundingClientRect();\n              }\n            }\n          },\n          {}\n        ],\n        21: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            function mouseButtons(ev) {\n              if (typeof ev === 'object') {\n                if ('buttons' in ev) {\n                  return ev.buttons;\n                } else if ('which' in ev) {\n                  var b = ev.which;\n                  if (b === 2) {\n                    return 4;\n                  } else if (b === 3) {\n                    return 2;\n                  } else if (b > 0) {\n                    return 1 << (b - 1);\n                  }\n                } else if ('button' in ev) {\n                  var b = ev.button;\n                  if (b === 1) {\n                    return 4;\n                  } else if (b === 2) {\n                    return 2;\n                  } else if (b >= 0) {\n                    return 1 << b;\n                  }\n                }\n              }\n              return 0;\n            }\n            exports.buttons = mouseButtons;\n\n            function mouseElement(ev) {\n              return ev.target || ev.srcElement || window;\n            }\n            exports.element = mouseElement;\n\n            function mouseRelativeX(ev) {\n              if (typeof ev === 'object') {\n                if ('offsetX' in ev) {\n                  return ev.offsetX;\n                }\n                var target = mouseElement(ev);\n                var bounds = target.getBoundingClientRect();\n                return ev.clientX - bounds.left;\n              }\n              return 0;\n            }\n            exports.x = mouseRelativeX;\n\n            function mouseRelativeY(ev) {\n              if (typeof ev === 'object') {\n                if ('offsetY' in ev) {\n                  return ev.offsetY;\n                }\n                var target = mouseElement(ev);\n                var bounds = target.getBoundingClientRect();\n                return ev.clientY - bounds.top;\n              }\n              return 0;\n            }\n            exports.y = mouseRelativeY;\n          },\n          {}\n        ],\n        22: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            const vec3TransformMat4 = require('gl-vec3/transformMat4');\n            const interactionEvents = require('./normalized-interaction-events');\n\n            module.exports = attachCameraControls;\n\n            const RADIANS_PER_HALF_SCREEN_WIDTH = Math.PI * 0.75;\n\n            function attachCameraControls(camera, opts) {\n              opts = opts || {};\n              var element = camera.element;\n              var zoomSpeed =\n                (opts.zoomSpeed === undefined ? 1 : opts.zoomSpeed) * 0.5;\n              var zoom = opts.zoom === undefined ? true : opts.zoom;\n              var touchZoom =\n                opts.touchZoom !== undefined\n                  ? !!opts.touchZoom\n                  : opts.zoom !== undefined\n                  ? !!opts.zoom\n                  : true;\n\n              var onStart = null;\n              var onEnd = null;\n              var onMove = null;\n\n              var singletonEventData = {\n                defaultPrevented: false\n              };\n\n              function localPreventDefault() {\n                singletonEventData.defaultPrevented = true;\n              }\n\n              function resetLocalPreventDefault() {\n                singletonEventData.defaultPrevented = false;\n              }\n\n              function providePreventDefault(ev) {\n                ev.defaultPrevented = singletonEventData.defaultPrevented;\n                ev.preventDefault = function() {\n                  ev.defaultPrevented = true;\n                  localPreventDefault();\n                };\n                return ev;\n              }\n              var v = [0, 0, 0];\n              var xy = [0, 0];\n              function transformXY(ev) {\n                v[0] = ev.x;\n                v[1] = ev.y;\n                v[2] = 0;\n                if (opts.invViewportShift) {\n                  vec3TransformMat4(v, v, opts.invViewportShift);\n                }\n                xy[0] = v[0];\n                xy[1] = v[1];\n                return xy;\n              }\n\n              interactionEvents(element)\n                .on('wheel', function(ev) {\n                  if (!zoom) return;\n                  ev.originalEvent.preventDefault();\n\n                  camera.zoom(ev.x0, ev.y0, Math.exp(-ev.dy * zoomSpeed) - 1.0);\n                })\n                .on('mousedown', function(ev) {\n                  resetLocalPreventDefault();\n\n                  ev = providePreventDefault(ev);\n                  onStart && onStart(ev);\n\n                  ev.originalEvent.preventDefault();\n                })\n                .on('mousemove', function(ev) {\n                  ev = providePreventDefault(ev);\n                  onMove && onMove(ev);\n\n                  if (ev.defaultPrevented) return;\n\n                  if (!ev.active || ev.buttons !== 1) return;\n\n                  if (ev.mods.alt) {\n                    if (!zoom) return;\n                    camera.zoom(\n                      ev.x0,\n                      ev.y0,\n                      Math.exp(ev.dy * zoomSpeed) - 1.0\n                    );\n                    ev.originalEvent.preventDefault();\n                  } else if (ev.mods.shift) {\n                    camera.pan(ev.dx, ev.dy);\n                    ev.originalEvent.preventDefault();\n                  } else if (ev.mods.meta) {\n                    camera.pivot(ev.dx, ev.dy);\n                    ev.originalEvent.preventDefault();\n                  } else {\n                    camera.rotate(\n                      -ev.dx * RADIANS_PER_HALF_SCREEN_WIDTH,\n                      -ev.dy * RADIANS_PER_HALF_SCREEN_WIDTH\n                    );\n                    ev.originalEvent.preventDefault();\n                  }\n                })\n                .on('mouseup', function(ev) {\n                  resetLocalPreventDefault();\n                  ev = providePreventDefault(ev);\n                  onEnd && onEnd(ev);\n                })\n                .on('touchstart', function(ev) {\n                  ev.originalEvent.preventDefault();\n\n                  ev = providePreventDefault(ev);\n                  onStart && onStart(ev);\n                })\n                .on('touchmove', function(ev) {\n                  ev = providePreventDefault(ev);\n                  onMove && onMove(ev);\n\n                  if (ev.defaultPrevented) return;\n\n                  if (!ev.active) return;\n                  camera.rotate(\n                    -ev.dx * RADIANS_PER_HALF_SCREEN_WIDTH,\n                    -ev.dy * RADIANS_PER_HALF_SCREEN_WIDTH\n                  );\n                  ev.originalEvent.preventDefault();\n                })\n                .on('touchend', function(ev) {\n                  resetLocalPreventDefault();\n                  ev = providePreventDefault(ev);\n                  onEnd && onEnd(ev);\n                })\n                .on('pinchmove', function(ev) {\n                  if (!ev.active) return;\n                  transformXY(ev);\n                  if (touchZoom) camera.zoom(xy[0], xy[1], 1 - ev.zoomx);\n                  camera.pan(ev.dx, ev.dy);\n\n                  ev.originalEvent.preventDefault();\n                })\n                .on('pinchstart', function(ev) {\n                  ev.originalEvent.preventDefault();\n                });\n\n              onStart = opts.onStart;\n              onMove = opts.onMove;\n              onEnd = opts.onEnd;\n\n              return {\n                setInteractions: function(interactions) {\n                  onStart = interactions.onStart;\n                  onEnd = interactions.onEnd;\n                  onMove = interactions.onMove;\n                }\n              };\n            }\n          },\n          { \"./normalized-interaction-events\": 23, \"gl-vec3/transformMat4\": 18 }\n        ],\n        23: [\n          function(require, module, exports) {\n            \"use strict\";\n\n            module.exports = normalizedInteractionEvents;\n\n            var mouseChange = require('mouse-change');\n            var eventOffset = require('mouse-event-offset');\n            var eventEmitter = require('event-emitter');\n\n            function normalizedInteractionEvents(element) {\n              element = element || window;\n\n              var emitter = eventEmitter();\n              var previousPosition = [null, null];\n              var previousFingerPosition = [null, null];\n              var currentPosition = [null, null];\n              var fingers = [null, null];\n              var activeTouchCount = 0;\n              var ev = {};\n\n              var width, height;\n\n              var getSize =\n                element === window\n                  ? function() {\n                      width = window.innerWidth;\n                      height = window.innerHeight;\n                    }\n                  : function() {\n                      width = element.clientWidth;\n                      height = element.clientHeight;\n                    };\n\n              var buttons = 0;\n              var mouseX;\n              var mouseY;\n              var mods = {};\n              var changeListener = mouseChange(element, function(\n                pbuttons,\n                px,\n                py,\n                pmods\n              ) {\n                mouseX = px;\n                mouseY = py;\n                buttons = pbuttons;\n                mods = pmods;\n              });\n\n              function onWheel(event) {\n                eventOffset(event, element, currentPosition);\n                getSize();\n\n                ev.buttons = buttons;\n                ev.mods = mods;\n                ev.x0 = ev.x = ev.x1 = (2 * currentPosition[0]) / width - 1;\n                ev.y0 = ev.y = ev.y1 = 1 - (2 * currentPosition[1]) / height;\n                ev.x2 = null;\n                ev.y2 = null;\n                ev.dx = (2 * event.deltaX) / width;\n                ev.dy = (-2 * event.deltaY) / height;\n                ev.dz = (2 * event.deltaZ) / width;\n                ev.active = 1;\n                ev.zoomx = 1;\n                ev.zoomy = 1;\n                ev.theta = 0;\n                ev.dtheta = 0;\n                ev.originalEvent = event;\n\n                emitter.emit('wheel', ev);\n\n                previousPosition[0] = currentPosition[0];\n                previousPosition[1] = currentPosition[1];\n              }\n\n              var x0 = null;\n              var y0 = null;\n              var active = 0;\n\n              function onMouseUp(event) {\n                eventOffset(event, element, currentPosition);\n                active = 0;\n                getSize();\n\n                ev.buttons = buttons;\n                ev.mods = mods;\n                ev.x = ev.x1 = (2 * currentPosition[0]) / width - 1;\n                ev.y = ev.y1 = 1 - (2 * currentPosition[1]) / height;\n                ev.x2 = null;\n                ev.y2 = null;\n                ev.active = active;\n                ev.x0 = (2 * x0) / width - 1;\n                ev.y0 = 1 - (2 * y0) / height;\n                ev.dx = 0;\n                ev.dy = 0;\n                ev.dz = 0;\n                ev.zoomx = 1;\n                ev.zoomy = 1;\n                ev.theta = 0;\n                ev.dtheta = 0;\n                ev.originalEvent = event;\n\n                emitter.emit('mouseup', ev);\n\n                x0 = y0 = null;\n\n                previousPosition[0] = currentPosition[0];\n                previousPosition[1] = currentPosition[1];\n              }\n\n              function onMouseDown(event) {\n                eventOffset(event, element, currentPosition);\n                active = 1;\n                getSize();\n\n                x0 = mouseX;\n                y0 = mouseY;\n\n                ev.buttons = buttons;\n                ev.mods = mods;\n                ev.x = ev.x0 = ev.x1 = (2 * currentPosition[0]) / width - 1;\n                ev.y = ev.y0 = ev.y1 = 1 - (2 * currentPosition[1]) / height;\n                ev.x2 = null;\n                ev.y2 = null;\n                ev.active = active;\n                ev.dx = 0;\n                ev.dy = 0;\n                ev.dz = 0;\n                ev.zoomx = 1;\n                ev.zoomy = 1;\n                ev.theta = 0;\n                ev.dtheta = 0;\n                ev.originalEvent = event;\n\n                emitter.emit('mousedown', ev);\n\n                previousPosition[0] = currentPosition[0];\n                previousPosition[1] = currentPosition[1];\n              }\n\n              function onMouseMove(event) {\n                eventOffset(event, element, currentPosition);\n                getSize();\n\n                ev.buttons = buttons;\n                ev.mods = mods;\n                ev.x0 = (2 * x0) / width - 1;\n                ev.y0 = 1 - (2 * y0) / height;\n                ev.x = ev.x1 = (2 * currentPosition[0]) / width - 1;\n                ev.y = ev.y1 = 1 - (2 * currentPosition[1]) / height;\n                ev.x2 = null;\n                ev.y2 = null;\n                ev.dx =\n                  (2 * (currentPosition[0] - previousPosition[0])) / width;\n                ev.dy =\n                  (-2 * (currentPosition[1] - previousPosition[1])) / height;\n                ev.active = active;\n                ev.dz = 0;\n                ev.zoomx = 1;\n                ev.zoomy = 1;\n                ev.theta = 0;\n                ev.dtheta = 0;\n                ev.originalEvent = event;\n\n                emitter.emit('mousemove', ev);\n\n                previousPosition[0] = currentPosition[0];\n                previousPosition[1] = currentPosition[1];\n              }\n\n              function indexOfTouch(touch) {\n                var id = touch.identifier;\n                for (var i = 0; i < fingers.length; i++) {\n                  if (\n                    fingers[i] &&\n                    fingers[i].touch &&\n                    fingers[i].touch.identifier === id\n                  ) {\n                    return i;\n                  }\n                }\n                return -1;\n              }\n\n              function onTouchStart(event) {\n                previousFingerPosition[0] = null;\n                previousFingerPosition[1] = null;\n\n                for (var i = 0; i < event.changedTouches.length; i++) {\n                  var newTouch = event.changedTouches[i];\n                  var id = newTouch.identifier;\n                  var idx = indexOfTouch(id);\n\n                  if (idx === -1 && activeTouchCount < 2) {\n                    var first = activeTouchCount === 0;\n\n                    // newest and previous finger (previous may be undefined)\n                    var newIndex = fingers[0] ? 1 : 0;\n                    var oldIndex = fingers[0] ? 0 : 1;\n                    var newFinger = {\n                      position: [0, 0],\n                      touch: null\n                    };\n\n                    // add to stack\n                    fingers[newIndex] = newFinger;\n                    activeTouchCount++;\n\n                    // update touch event & position\n                    newFinger.touch = newTouch;\n                    eventOffset(newTouch, element, newFinger.position);\n\n                    var oldTouch = fingers[oldIndex]\n                      ? fingers[oldIndex].touch\n                      : undefined;\n                  }\n                }\n\n                var xavg = 0;\n                var yavg = 0;\n                var fingerCount = 0;\n                for (var i = 0; i < fingers.length; i++) {\n                  if (!fingers[i]) continue;\n                  xavg += fingers[i].position[0];\n                  yavg += fingers[i].position[1];\n                  fingerCount++;\n                }\n                xavg /= fingerCount;\n                yavg /= fingerCount;\n\n                if (activeTouchCount > 0) {\n                  ev.theta = 0;\n\n                  if (fingerCount > 1) {\n                    var dx = fingers[1].position[0] - fingers[0].position[0];\n                    var dy =\n                      ((fingers[0].position[1] - fingers[1].position[1]) *\n                        width) /\n                      height;\n                    ev.theta = Math.atan2(dy, dx);\n                  }\n\n                  getSize();\n                  ev.buttons = 0;\n                  ev.mods = {};\n                  ev.active = activeTouchCount;\n                  x0 = xavg;\n                  y0 = yavg;\n                  ev.x0 = (2 * x0) / width - 1;\n                  ev.y0 = 1 - (2 * y0) / height;\n                  ev.x = (2 * xavg) / width - 1;\n                  ev.y = 1 - (2 * yavg) / height;\n                  ev.x1 = (2 * fingers[0].position[0]) / width - 1;\n                  ev.y1 = 1 - (2 * fingers[0].position[1]) / height;\n                  if (activeTouchCount > 1) {\n                    ev.x2 = (2 * fingers[1].position[0]) / width - 1;\n                    ev.y2 = 1 - (2 * fingers[1].position[1]) / height;\n                  }\n                  ev.active = activeTouchCount;\n                  ev.dx = 0;\n                  ev.dy = 0;\n                  ev.dz = 0;\n                  ev.zoomx = 1;\n                  ev.zoomy = 1;\n                  ev.dtheta = 0;\n                  ev.originalEvent = event;\n                  emitter.emit(\n                    activeTouchCount === 1 ? 'touchstart' : 'pinchstart',\n                    ev\n                  );\n                }\n              }\n\n              function onTouchMove(event) {\n                var idx;\n                var changed = false;\n                for (var i = 0; i < event.changedTouches.length; i++) {\n                  var movedTouch = event.changedTouches[i];\n                  idx = indexOfTouch(movedTouch);\n\n                  if (idx !== -1) {\n                    changed = true;\n                    fingers[idx].touch = movedTouch; // avoid caching touches\n                    eventOffset(movedTouch, element, fingers[idx].position);\n                  }\n                }\n\n                if (changed) {\n                  if (activeTouchCount === 1) {\n                    for (idx = 0; idx < fingers.length; idx++) {\n                      if (fingers[idx]) break;\n                    }\n\n                    if (fingers[idx] && previousFingerPosition[idx]) {\n                      var x = fingers[idx].position[0];\n                      var y = fingers[idx].position[1];\n\n                      var dx = x - previousFingerPosition[idx][0];\n                      var dy = y - previousFingerPosition[idx][1];\n\n                      ev.buttons = 0;\n                      ev.mods = {};\n                      ev.active = activeTouchCount;\n                      ev.x = ev.x1 = (2 * x) / width - 1;\n                      ev.y = ev.y1 = 1 - (2 * y) / height;\n                      ev.x2 = null;\n                      ev.y2 = null;\n                      ev.x0 = (2 * x0) / width - 1;\n                      ev.y0 = 1 - (2 * y0) / height;\n                      ev.dx = (2 * dx) / width;\n                      ev.dy = (-2 * dy) / height;\n                      ev.dz = 0;\n                      ev.zoomx = 1;\n                      ev.zoomy = 1;\n                      ev.theta = 0;\n                      ev.dtheta = 0;\n                      ev.originalEvent = event;\n\n                      emitter.emit('touchmove', ev);\n                    }\n                  } else if (activeTouchCount === 2) {\n                    if (\n                      previousFingerPosition[0] &&\n                      previousFingerPosition[1]\n                    ) {\n                      // Previous two-finger vector:\n                      var pos0A = previousFingerPosition[0];\n                      var pos0B = previousFingerPosition[1];\n                      var dx0 = pos0B[0] - pos0A[0];\n                      var dy0 = ((pos0B[1] - pos0A[1]) * width) / height;\n\n                      // Current two-finger vector:\n                      var pos1A = fingers[0].position;\n                      var pos1B = fingers[1].position;\n                      var dx1 = pos1B[0] - pos1A[0];\n                      var dy1 = ((pos1A[1] - pos1B[1]) * width) / height;\n\n                      // r, theta for the previous two-finger touch:\n                      var r0 = Math.sqrt(dx0 * dx0 + dy0 * dy0) * 0.5;\n                      var theta0 = Math.atan2(dy0, dx0);\n\n                      // r, theta for the current two-finger touch:\n                      var r1 = Math.sqrt(dx1 * dx1 + dy1 * dy1) * 0.5;\n                      var theta1 = Math.atan2(dy1, dx1);\n\n                      var xavg = (pos0B[0] + pos0A[0]) * 0.5;\n                      var yavg = (pos0B[1] + pos0A[1]) * 0.5;\n                      var dx =\n                        0.5 * (pos1B[0] + pos1A[0] - pos0A[0] - pos0B[0]);\n                      var dy =\n                        0.5 * (pos1B[1] + pos1A[1] - pos0A[1] - pos0B[1]);\n\n                      var dr = r1 / r0;\n                      var dtheta = theta1 - theta0;\n\n                      ev.buttons = 0;\n                      ev.mods = mods;\n                      ev.active = activeTouchCount;\n                      ev.x = (2 * xavg) / width - 1;\n                      ev.y = 1 - (2 * yavg) / height;\n                      ev.x0 = (2 * x0) / width - 1;\n                      ev.y0 = 1 - (2 * y0) / height;\n                      ev.x1 = (2 * pos1A[0]) / width - 1;\n                      ev.y1 = 1 - (2 * pos1A[1]) / height;\n                      ev.x2 = (2 * pos1B[0]) / width - 1;\n                      ev.y2 = 1 - (2 * pos1B[1]) / height;\n                      ev.dx = (2 * dx) / width;\n                      ev.dy = (-2 * dy) / height;\n                      ev.dz = 0;\n                      ev.zoomx = dr;\n                      ev.zoomy = dr;\n                      ev.theta = theta1;\n                      ev.dtheta = dtheta;\n                      ev.originalEvent = event;\n\n                      emitter.emit('pinchmove', ev);\n                    }\n                  }\n                }\n\n                if (fingers[0]) {\n                  previousFingerPosition[0] = fingers[0].position.slice();\n                }\n\n                if (fingers[1]) {\n                  previousFingerPosition[1] = fingers[1].position.slice();\n                }\n              }\n\n              function onTouchRemoved(event) {\n                var lastFinger;\n                for (var i = 0; i < event.changedTouches.length; i++) {\n                  var removed = event.changedTouches[i];\n                  var idx = indexOfTouch(removed);\n\n                  if (idx !== -1) {\n                    lastFinger = fingers[idx];\n                    fingers[idx] = null;\n                    activeTouchCount--;\n                    var otherIdx = idx === 0 ? 1 : 0;\n                    var otherTouch = fingers[otherIdx]\n                      ? fingers[otherIdx].touch\n                      : undefined;\n                  }\n                }\n\n                var xavg = 0;\n                var yavg = 0;\n                if (activeTouchCount === 0) {\n                  if (lastFinger) {\n                    xavg = lastFinger.position[0];\n                    yavg = lastFinger.position[1];\n                  }\n                } else {\n                  var fingerCount = 0;\n                  for (var i = 0; i < fingers.length; i++) {\n                    if (!fingers[i]) continue;\n                    xavg += fingers[i].position[0];\n                    yavg += fingers[i].position[1];\n                    fingerCount++;\n                  }\n                  xavg /= fingerCount;\n                  yavg /= fingerCount;\n                }\n\n                if (activeTouchCount < 2) {\n                  ev.buttons = 0;\n                  ev.mods = mods;\n                  ev.active = activeTouchCount;\n                  ev.x = (2 * xavg) / width - 1;\n                  ev.y = 1 - (2 * yavg) / height;\n                  ev.x0 = (2 * x0) / width - 1;\n                  ev.y0 = 1 - (2 * y0) / height;\n                  ev.dx = 0;\n                  ev.dy = 0;\n                  ev.dz = 0;\n                  ev.zoomx = 1;\n                  ev.zoomy = 1;\n                  ev.theta = 0;\n                  ev.dtheta = 0;\n                  ev.originalEvent = event;\n                  emitter.emit(\n                    activeTouchCount === 0 ? 'touchend' : 'pinchend',\n                    ev\n                  );\n                }\n                if (activeTouchCount === 0) {\n                  x0 = y0 = null;\n                }\n              }\n\n              var enabled = false;\n              function enable() {\n                if (enabled) return;\n                enabled = true;\n                changeListener.enabled = true;\n                element.addEventListener('wheel', onWheel, false);\n                element.addEventListener('mousedown', onMouseDown, false);\n                window.addEventListener('mousemove', onMouseMove, false);\n                window.addEventListener('mouseup', onMouseUp, false);\n\n                element.addEventListener('touchstart', onTouchStart, false);\n                window.addEventListener('touchmove', onTouchMove, false);\n                window.addEventListener('touchend', onTouchRemoved, false);\n                window.addEventListener('touchcancel', onTouchRemoved, false);\n              }\n\n              function disable() {\n                if (!enabled) return;\n                enabled = false;\n                changeListener.enabled = false;\n                element.removeEventListener('wheel', onWheel, false);\n                element.removeEventListener('mousedown', onMouseDown, false);\n                window.removeEventListener('mousemove', onMouseMove, false);\n                window.removeEventListener('mouseup', onMouseUp, false);\n\n                element.removeEventListener('touchstart', onTouchStart, false);\n                window.removeEventListener('touchmove', onTouchMove, false);\n                window.removeEventListener('touchend', onTouchRemoved, false);\n                window.removeEventListener(\n                  'touchcancel',\n                  onTouchRemoved,\n                  false\n                );\n              }\n\n              enable();\n\n              emitter.enable = enable;\n              emitter.disable = disable;\n\n              return emitter;\n            }\n          },\n          { \"event-emitter\": 17, \"mouse-change\": 19, \"mouse-event-offset\": 20 }\n        ]\n      },\n      {},\n      [22]\n    )(22);\n  });\n  return module.exports;\n}\n);\n  return main;\n}\n","// https://observablehq.com/@rreusser/gl-mat4@128\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# gl-mat4`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`This notebook re-exports functions from [stackgl/gl-mat4](https://github.com/stackgl/gl-mat4). The license may be found [here](https://github.com/stackgl/gl-mat4/blob/master/LICENSE.md).\n\nAdditionally, it adds a function called \\`mat4fromMat3\\` to expand a 2d homogeneous transformation matrix to a 3d homogeneous transformation matrix.`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution.`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {mat4} from '@rreusser/gl-mat4'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g.`\n)});\n  main.variable(observer(\"a\")).define(\"a\", [\"mat4\"], function(mat4){return(\nmat4.create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {mat4create} from '@rreusser/gl-mat4'\n\\`\\`\\`\n`\n)});\n  main.variable(observer(\"b\")).define(\"b\", [\"mat4create\"], function(mat4create){return(\nmat4create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Implementation`\n)});\n  main.variable(observer(\"mat4\")).define(\"mat4\", [\"mat4create\",\"mat4clone\",\"mat4copy\",\"mat4identity\",\"mat4transpose\",\"mat4invert\",\"mat4adjoint\",\"mat4determinant\",\"mat4multiply\",\"mat4translate\",\"mat4scale\",\"mat4rotate\",\"mat4rotateX\",\"mat4rotateY\",\"mat4rotateZ\",\"mat4fromMat3\",\"mat4fromRotation\",\"mat4fromRotationTranslation\",\"mat4fromScaling\",\"mat4fromTranslation\",\"mat4fromXRotation\",\"mat4fromYRotation\",\"mat4fromZRotation\",\"mat4fromQuat\",\"mat4frustum\",\"mat4perspective\",\"mat4perspectiveFromFieldOfView\",\"mat4ortho\",\"mat4lookAt\",\"mat4str\"], function(mat4create,mat4clone,mat4copy,mat4identity,mat4transpose,mat4invert,mat4adjoint,mat4determinant,mat4multiply,mat4translate,mat4scale,mat4rotate,mat4rotateX,mat4rotateY,mat4rotateZ,mat4fromMat3,mat4fromRotation,mat4fromRotationTranslation,mat4fromScaling,mat4fromTranslation,mat4fromXRotation,mat4fromYRotation,mat4fromZRotation,mat4fromQuat,mat4frustum,mat4perspective,mat4perspectiveFromFieldOfView,mat4ortho,mat4lookAt,mat4str){return(\n{\n  create: mat4create,\n  clone: mat4clone,\n  copy: mat4copy,\n  identity: mat4identity,\n  transpose: mat4transpose,\n  invert: mat4invert,\n  adjoint: mat4adjoint,\n  determinant: mat4determinant,\n  multiply: mat4multiply,\n  translate: mat4translate,\n  scale: mat4scale,\n  rotate: mat4rotate,\n  rotateX: mat4rotateX,\n  rotateY: mat4rotateY,\n  rotateZ: mat4rotateZ,\n  fromMat3: mat4fromMat3,\n  fromRotation: mat4fromRotation,\n  fromRotationTranslation: mat4fromRotationTranslation,\n  fromScaling: mat4fromScaling,\n  fromTranslation: mat4fromTranslation,\n  fromXRotation: mat4fromXRotation,\n  fromYRotation: mat4fromYRotation,\n  fromZRotation: mat4fromZRotation,\n  fromQuat: mat4fromQuat,\n  frustum: mat4frustum,\n  perspective: mat4perspective,\n  perspectiveFromFieldOfView: mat4perspectiveFromFieldOfView,\n  ortho: mat4ortho,\n  lookAt: mat4lookAt,\n  str: mat4str,\n}\n)});\n  main.variable(observer(\"mat4adjoint\")).define(\"mat4adjoint\", function(){return(\nfunction mat4adjoint(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n}\n)});\n  main.variable(observer(\"mat4clone\")).define(\"mat4clone\", function(){return(\nfunction mat4clone(a) {\n    var out = new Float32Array(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n)});\n  main.variable(observer(\"mat4copy\")).define(\"mat4copy\", function(){return(\nfunction mat4copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n)});\n  main.variable(observer(\"mat4create\")).define(\"mat4create\", function(){return(\nfunction mat4create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4determinant\")).define(\"mat4determinant\", function(){return(\nfunction mat4determinant(a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n)});\n  main.variable(observer(\"mat4fromQuat\")).define(\"mat4fromQuat\", function(){return(\nfunction mat4fromQuat(out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n}\n)});\n  main.variable(observer(\"mat4fromRotation\")).define(\"mat4fromRotation\", function(){return(\nfunction mat4fromRotation(out, rad, axis) {\n  var s, c, t\n  var x = axis[0]\n  var y = axis[1]\n  var z = axis[2]\n  var len = Math.sqrt(x * x + y * y + z * z)\n\n  if (Math.abs(len) < 0.000001) {\n    return null\n  }\n\n  len = 1 / len\n  x *= len\n  y *= len\n  z *= len\n\n  s = Math.sin(rad)\n  c = Math.cos(rad)\n  t = 1 - c\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c\n  out[1] = y * x * t + z * s\n  out[2] = z * x * t - y * s\n  out[3] = 0\n  out[4] = x * y * t - z * s\n  out[5] = y * y * t + c\n  out[6] = z * y * t + x * s\n  out[7] = 0\n  out[8] = x * z * t + y * s\n  out[9] = y * z * t - x * s\n  out[10] = z * z * t + c\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n)});\n  main.variable(observer(\"mat4fromMat3\")).define(\"mat4fromMat3\", function(){return(\nfunction mat4fromMat3 (out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = 0\n  out[3] = a[2]\n  \n  out[4] = a[3]\n  out[5] = a[4]\n  out[6] = 0\n  out[7] = a[5]\n  \n  out[8] = 0\n  out[9] = 0\n  out[10] = 1\n  out[11] = 0\n  \n  out[12] = a[6]\n  out[13] = a[7]\n  out[14] = 0\n  out[15] = a[8]\n}\n)});\n  main.variable(observer(\"mat4fromRotationTranslation\")).define(\"mat4fromRotationTranslation\", function(){return(\nfunction mat4fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    \n    return out;\n}\n)});\n  main.variable(observer(\"mat4fromScaling\")).define(\"mat4fromScaling\", function(){return(\nfunction mat4fromScaling(out, v) {\n  out[0] = v[0]\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = v[1]\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = v[2]\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n)});\n  main.variable(observer(\"mat4fromTranslation\")).define(\"mat4fromTranslation\", function(){return(\nfunction mat4fromTranslation(out, v) {\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = 1\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = 1\n  out[11] = 0\n  out[12] = v[0]\n  out[13] = v[1]\n  out[14] = v[2]\n  out[15] = 1\n  return out\n}\n)});\n  main.variable(observer(\"mat4fromXRotation\")).define(\"mat4fromXRotation\", function(){return(\nfunction mat4fromXRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = 1\n    out[1] = 0\n    out[2] = 0\n    out[3] = 0\n    out[4] = 0\n    out[5] = c\n    out[6] = s\n    out[7] = 0\n    out[8] = 0\n    out[9] = -s\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n)});\n  main.variable(observer(\"mat4fromYRotation\")).define(\"mat4fromYRotation\", function(){return(\nfunction mat4fromYRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = 0\n    out[2] = -s\n    out[3] = 0\n    out[4] = 0\n    out[5] = 1\n    out[6] = 0\n    out[7] = 0\n    out[8] = s\n    out[9] = 0\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n)});\n  main.variable(observer(\"mat4fromZRotation\")).define(\"mat4fromZRotation\", function(){return(\nfunction mat4fromZRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = s\n    out[2] = 0\n    out[3] = 0\n    out[4] = -s\n    out[5] = c\n    out[6] = 0\n    out[7] = 0\n    out[8] = 0\n    out[9] = 0\n    out[10] = 1\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}\n)});\n  main.variable(observer(\"mat4frustum\")).define(\"mat4frustum\", function(){return(\nfunction mat4frustum(out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4identity\")).define(\"mat4identity\", function(){return(\nfunction mat4identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4invert\")).define(\"mat4invert\", function(){return(\nfunction mat4invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n}\n)});\n  main.variable(observer(\"mat4lookAt\")).define(\"mat4lookAt\", [\"mat4identity\"], function(mat4identity){return(\nfunction mat4lookAt(out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < 0.000001 &&\n        Math.abs(eyey - centery) < 0.000001 &&\n        Math.abs(eyez - centerz) < 0.000001) {\n        return mat4identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n}\n)});\n  main.variable(observer(\"mat4multiply\")).define(\"mat4multiply\", function(){return(\nfunction mat4multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4ortho\")).define(\"mat4ortho\", function(){return(\nfunction mat4ortho(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4perspective\")).define(\"mat4perspective\", function(){return(\nfunction mat4perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4perspectiveFromFieldOfView\")).define(\"mat4perspectiveFromFieldOfView\", function(){return(\nfunction mat4perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI/180.0),\n        downTan = Math.tan(fov.downDegrees * Math.PI/180.0),\n        leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0),\n        rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = ((upTan - downTan) * yScale * 0.5);\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4rotate\")).define(\"mat4rotate\", function(){return(\nfunction mat4rotate(out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < 0.000001) { return null; }\n    \n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n)});\n  main.variable(observer(\"mat4rotateX\")).define(\"mat4rotateX\", function(){return(\nfunction mat4rotateX(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4rotateY\")).define(\"mat4rotateY\", function(){return(\nfunction mat4rotateY(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4rotateZ\")).define(\"mat4rotateZ\", function(){return(\nfunction mat4rotateZ(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\n)});\n  main.variable(observer(\"mat4scale\")).define(\"mat4scale\", function(){return(\nfunction mat4scale(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n)});\n  main.variable(observer(\"mat4str\")).define(\"mat4str\", function(){return(\nfunction mat4str(a) {\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n                    a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n                    a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + \n                    a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n)});\n  main.variable(observer(\"mat4translate\")).define(\"mat4translate\", function(){return(\nfunction mat4translate(out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n}\n)});\n  main.variable(observer(\"mat4transpose\")).define(\"mat4transpose\", function(){return(\nfunction mat4transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n}\n)});\n  return main;\n}\n","// https://observablehq.com/@rreusser/gl-mat3@98\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# gl-mat3`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`This notebook re-exports functions from [stackgl/gl-mat3](https://github.com/stackgl/gl-mat3). The license may be found [here](https://github.com/stackgl/gl-mat3/blob/master/LICENSE.md).`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution.`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {mat3} from '@rreusser/gl-mat3'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g.`\n)});\n  main.variable(observer(\"a\")).define(\"a\", [\"mat3\"], function(mat3){return(\nmat3.create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {mat3create} from '@rreusser/gl-mat3'\n\\`\\`\\`\n`\n)});\n  main.variable(observer(\"b\")).define(\"b\", [\"mat3create\"], function(mat3create){return(\nmat3create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Implementation`\n)});\n  main.variable(observer(\"mat3\")).define(\"mat3\", [\"mat3adjoint\",\"mat3clone\",\"mat3copy\",\"mat3create\",\"mat3determinant\",\"mat3frob\",\"mat3fromMat2d\",\"mat3fromMat4\",\"mat3fromQuat\",\"mat3identity\",\"mat3invert\",\"mat3multiply\",\"mat3normalFromMat4\",\"mat3rotate\",\"mat3scale\",\"mat3str\",\"mat3translate\",\"mat3transpose\"], function(mat3adjoint,mat3clone,mat3copy,mat3create,mat3determinant,mat3frob,mat3fromMat2d,mat3fromMat4,mat3fromQuat,mat3identity,mat3invert,mat3multiply,mat3normalFromMat4,mat3rotate,mat3scale,mat3str,mat3translate,mat3transpose){return(\n{\n  adjoint: mat3adjoint,\n  clone: mat3clone,\n  copy: mat3copy,\n  create: mat3create,\n  determinant: mat3determinant,\n  frob: mat3frob,\n  fromMat2d: mat3fromMat2d,\n  fromMat4: mat3fromMat4,\n  fromQuat: mat3fromQuat,\n  identity: mat3identity,\n  invert: mat3invert,\n  multiply: mat3multiply,\n  normalFromMat4: mat3normalFromMat4,\n  rotate: mat3rotate,\n  scale: mat3scale,\n  str: mat3str,\n  translate: mat3translate,\n  transpose: mat3transpose,\n}\n)});\n  main.variable(observer(\"mat3adjoint\")).define(\"mat3adjoint\", function(){return(\nfunction mat3adjoint(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  out[0] = (a11 * a22 - a12 * a21)\n  out[1] = (a02 * a21 - a01 * a22)\n  out[2] = (a01 * a12 - a02 * a11)\n  out[3] = (a12 * a20 - a10 * a22)\n  out[4] = (a00 * a22 - a02 * a20)\n  out[5] = (a02 * a10 - a00 * a12)\n  out[6] = (a10 * a21 - a11 * a20)\n  out[7] = (a01 * a20 - a00 * a21)\n  out[8] = (a00 * a11 - a01 * a10)\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3clone\")).define(\"mat3clone\", function(){return(\nfunction mat3clone(a) {\n  var out = new Float32Array(9)\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  out[4] = a[4]\n  out[5] = a[5]\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n  return out\n}\n)});\n  main.variable(observer(\"mat3copy\")).define(\"mat3copy\", function(){return(\nfunction mat3copy(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[3]\n  out[4] = a[4]\n  out[5] = a[5]\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n  return out\n}\n)});\n  main.variable(observer(\"mat3create\")).define(\"mat3create\", function(){return(\nfunction mat3create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n)});\n  main.variable(observer(\"mat3determinant\")).define(\"mat3determinant\", function(){return(\nfunction mat3determinant(a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  return a00 * (a22 * a11 - a12 * a21)\n       + a01 * (a12 * a20 - a22 * a10)\n       + a02 * (a21 * a10 - a11 * a20)\n}\n)});\n  main.variable(observer(\"mat3frob\")).define(\"mat3frob\", function(){return(\nfunction mat3frob(a) {\n  return Math.sqrt(\n      a[0]*a[0]\n    + a[1]*a[1]\n    + a[2]*a[2]\n    + a[3]*a[3]\n    + a[4]*a[4]\n    + a[5]*a[5]\n    + a[6]*a[6]\n    + a[7]*a[7]\n    + a[8]*a[8]\n  )\n}\n)});\n  main.variable(observer(\"mat3fromMat2d\")).define(\"mat3fromMat2d\", function(){return(\nfunction mat3fromMat2d(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = 0\n\n  out[3] = a[2]\n  out[4] = a[3]\n  out[5] = 0\n\n  out[6] = a[4]\n  out[7] = a[5]\n  out[8] = 1\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3fromMat4\")).define(\"mat3fromMat4\", function(){return(\nfunction mat3fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n)});\n  main.variable(observer(\"mat3fromQuat\")).define(\"mat3fromQuat\", function(){return(\nfunction mat3fromQuat(out, q) {\n  var x = q[0]\n  var y = q[1]\n  var z = q[2]\n  var w = q[3]\n\n  var x2 = x + x\n  var y2 = y + y\n  var z2 = z + z\n\n  var xx = x * x2\n  var yx = y * x2\n  var yy = y * y2\n  var zx = z * x2\n  var zy = z * y2\n  var zz = z * z2\n  var wx = w * x2\n  var wy = w * y2\n  var wz = w * z2\n\n  out[0] = 1 - yy - zz\n  out[3] = yx - wz\n  out[6] = zx + wy\n\n  out[1] = yx + wz\n  out[4] = 1 - xx - zz\n  out[7] = zy - wx\n\n  out[2] = zx - wy\n  out[5] = zy + wx\n  out[8] = 1 - xx - yy\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3identity\")).define(\"mat3identity\", function(){return(\nfunction mat3identity(out) {\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n)});\n  main.variable(observer(\"mat3invert\")).define(\"mat3invert\", function(){return(\nfunction mat3invert(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var b01 = a22 * a11 - a12 * a21\n  var b11 = -a22 * a10 + a12 * a20\n  var b21 = a21 * a10 - a11 * a20\n\n  // Calculate the determinant\n  var det = a00 * b01 + a01 * b11 + a02 * b21\n\n  if (!det) return null\n  det = 1.0 / det\n\n  out[0] = b01 * det\n  out[1] = (-a22 * a01 + a02 * a21) * det\n  out[2] = (a12 * a01 - a02 * a11) * det\n  out[3] = b11 * det\n  out[4] = (a22 * a00 - a02 * a20) * det\n  out[5] = (-a12 * a00 + a02 * a10) * det\n  out[6] = b21 * det\n  out[7] = (-a21 * a00 + a01 * a20) * det\n  out[8] = (a11 * a00 - a01 * a10) * det\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3multiply\")).define(\"mat3multiply\", function(){return(\nfunction mat3multiply(out, a, b) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var b00 = b[0], b01 = b[1], b02 = b[2]\n  var b10 = b[3], b11 = b[4], b12 = b[5]\n  var b20 = b[6], b21 = b[7], b22 = b[8]\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3normalFromMat4\")).define(\"mat3normalFromMat4\", function(){return(\nfunction mat3normalFromMat4(out, a) {\n  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3]\n  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7]\n  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11]\n  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15]\n\n  var b00 = a00 * a11 - a01 * a10\n  var b01 = a00 * a12 - a02 * a10\n  var b02 = a00 * a13 - a03 * a10\n  var b03 = a01 * a12 - a02 * a11\n  var b04 = a01 * a13 - a03 * a11\n  var b05 = a02 * a13 - a03 * a12\n  var b06 = a20 * a31 - a21 * a30\n  var b07 = a20 * a32 - a22 * a30\n  var b08 = a20 * a33 - a23 * a30\n  var b09 = a21 * a32 - a22 * a31\n  var b10 = a21 * a33 - a23 * a31\n  var b11 = a22 * a33 - a23 * a32\n\n  // Calculate the determinant\n  var det = b00 * b11\n          - b01 * b10\n          + b02 * b09\n          + b03 * b08\n          - b04 * b07\n          + b05 * b06\n\n  if (!det) return null\n  det = 1.0 / det\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3rotate\")).define(\"mat3rotate\", function(){return(\nfunction mat3rotate(out, a, rad) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n\n  var s = Math.sin(rad)\n  var c = Math.cos(rad)\n\n  out[0] = c * a00 + s * a10\n  out[1] = c * a01 + s * a11\n  out[2] = c * a02 + s * a12\n\n  out[3] = c * a10 - s * a00\n  out[4] = c * a11 - s * a01\n  out[5] = c * a12 - s * a02\n\n  out[6] = a20\n  out[7] = a21\n  out[8] = a22\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3scale\")).define(\"mat3scale\", function(){return(\nfunction mat3scale(out, a, v) {\n  var x = v[0]\n  var y = v[1]\n\n  out[0] = x * a[0]\n  out[1] = x * a[1]\n  out[2] = x * a[2]\n\n  out[3] = y * a[3]\n  out[4] = y * a[4]\n  out[5] = y * a[5]\n\n  out[6] = a[6]\n  out[7] = a[7]\n  out[8] = a[8]\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3str\")).define(\"mat3str\", function(){return(\nfunction mat3str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n                   a[3] + ', ' + a[4] + ', ' + a[5] + ', ' +\n                   a[6] + ', ' + a[7] + ', ' + a[8] + ')'\n}\n)});\n  main.variable(observer(\"mat3translate\")).define(\"mat3translate\", function(){return(\nfunction mat3translate(out, a, v) {\n  var a00 = a[0], a01 = a[1], a02 = a[2]\n  var a10 = a[3], a11 = a[4], a12 = a[5]\n  var a20 = a[6], a21 = a[7], a22 = a[8]\n  var x = v[0], y = v[1]\n\n  out[0] = a00\n  out[1] = a01\n  out[2] = a02\n\n  out[3] = a10\n  out[4] = a11\n  out[5] = a12\n\n  out[6] = x * a00 + y * a10 + a20\n  out[7] = x * a01 + y * a11 + a21\n  out[8] = x * a02 + y * a12 + a22\n\n  return out\n}\n)});\n  main.variable(observer(\"mat3transpose\")).define(\"mat3transpose\", function(){return(\nfunction mat3transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1], a02 = a[2], a12 = a[5]\n    out[1] = a[3]\n    out[2] = a[6]\n    out[3] = a01\n    out[5] = a[7]\n    out[6] = a02\n    out[7] = a12\n  } else {\n    out[0] = a[0]\n    out[1] = a[3]\n    out[2] = a[6]\n    out[3] = a[1]\n    out[4] = a[4]\n    out[5] = a[7]\n    out[6] = a[2]\n    out[7] = a[5]\n    out[8] = a[8]\n  }\n\n  return out\n}\n)});\n  return main;\n}\n","// https://observablehq.com/@rreusser/gl-vec2@205\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# gl-vec2`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`This notebook re-exports functions from [stackgl/gl-vec2](https://github.com/stackgl/gl-vec2). The license may be found [here](https://github.com/stackgl/gl-vec2/blob/master/LICENSE.md).`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution.`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {vec2} from '@rreusser/gl-vec2'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g.`\n)});\n  main.variable(observer(\"a\")).define(\"a\", [\"vec2\"], function(vec2){return(\nvec2.create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {vec2create} from '@rreusser/gl-vec2'\n\\`\\`\\`\n`\n)});\n  main.variable(observer(\"b\")).define(\"b\", [\"vec2create\"], function(vec2create){return(\nvec2create()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Implementation`\n)});\n  main.variable(observer(\"vec2\")).define(\"vec2\", [\"EPSILON\",\"vec2create\",\"vec2clone\",\"vec2fromValues\",\"vec2copy\",\"vec2set\",\"vec2equals\",\"vec2exactEquals\",\"vec2add\",\"vec2subtract\",\"vec2sub\",\"vec2multiply\",\"vec2mul\",\"vec2divide\",\"vec2div\",\"vec2inverse\",\"vec2min\",\"vec2max\",\"vec2rotate\",\"vec2floor\",\"vec2ceil\",\"vec2round\",\"vec2scale\",\"vec2scaleAndAdd\",\"vec2distance\",\"vec2dist\",\"vec2squaredDistance\",\"vec2sqrDist\",\"vec2length\",\"vec2len\",\"vec2squaredLength\",\"vec2sqrLen\",\"vec2negate\",\"vec2normalize\",\"vec2dot\",\"vec2cross\",\"vec2lerp\",\"vec2random\",\"vec2transformMat2\",\"vec2transformMat2d\",\"vec2transformMat3\",\"vec2transformMat4\",\"vec2forEach\",\"vec2limit\"], function(EPSILON,vec2create,vec2clone,vec2fromValues,vec2copy,vec2set,vec2equals,vec2exactEquals,vec2add,vec2subtract,vec2sub,vec2multiply,vec2mul,vec2divide,vec2div,vec2inverse,vec2min,vec2max,vec2rotate,vec2floor,vec2ceil,vec2round,vec2scale,vec2scaleAndAdd,vec2distance,vec2dist,vec2squaredDistance,vec2sqrDist,vec2length,vec2len,vec2squaredLength,vec2sqrLen,vec2negate,vec2normalize,vec2dot,vec2cross,vec2lerp,vec2random,vec2transformMat2,vec2transformMat2d,vec2transformMat3,vec2transformMat4,vec2forEach,vec2limit){return(\n{\n  EPSILON,\n  create: vec2create,\n  clone: vec2clone,\n  fromValues: vec2fromValues,\n  copy: vec2copy,\n  set: vec2set,\n  equals: vec2equals,\n  exactEquals: vec2exactEquals,\n  add: vec2add,\n  subtract: vec2subtract,\n  sub: vec2sub,\n  multiply: vec2multiply,\n  mul: vec2mul,\n  divide: vec2divide,\n  div: vec2div,\n  inverse: vec2inverse,\n  min: vec2min,\n  max: vec2max,\n  rotate: vec2rotate,\n  floor: vec2floor,\n  ceil: vec2ceil,\n  round: vec2round,\n  scale: vec2scale,\n  scaleAndAdd: vec2scaleAndAdd,\n  distance: vec2distance,\n  dist: vec2dist,\n  squaredDistance: vec2squaredDistance,\n  sqrDist: vec2sqrDist,\n  length: vec2length,\n  len: vec2len,\n  squaredLength: vec2squaredLength,\n  sqrLen: vec2sqrLen,\n  negate: vec2negate,\n  normalize: vec2normalize,\n  dot: vec2dot,\n  cross: vec2cross,\n  lerp: vec2lerp,\n  random: vec2random,\n  transformMat2: vec2transformMat2,\n  transformMat2d: vec2transformMat2d,\n  transformMat3: vec2transformMat3,\n  transformMat4: vec2transformMat4,\n  forEach: vec2forEach,\n  limit: vec2limit,\n}\n)});\n  main.variable(observer(\"EPSILON\")).define(\"EPSILON\", function(){return(\n0.000001\n)});\n  main.variable(observer(\"vec2add\")).define(\"vec2add\", function(){return(\nfunction vec2add(out, a, b) {\n    out[0] = a[0] + b[0]\n    out[1] = a[1] + b[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2ceil\")).define(\"vec2ceil\", function(){return(\nfunction vec2ceil(out, a) {\n  out[0] = Math.ceil(a[0])\n  out[1] = Math.ceil(a[1])\n  return out\n}\n)});\n  main.variable(observer(\"vec2clone\")).define(\"vec2clone\", function(){return(\nfunction vec2clone(a) {\n    var out = new Float32Array(2)\n    out[0] = a[0]\n    out[1] = a[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2copy\")).define(\"vec2copy\", function(){return(\nfunction vec2copy(out, a) {\n    out[0] = a[0]\n    out[1] = a[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2create\")).define(\"vec2create\", function(){return(\nfunction vec2create() {\n    var out = new Float32Array(2)\n    out[0] = 0\n    out[1] = 0\n    return out\n}\n)});\n  main.variable(observer(\"vec2cross\")).define(\"vec2cross\", function(){return(\nfunction vec2cross(out, a, b) {\n    var z = a[0] * b[1] - a[1] * b[0]\n    out[0] = out[1] = 0\n    out[2] = z\n    return out\n}\n)});\n  main.variable(observer(\"vec2distance\")).define(\"vec2distance\", function(){return(\nfunction vec2distance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1]\n    return Math.sqrt(x*x + y*y)\n}\n)});\n  main.variable(observer(\"vec2dist\")).define(\"vec2dist\", [\"vec2distance\"], function(vec2distance){return(\nvec2distance\n)});\n  main.variable(observer(\"vec2divide\")).define(\"vec2divide\", function(){return(\nfunction vec2divide(out, a, b) {\n    out[0] = a[0] / b[0]\n    out[1] = a[1] / b[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2div\")).define(\"vec2div\", [\"vec2divide\"], function(vec2divide){return(\nvec2divide\n)});\n  main.variable(observer(\"vec2dot\")).define(\"vec2dot\", function(){return(\nfunction vec2dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1]\n}\n)});\n  main.variable(observer(\"vec2equals\")).define(\"vec2equals\", [\"EPSILON\"], function(EPSILON){return(\nfunction vec2equals(a, b) {\n  var a0 = a[0]\n  var a1 = a[1]\n  var b0 = b[0]\n  var b1 = b[1]\n  return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)))\n}\n)});\n  main.variable(observer(\"vec2exactEquals\")).define(\"vec2exactEquals\", function(){return(\nfunction vec2exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1]\n}\n)});\n  main.variable(observer(\"vec2floor\")).define(\"vec2floor\", function(){return(\nfunction vec2floor(out, a) {\n  out[0] = Math.floor(a[0])\n  out[1] = Math.floor(a[1])\n  return out\n}\n)});\n  main.variable(observer(\"vec2forEach\")).define(\"vec2forEach\", [\"vec2create\"], function(vec2create)\n{\n  let vec = vec2create();\n  return function forEach(a, stride, offset, count, fn, arg) {\n      var i, l\n      if(!stride) {\n          stride = 2\n      }\n\n      if(!offset) {\n          offset = 0\n      }\n\n      if(count) {\n          l = Math.min((count * stride) + offset, a.length)\n      } else {\n          l = a.length\n      }\n\n      for(i = offset; i < l; i += stride) {\n          vec[0] = a[i]\n          vec[1] = a[i+1]\n          fn(vec, vec, arg)\n          a[i] = vec[0]\n          a[i+1] = vec[1]\n      }\n\n      return a\n  }\n}\n);\n  main.variable(observer(\"vec2fromValues\")).define(\"vec2fromValues\", function(){return(\nfunction vec2fromValues(x, y) {\n    var out = new Float32Array(2)\n    out[0] = x\n    out[1] = y\n    return out\n}\n)});\n  main.variable(observer(\"vec2inverse\")).define(\"vec2inverse\", function(){return(\nfunction vec2inverse(out, a) {\n  out[0] = 1.0 / a[0]\n  out[1] = 1.0 / a[1]\n  return out\n}\n)});\n  main.variable(observer(\"vec2length\")).define(\"vec2length\", function(){return(\nfunction vec2length(a) {\n    var x = a[0],\n        y = a[1]\n    return Math.sqrt(x*x + y*y)\n}\n)});\n  main.variable(observer(\"vec2len\")).define(\"vec2len\", [\"vec2length\"], function(vec2length){return(\nvec2length\n)});\n  main.variable(observer(\"vec2lerp\")).define(\"vec2lerp\", function(){return(\nfunction vec2lerp(out, a, b, t) {\n    var ax = a[0],\n        ay = a[1]\n    out[0] = ax + t * (b[0] - ax)\n    out[1] = ay + t * (b[1] - ay)\n    return out\n}\n)});\n  main.variable(observer(\"vec2limit\")).define(\"vec2limit\", function(){return(\nfunction vec2limit(out, a, max) {\n  var mSq = a[0] * a[0] + a[1] * a[1];\n\n  if (mSq > max * max) {\n    var n = Math.sqrt(mSq);\n    out[0] = a[0] / n * max;\n    out[1] = a[1] / n * max;\n  } else {\n    out[0] = a[0];\n    out[1] = a[1];\n  }\n\n  return out;\n}\n)});\n  main.variable(observer(\"vec2max\")).define(\"vec2max\", function(){return(\nfunction vec2max(out, a, b) {\n    out[0] = Math.max(a[0], b[0])\n    out[1] = Math.max(a[1], b[1])\n    return out\n}\n)});\n  main.variable(observer(\"vec2min\")).define(\"vec2min\", function(){return(\nfunction vec2min(out, a, b) {\n    out[0] = Math.min(a[0], b[0])\n    out[1] = Math.min(a[1], b[1])\n    return out\n}\n)});\n  main.variable(observer(\"vec2multiply\")).define(\"vec2multiply\", function(){return(\nfunction vec2multiply(out, a, b) {\n    out[0] = a[0] * b[0]\n    out[1] = a[1] * b[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2mul\")).define(\"vec2mul\", [\"vec2multiply\"], function(vec2multiply){return(\nvec2multiply\n)});\n  main.variable(observer(\"vec2negate\")).define(\"vec2negate\", function(){return(\nfunction vec2negate(out, a) {\n    out[0] = -a[0]\n    out[1] = -a[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2normalize\")).define(\"vec2normalize\", function(){return(\nfunction vec2normalize(out, a) {\n    var x = a[0],\n        y = a[1]\n    var len = x*x + y*y\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len)\n        out[0] = a[0] * len\n        out[1] = a[1] * len\n    }\n    return out\n}\n)});\n  main.variable(observer(\"vec2random\")).define(\"vec2random\", function(){return(\nfunction vec2random(out, scale) {\n    scale = scale || 1.0\n    var r = Math.random() * 2.0 * Math.PI\n    out[0] = Math.cos(r) * scale\n    out[1] = Math.sin(r) * scale\n    return out\n}\n)});\n  main.variable(observer(\"vec2rotate\")).define(\"vec2rotate\", function(){return(\nfunction vec2rotate(out, a, angle) {\n  var c = Math.cos(angle),\n      s = Math.sin(angle)\n  var x = a[0],\n      y = a[1]\n\n  out[0] = x * c - y * s\n  out[1] = x * s + y * c\n\n  return out\n}\n)});\n  main.variable(observer(\"vec2round\")).define(\"vec2round\", function(){return(\nfunction vec2round(out, a) {\n  out[0] = Math.round(a[0])\n  out[1] = Math.round(a[1])\n  return out\n}\n)});\n  main.variable(observer(\"vec2scale\")).define(\"vec2scale\", function(){return(\nfunction vec2scale(out, a, b) {\n    out[0] = a[0] * b\n    out[1] = a[1] * b\n    return out\n}\n)});\n  main.variable(observer(\"vec2scaleAndAdd\")).define(\"vec2scaleAndAdd\", function(){return(\nfunction vec2scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale)\n    out[1] = a[1] + (b[1] * scale)\n    return out\n}\n)});\n  main.variable(observer(\"vec2set\")).define(\"vec2set\", function(){return(\nfunction vec2set(out, x, y) {\n    out[0] = x\n    out[1] = y\n    return out\n}\n)});\n  main.variable(observer(\"vec2squaredDistance\")).define(\"vec2squaredDistance\", function(){return(\nfunction vec2squaredDistance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1]\n    return x*x + y*y\n}\n)});\n  main.variable(observer(\"vec2sqrDist\")).define(\"vec2sqrDist\", [\"vec2squaredDistance\"], function(vec2squaredDistance){return(\nvec2squaredDistance\n)});\n  main.variable(observer(\"vec2squaredLength\")).define(\"vec2squaredLength\", function(){return(\nfunction vec2squaredLength(a) {\n    var x = a[0],\n        y = a[1]\n    return x*x + y*y\n}\n)});\n  main.variable(observer(\"vec2sqrLen\")).define(\"vec2sqrLen\", [\"vec2squaredLength\"], function(vec2squaredLength){return(\nvec2squaredLength\n)});\n  main.variable(observer(\"vec2subtract\")).define(\"vec2subtract\", function(){return(\nfunction vec2subtract(out, a, b) {\n    out[0] = a[0] - b[0]\n    out[1] = a[1] - b[1]\n    return out\n}\n)});\n  main.variable(observer(\"vec2sub\")).define(\"vec2sub\", [\"vec2subtract\"], function(vec2subtract){return(\nvec2subtract\n)});\n  main.variable(observer(\"vec2transformMat2\")).define(\"vec2transformMat2\", function(){return(\nfunction vec2transformMat2(out, a, m) {\n    var x = a[0],\n        y = a[1]\n    out[0] = m[0] * x + m[2] * y\n    out[1] = m[1] * x + m[3] * y\n    return out\n}\n)});\n  main.variable(observer(\"vec2transformMat2d\")).define(\"vec2transformMat2d\", function(){return(\nfunction vec2transformMat2d(out, a, m) {\n    var x = a[0],\n        y = a[1]\n    out[0] = m[0] * x + m[2] * y + m[4]\n    out[1] = m[1] * x + m[3] * y + m[5]\n    return out\n}\n)});\n  main.variable(observer(\"vec2transformMat3\")).define(\"vec2transformMat3\", function(){return(\nfunction vec2transformMat3(out, a, m) {\n    var x = a[0],\n        y = a[1]\n    out[0] = m[0] * x + m[3] * y + m[6]\n    out[1] = m[1] * x + m[4] * y + m[7]\n    return out\n}\n)});\n  main.variable(observer(\"vec2transformMat4\")).define(\"vec2transformMat4\", function(){return(\nfunction vec2transformMat4(out, a, m) {\n    var x = a[0], \n        y = a[1]\n    out[0] = m[0] * x + m[4] * y + m[12]\n    out[1] = m[1] * x + m[5] * y + m[13]\n    return out\n}\n)});\n  return main;\n}\n","import define1 from \"./3d9d1394d858ca97@403.js\";\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\",\"code\",\"PINNED\"], function(md,code,PINNED){return(\nmd`# Toolbox\n\nA growing<sup>*</sup> library of functions for various tasks.\nThis notebook will change frequently. If you rely on it be sure to pin the version:\n${code(`import {/* ... */} from '${PINNED}'`)}\n\n<small><sup>*</sup> <i>A bit of a mess right now as I move things around. Let's not focus on the bad things though, shall we? :D</i></small>\n\n`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Reactivity\n`\n)});\n  main.variable(observer(\"linkViews\")).define(\"linkViews\", function(){return(\nfunction linkViews(target, views, descriptor = {enumerable: true}) {\n  Object.entries(views).forEach(([name, view]) => {\n    Object.defineProperty(target, name, Object.assign({\n      get() { return view.value; }\n    }, descriptor));\n  });\n  return target;\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Images\n`\n)});\n  main.variable(observer()).define([\"signature\",\"fitSize\"], function(signature,fitSize){return(\nsignature(fitSize, {\n  description: `Scales dimensions proportionally to fit into the given width and/or height.`,\n  example: `\nconst [width, height, scale] = fitSize(img.naturalWidth, img.naturalHeight, {width: 500, height: 500});\nimg.width = width;\nimg.height = height;\n`,\n  tests: {\n    'no target dimensions': assert => {\n      const [w, h, s] = fitSize(200, 150);\n      assert(w === 200, 'width'); assert(h === 150, 'height'); assert(s === 1, 'scale');\n    },\n    'target width only': async assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 2*200});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'target height only': assert => {\n      const [w, h, s] = fitSize(200, 150, {height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'same aspect': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 2*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'smaller aspect ratio': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 3*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'greater aspect ratio': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 3*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n  }\n})\n)});\n  main.variable(observer(\"fitSize\")).define(\"fitSize\", function(){return(\nfunction fitSize(sourceWidth, sourceHeight, options = {}) {\n  const {width: tw, height: th, crop = false} = options;\n  if(tw == null && th == null) return [sourceWidth, sourceHeight, 1];\n  const ar = sourceWidth / sourceHeight;\n  return tw == null || (th != null && ar < tw / th)\n    ? [th * ar, th, th / sourceHeight]\n    : [tw, tw / ar, tw / sourceWidth];\n}\n)});\n  main.variable(observer()).define([\"signature\",\"importAsset\"], function(signature,importAsset){return(\nsignature(importAsset, {\n  description: `Imports a remote asset and returns its local URL and blob.`,\n  example: `const {blob, url} = await importAsset('https://example.com/image.png');`,\n  tests: {\n    'import asset': async assert => {\n      const {blob, url} = await importAsset('https://en.wikipedia.org/static/favicon/wikipedia.ico');\n      assert(blob instanceof Blob, 'blob');\n      assert(typeof url === 'string', 'url');\n    }\n  }\n})\n)});\n  main.variable(observer(\"importAsset\")).define(\"importAsset\", [\"invalidation\"], function(invalidation){return(\nasync function importAsset(src) {\n  return fetch(src).then(res => res.blob()).then(blob => {\n    const url = URL.createObjectURL(blob);\n    invalidation.then(() => URL.revokeObjectURL(url));\n    return {url, blob};\n  });\n}\n)});\n  main.variable(observer()).define([\"signature\",\"importImage\",\"DOM\"], function(signature,importImage,DOM){return(\nsignature(importImage, {\n  description: `Returns an Image for a remote src. The image has been created from an object URL and won't taint a canvas.`,\n  example: `\nconst img = await importImage('https://example.com/image.png');\nconst ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\nctx.drawImage(img, 0, 0);\n  `,\n  tests: {\n    'tainted canvas': async assert => {\n      const img = DOM.element('img', {src: 'https://i.imgur.com/D6H96Hc.png'});\n      await img.decode();\n      const ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\n      ctx.drawImage(img, 0, 0);\n      let err = '';\n      try { ctx.getImageData(0, 0, 1, 1) }\n      catch(e) { err += e}\n      assert(/^SecurityError/.test(err), 'remote URL taints canvas');\n    },\n    'import image': async assert => {\n      const img = await importImage('https://i.imgur.com/D6H96Hc.png');\n      const ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\n      ctx.drawImage(img, 0, 0);\n      const d = ctx.getImageData(0, 0, 1, 1).data;\n      assert(d[0]===255,d[1]===0, 'Image can be imported and applied to canvas without tainting it');\n    }\n  }\n})\n)});\n  main.variable(observer(\"importImage\")).define(\"importImage\", [\"DOM\"], function(DOM){return(\nasync function importImage(src) {\n  const img = DOM.element('img', {crossorigin: 'anonymous', src});\n  return img.decode().then(() => img);\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Markup\n`\n)});\n  main.variable(observer(\"querylink\")).define(\"querylink\", [\"DOM\"], function(DOM){return(\nfunction querylink(title, attr = {}, options = {}) {\n  const {query = s => `https://duckduckgo.com/?q=\"${decodeURI(s)}\"`} = options;\n  const a = DOM.element('a', {href: attr.href || query(title), ...attr});\n  return a.textContent = title, a;\n}\n)});\n  main.variable(observer()).define(function(){return(\n\"\"\n)});\n  main.variable(observer()).define([\"signature\",\"scopedStyle\"], function(signature,scopedStyle){return(\nsignature(scopedStyle, {\n  description: `Creates a scoped \\`<style>\\` element from CSS.`,\n  example: `\nconst namespace = DOM.uid('scope').id;\nconst style = scopedStyle('.' + namespace, \\`\n  :scope { font-family: sans-serif }\n  :scope, :scope > * { padding: 0 }\n\\`);\nreturn html\\`<div class=\"\\${namespace}\">\n  \\${style}\n  <span> text ...\n\\`;\n`,\n})\n)});\n  main.variable(observer(\"scopedStyle\")).define(\"scopedStyle\", [\"html\"], function(html){return(\nfunction scopedStyle(scope, css) {\n  const style = html`<style>`;\n  style.textContent = css.replace(/\\:scope\\b/g, scope); \n  return style;\n}\n)});\n  main.variable(observer()).define([\"signature\",\"getPinnedSlug\"], function(signature,getPinnedSlug){return(\nsignature(getPinnedSlug)\n)});\n  main.variable(observer(\"getPinnedSlug\")).define(\"getPinnedSlug\", [\"html\"], function(html){return(\nfunction getPinnedSlug({name = null, parseVersion = 'v1'} = {}) {\n  const getLines = async (route, rtVersion, lines) => {\n    return fetch(`https://api.observablehq.com/${route}.js?v=${rtVersion}`)\n      .then(response => response.text())\n      .catch(e => null)\n      .then(t => t == null ? [] : t.split('\\n', lines + 1).slice(0, lines));\n  }\n  const parsers = {\n    v1: route => getLines(route, 1, 4).then(ln => {\n          const name = ln[0].slice('// URL: https://observablehq.com/'.length).replace(/^d\\//, '');\n          const version = ln[3].slice('// Version: '.length);\n          return `${name}@${version}`;\n        }),\n    v3: route => getLines(route, 3, 1).then(ln => {\n          return ln[0].slice('// https://observablehq.com/'.length).replace(/^d\\//, '');\n        }),\n  };\n  \n  try {\n    const route = name != null\n      ? name.replace(/^(?!@)/, 'd/')\n      : html`<a href>`.pathname.match(/^\\/(d\\/[a-f0-9]{16}|@[^\\/]+\\/[^@].*?)(?:$|\\/)/)[1];\n    return parsers[parseVersion](route).catch(e => null);\n  }\n  catch(e) {\n    return null;\n  }  \n}\n)});\n  main.variable(observer()).define([\"signature\"], function(signature){return(\nsignature('PINNED', {\n  name: 'PINNED',\n  description: 'Notebook slug, automatically pinned to the most recent version of the importing notebook.',\n  example: `md\\`You can import my notebook this way:\n\\\\\\`\\\\\\`\\\\\\`javascript\nimport {foo} from \"\\${PINNED}\"\n\\\\\\`\\\\\\`\\\\\\`\\`\n`\n})\n)});\n  main.variable(observer(\"PINNED\")).define(\"PINNED\", [\"getPinnedSlug\"], function(getPinnedSlug){return(\ngetPinnedSlug()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Internals`\n)});\n  main.variable(observer(\"readChunks\")).define(\"readChunks\", function(){return(\nasync function readChunks(reader, options = {}) {\n  const { separator = 0x0A, limit = Infinity} = options;\n  const merge = (a, b) => {\n    const c = new Uint8Array(a.length + b.length);\n    return c.set(a, 0), c.set(b, a.length), c;\n  }\n  \n  const lines = [];\n  let tail = new Uint8Array();\n  \n  const next = () => {\n    return reader.read().then(({done, value}) => {\n      let i = -1, o = 0;\n      if(value) {\n        console.log('chunk size', value.length);\n        while(++i < value.length) {\n          if(value[i] === separator) {\n            lines.push(merge(tail, value.slice(o, i)));\n            if(lines.length >= limit) {\n              reader.cancel();\n              return lines;\n            }\n            o = i + 1;\n          }\n        }\n        tail = value.slice(o);\n      }\n      \n      return !done ? next() : (lines.push(tail), lines);\n    });\n  };\n  return next();\n}\n)});\n  main.variable(observer(\"PINNED_LIB\")).define(\"PINNED_LIB\", [\"getPinnedSlug\"], function(getPinnedSlug){return(\ngetPinnedSlug({name: '691ae3b95f02db79'})\n)});\n  main.variable(observer(\"viewof RUN_TESTS\")).define(\"viewof RUN_TESTS\", [\"deprecateImport\",\"viewof _dep_RUN_TESTS\"], function(deprecateImport,$0){return(\ndeprecateImport($0, 'RUN_TESTS', false)\n)});\n  main.variable(observer(\"RUN_TESTS\")).define(\"RUN_TESTS\", [\"Generators\", \"viewof RUN_TESTS\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Deprecations\n`\n)});\n  main.variable(observer(\"deprecateImport\")).define(\"deprecateImport\", [\"PINNED\",\"PINNED_LIB\"], function(PINNED,PINNED_LIB){return(\nfunction deprecateImport(target, name, nulled = true, source = '3d9d1394d858ca97') {\n  // This notebook.\n  if(PINNED && PINNED === PINNED_LIB) return nulled ? undefined : target;\n  \n  console.warn(`${name} has been moved. Import it from \"${source}\".`);\n  return target;\n}\n)});\n  const child1 = runtime.module(define1);\n  main.import(\"code\", \"_dep_code\", child1);\n  main.import(\"signature\", \"_dep_signature\", child1);\n  main.import(\"signature_theme\", \"_dep_signature_theme\", child1);\n  main.import(\"viewof RUN_TESTS\", \"viewof _dep_RUN_TESTS\", child1);\n  main.import(\"RUN_TESTS\", \"_dep_RUN_TESTS\", child1);\n  main.import(\"createStepper\", \"_dep_createStepper\", child1);\n  main.import(\"defaultTestRunner\", \"_dep_defaultTestRunner\", child1);\n  main.import(\"defaultSignatureParser\", \"_dep_defaultSignatureParser\", child1);\n  main.variable(observer(\"signature\")).define(\"signature\", [\"deprecateImport\",\"_dep_signature\"], function(deprecateImport,_dep_signature){return(\ndeprecateImport(_dep_signature, 'signature', false)\n)});\n  main.variable(observer(\"code\")).define(\"code\", [\"deprecateImport\",\"_dep_code\"], function(deprecateImport,_dep_code){return(\ndeprecateImport(_dep_code, 'code', false)\n)});\n  main.variable(observer(\"signature_theme\")).define(\"signature_theme\", [\"deprecateImport\",\"_dep_signature_theme\"], function(deprecateImport,_dep_signature_theme){return(\ndeprecateImport(_dep_signature_theme, 'signature_theme')\n)});\n  main.variable(observer(\"createStepper\")).define(\"createStepper\", [\"deprecateImport\",\"_dep_createStepper\"], function(deprecateImport,_dep_createStepper){return(\ndeprecateImport(_dep_createStepper, 'createStepper')\n)});\n  main.variable(observer(\"defaultTestRunner\")).define(\"defaultTestRunner\", [\"deprecateImport\",\"_dep_defaultTestRunner\"], function(deprecateImport,_dep_defaultTestRunner){return(\ndeprecateImport(_dep_defaultTestRunner, 'defaultTestRunner')\n)});\n  main.variable(observer(\"defaultSignatureParser\")).define(\"defaultSignatureParser\", [\"deprecateImport\",\"_dep_defaultSignatureParser\"], function(deprecateImport,_dep_defaultSignatureParser){return(\ndeprecateImport(_dep_defaultSignatureParser, 'defaultSignatureParser')\n)});\n  return main;\n}\n","import define1 from \"./691ae3b95f02db79@1159.js\";\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# Signature\n\nThis notebook offers a set of documentation helpers.\n\nFor more examples please see [Toolbox](https://observablehq.com/d/691ae3b95f02db79).\n`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---`\n)});\n  main.variable(observer()).define([\"signature\",\"md\"], function(signature,md){return(\nsignature(signature, {\n  description: md`\nDocumentation template for functions. Extracts the function head from the function passed to **\\`fn\\`**:\n- If \\`fn\\` is a named function, the head is returned as written.\n- If \\`fn\\` is an arrow function, the declaration will be reformatted and the \\`function\\` keyword injected. If \\`name\\` was set, it will be injected as the function name.\n- Any other argument type is passed through unaltered.\n\n**Note:** Arrow functions are nameless, even when assigned to a variable. In these cases \\`name\\` must be provided explicitely.\n\nAll settings are optional. Available **\\`options\\`**:\n${Object.entries({\n      description: 'Rendered as Markdown if a string, otherwise passed through.',\n      example:  'Single value or array of values. String values are formatted as Javascript code, everything else gets passed through.',\n      name: 'Anchor name to link to. Defaults to function name.',\n      scope: 'Class name to scope CSS selectors. Defaults to unique string.',\n      css: 'The theme CSS. If \\`scope\\` is used, the CSS should start every selector with \\`:scope\\`. Defaults to \\`signature_theme\\`.',\n      open: 'Boolean that controls the toggle state of the details wrapper. Set to \\`null\\` to disable collapsing.',\n      tests: 'Object map of test functions, keyed by test name. Each function receives \\`assert(condition, assertion)\\`   as argument. Async functions are supported.',\n      runTests: 'Boolean or Promise, controls test execution. Set to \\`false\\` to disable test output.',\n      testRunner: 'Executes tests and builds results markup. See [\\`defaultTestRunner()\\`](#defaultTestRunner) for details.',\n    }).map(([k,v]) => `- \\`${k}:\\` ${v}\\n`)}`,\n  example: [`\n// Basic use\nsignature(myUsefulFunc, {\n  description: \"'Tis a very useful function, this construct of strung-together characters.\"\n})\n  `, `\n// Tests\nsignature(myTestedFunc, {\n  tests: {\n    'can retrieve data': async (assert) => {\n      const data = await myTestedFunc().getData();\n      assert(Array.isArray(data), 'data is array');\n      assert(data.length, 'data is not empty');\n    },\n    'is this finished?': assert => {\n      assert(myTestedFunc() !== 'todo: implement', 'actually implemented');\n    },\n    'Look, ma! No assert!': () => {\n      try { myTestedFunc().notImplemented() }\n      catch(e) { throw Error(\\`Hey signature(), catch this! \\${e}\\`) };\n    }\n}})\n  `,],\n  tests: {\n    'signature parsing': assert => {\n      const test = (expect, name, fn) => {\n        const sig = signature(fn, {name, formatter: ({signature:s}) => s.textContent.trim()});\n        assert(expect === sig, expect);\n      };\n      {test('function()', undefined, function(){})}\n      {test('function foo1()', undefined, function foo1(){})}\n      {test('function foo2()', 'foo2', function(){})}\n      {test('function()', undefined, ()=>{})}\n      {test('function foo3()', 'foo3', ()=>{})}\n      {test('async function()', undefined, async ()=>{})}\n      {test('async function foo4(a)', 'foo4', async a=>{})}\n      {test('async function foo5()', undefined, async function foo5(){})}\n      {test('async function* foo6()', 'foo6', async function*(){})}\n      {test('function*()', undefined, function * (){})}\n      {test('function(a,b=({foo:\"bar\"}))', undefined, (a,b=({foo:\"bar\"}))=>{})}\n    }\n  }\n})\n)});\n  main.variable(observer(\"signature\")).define(\"signature\", [\"RUN_TESTS\",\"DOM\",\"signature_theme\",\"defaultSignatureParser\",\"defaultTestRunner\",\"html\",\"md\",\"code\",\"scopedStyle\"], function(RUN_TESTS,DOM,signature_theme,defaultSignatureParser,defaultTestRunner,html,md,code,scopedStyle){return(\nfunction signature(fn, options = {}) {\n  const {\n    name = typeof fn === 'function' && fn.name.length ? fn.name : null,\n    description = null,\n    example = null,\n    open = true,\n    tests = {},\n    runTests = RUN_TESTS.promise,\n    \n    scope = DOM.uid('css-scope').id,\n    css = signature_theme,\n    formatter = defaultFormatter,\n    \n    signatureParser = defaultSignatureParser,\n    testRunner = defaultTestRunner,\n  } = options;\n  \n  const sig = typeof fn !== 'function' ? fn : signatureParser(fn, name);\n  let testList = null;\n  \n  if(runTests && tests && Object.keys(tests).length) {\n    const {list, run} = testRunner(tests);\n    const button = html`<button>Run tests`, cta = html`<p class=cta>${button} to view results`;\n    testList = html`<div class=tests>${[md`Test results:`, cta]}`;\n    Promise.race([Promise.resolve(runTests), new Promise(r => button.onclick = r)])\n      .then(() => (cta.replaceWith(list), run()));\n  }\n  \n  return formatter({\n    signature: typeof sig === 'string' ? code(sig) : sig,\n    description: typeof description === 'string' ? md`${description}` : description,\n    examples: (example == null ? [] : Array.isArray(example) ? example : [example])\n      .map(v => typeof v === 'string' ? code(v) : v),\n    testList,\n  }, {name, open, css, scope});\n  \n  function defaultFormatter({signature, description, examples, testList}, {name, open, scope, css}) {\n    const args = arguments;\n    return html`<${open == null ? 'div' : `details ${open ? 'open' : ''}`} class=\"${scope}\">${[\n      !css ? '' : scope == null ? css : scopedStyle('.' + scope, css),\n      html`<${open == null ? 'div' : 'summary'} class=signature>${signature}${\n        !name || !name.length ? '' : html`<a class=link href=\"#${name}\">`\n      }`,\n      description == null ? '' : html`<div class=description>${description}`,\n      !examples.length ? '' : html`<div class=examples>${[\n        examples.length < 2 ? md`Example:` : md`Examples:`,\n        ...examples\n      ]}`,\n      testList || '',\n    ]}`;\n  }\n}\n)});\n  main.variable(observer(\"signature_theme\")).define(\"signature_theme\", function(){return(\n`\n:scope {\n  border: 1px solid #eee;\n  padding: .5em 1em;\n  margin-bottom: 1em;\n}\n:scope > div {\n  border-top: 1px solid #eee;\n}\n:scope > summary:focus {\n  outline: none;\n}\n:scope > summary {\n  padding-left: 1.2em;\n  position: relative;\n}\n:scope > summary::-webkit-details-marker {\n  display: none;\n}\n:scope > summary:before {\n  position: absolute;\n  left: 0;\n  content: \"\";\n}\n:scope[open] > summary:before {\n  content: \"\";\n}\n:scope .signature {\n  display: flex;\n  align-items: center;\n}\n:scope .examples .code {\n  background: #f5f5f5;\n  padding: .5rem;\n}\n:scope .link:before {\n  content: \"\";\n  display: block;\n  width: 1rem;\n  height: 1rem;\n  background: url(https://raw.githubusercontent.com/encharm/Font-Awesome-SVG-PNG/master/black/png/32/link.png) center 100%/contain;\n  margin-left: .5rem;\n  opacity: .3;\n}\n:scope .signature:hover .link:hover:before { opacity: 1}\n:scope .tests .cta {\n  font-style: italic;\n}\n:scope .tests th, :scope .tests td { padding: .25em .5em }\n:scope .tests tr[data-status=\"pending\"] { background: hsl(40,90%,90%); opacity: .5 }\n:scope .tests tr[data-status=\"error\"]   { background: hsl( 0,90%,90%)}\n:scope .tests tr[data-status=\"success\"] { background: hsl(90,90%,90%)}\n`\n)});\n  main.variable(observer()).define([\"signature\",\"code\"], function(signature,code){return(\nsignature(code, {\n  description: `Creates syntax-highlighted output.`,\n  example: `\nconst myCss = \\`.container { background: red; }\\`;\nreturn code(myCss, {\n  // Optional, defaults to Javascript. Supported languages:\n  // \n  language: 'css',\n  // Removes leading and trailing empty lines.\n  trim: false\n});`,\n})\n)});\n  main.variable(observer(\"code\")).define(\"code\", [\"md\"], function(md){return(\nfunction code(text, {type = 'javascript', trim = true, className = 'code'} = {}) {\n  const out = md`\\`\\`\\`${type}\\n${!trim ? text : text.replace(/^\\s*\\n|\\s+?$/g, '')}\\n\\`\\`\\``;\n  if(className) out.classList.add('code');\n  return out;  \n}\n)});\n  main.variable(observer()).define([\"signature\",\"PINNED_LIB\"], function(signature,PINNED_LIB){return(\nsignature('RUN_TESTS', {\n  name: 'RUN_TESTS',\n  description: `Button that triggers all tests that have not run yet.`,\n  example: `\nimport {viewof RUN_TESTS} from \"${PINNED_LIB}\"\n// In another cell:\nviewof RUN_TESTS\n`\n})\n)});\n  main.variable(observer(\"viewof RUN_TESTS\")).define(\"viewof RUN_TESTS\", [\"createStepper\",\"html\"], function(createStepper,html)\n{\n  const s = createStepper();\n  const view = html`<div><button>Run all tests`;\n  view.onclick = e => { e.stopPropagation(); s.next(); };\n  view.value = s;\n  return view;\n}\n);\n  main.variable(observer(\"RUN_TESTS\")).define(\"RUN_TESTS\", [\"Generators\", \"viewof RUN_TESTS\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Internals\n`\n)});\n  main.variable(observer(\"createStepper\")).define(\"createStepper\", function(){return(\nfunction createStepper() {\n  let cb = ()=>{};\n  const ret = {\n    step: -1,\n    next: () => {\n      ret.step++;\n      cb();\n      ret.promise = new Promise(res=>cb=res);\n      return ret;\n    }\n  };\n  return ret.next();\n}\n)});\n  main.variable(observer(\"defaultTestRunner\")).define(\"defaultTestRunner\", [\"html\",\"DOM\"], function(html,DOM){return(\nfunction defaultTestRunner(tests, options = {}) {\n  const {\n    assert = (cond, msg = 'error') => { if(!cond) throw msg },\n    formatList = items => html`<table><thead><tr><th>Name</th><th>Result</th></tr><body>${items}`,\n    formatItem = (name, status, msg) => {\n      const state = status == null ? 'pending' : status ? 'success' : 'error';\n      const icon = { pending: '', success: '', error: ''}[state];\n      return html`<tr data-status=${state}>\n        <td>${DOM.text(name)}</td>\n        <td><span title=${state}>${icon}</span> ${msg||''}</td>`;\n    }\n  } = options;\n  \n  const runners = Object.entries(tests).map(([name, fn]) => ({\n    name,\n    node: formatItem(name),\n    run: async() => {\n      try { await fn.call(null, assert); }\n      catch(e) { return e; }\n      return;\n    }\n  }));\n  const list = formatList(runners.map(r => r.node));\n  \n  const run = () => Promise.all(runners.map(\n    ({name, node, run}) => run().then(msg => node.replaceWith(formatItem(name, msg === undefined, msg)))\n  ));\n  \n  return {list, run};\n}\n)});\n  main.variable(observer(\"defaultSignatureParser\")).define(\"defaultSignatureParser\", function(){return(\nfunction defaultSignatureParser(fn, name = null) {\n  const src = fn.toString();\n  let end = 0, r = 0;\n  const next = c => {\n    switch(c) {\n      case '(': ++r; break;\n      case ')': --r; break;\n      case '{':\n      case '=': if(r === 0) return false;\n    }\n    return true;\n  }\n  while(end < src.length && next(src[end++]));\n  const sig = src.substring(0, end - 1).trim();\n  // Named func, return as-is.\n  if(fn.name !== '') return sig;\n\n  const pref = sig.match(/^(async\\s*)?(function\\s*)?(\\*)?/);\n  const async = pref[1] ? 'async ' : '';\n  const gen = pref[3] ? '*' : '';\n  const fnName = name != null ? ` ${name}` : '';\n\n  let suffix = sig.substring(pref[0].length).trim();\n  if(suffix[0] !== '(') suffix = `(${suffix})`;\n  //console.log({name, sig, pref, suffix});\n\n  return `${async}function${gen}${fnName}${suffix}`;\n}\n)});\n  const child1 = runtime.module(define1);\n  main.import(\"getPinnedSlug\", child1);\n  main.variable(observer(\"PINNED_LIB\")).define(\"PINNED_LIB\", [\"getPinnedSlug\"], function(getPinnedSlug){return(\ngetPinnedSlug('3d9d1394d858ca97')\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n\n## Old docs - under construction\n`\n)});\n  main.variable(observer(\"demoFunction\")).define(\"demoFunction\", function(){return(\nfunction demoFunction(sw, sh, tw = null, th = null) {\n  if(tw == null && th == null) return [sw, sh, 1];\n  const ar = sw / sh;\n  return tw == null || (th != null && ar < tw / th)\n    ? [th * ar, th, th / sh]\n    : [tw, tw / ar, tw / sw];\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Superstylin'\n\n***Note:*** *This section is currently being reworked.*\n\nTo extend the base theme, first import it:\n`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`\nTo override the CSS for a single instance, pass the default CSS along with your custom CSS:\n`\n)});\n  main.variable(observer()).define([\"signature\",\"demoFunction\",\"signature_theme\"], function(signature,demoFunction,signature_theme){return(\nsignature(demoFunction, {\n  description: `Scales dimensions proportionally to fit into the given width and/or height.`,\n  example: `const [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);`,\n  css: `\n${signature_theme}\n:scope {\n  background: LightYellow;\n  box-shadow: 1px 2px 5px -3px;\n  font-family: sans-serif;\n}\n:scope .description {\n  font-size: 1.2rem;\n  font-style: italic;\n}\n:scope .examples .code {\n  background: NavajoWhite;\n}\n  `,\n})\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`\nIf you want to override the CSS globally (and also have shared instead of scoped styles), use the following steps:\n`\n)});\n  const child2 = runtime.module(define1);\n  main.import(\"scopedStyle\", child2);\n  main.variable(observer()).define([\"scopedStyle\",\"signature_theme\"], function(scopedStyle,signature_theme){return(\nscopedStyle('.my-shared-scope', `\n${signature_theme}\n// Adds \n:scope { border: 10px solid #888 }\n`)\n)});\n  main.variable(observer(\"myCustomSig\")).define(\"myCustomSig\", [\"signature\"], function(signature){return(\nfunction myCustomSig(fn, options = {}) {\n  return signature(fn, {scope: 'my-shared-scope', css: null, ...options});\n}\n)});\n  main.variable(observer()).define([\"myCustomSig\",\"demoFunction\"], function(myCustomSig,demoFunction){return(\nmyCustomSig(demoFunction, {\n  description: `Scales dimensions proportionally to fit into the given width and/or height.`,\n  example: `const [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);`,\n})\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Testing\n\nTests can be incorporated into the documentation and executed\n- by passing \\`{runTests: true}\\`, which will execute tests immediately,\n- by clicking the \\`Run tests\\` button inside the documentation cell,\n- or by passing a promise for \\`runTests\\`. This promise can be used to execute all tests on the page.\n\nSelect how tests should be run for the following example:\n`\n)});\n  main.variable(observer(\"viewof runType\")).define(\"viewof runType\", [\"DOM\"], function(DOM){return(\nDOM.select([\n  'wait for interaction',\n  'run immediately',\n  'hide tests',\n])\n)});\n  main.variable(observer(\"runType\")).define(\"runType\", [\"Generators\", \"viewof runType\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"signature\",\"demoFunction\",\"RUN_TESTS\",\"runType\",\"Promises\"], function(signature,demoFunction,RUN_TESTS,runType,Promises){return(\nsignature(demoFunction, {\n  description: `Scales dimensions proportionally to fit into the given width and/or height.`,\n  example: `\nconst [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);\nimg.width = width;\nimg.height = height;\n`,\n  runTests: {\n    'run immediately': true,\n    'hide tests': false,\n    'wait for interaction': RUN_TESTS.promise,\n  }[runType],\n  // Note: Tests contain deliberate errors to showcase the various states.\n  tests: {\n    'no target dimensions': assert => {\n      ({}).callUndefined();\n      const [w, h, s] = demoFunction(200, 150);\n      assert(w === 200, 'width'); assert(h === 150, 'height'); assert(s === 1, 'scale');\n    },\n    'target width only': async assert => {\n      await Promises.delay(3000);\n      const [w, h, s] = demoFunction(200, 150, 2*200);\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'target height only': assert => {\n      const [w, h, s] = demoFunction(200, 150, null, 2*150);\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'same aspect': assert => {\n      const [w, h, s] = demoFunction(200, 150, 2*200, 2*150);\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'smaller aspect ratio': async assert => {\n      await Promises.delay(2000);\n      const [w, h, s] = demoFunction(200, 150, 3*200, 2*150);\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 0, 'scale');\n    },\n    'greater aspect ratio': assert => {\n      const [w, h, s] = demoFunction(200, 150, 3*200, 2*150);\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n  }\n})\n)});\n  return main;\n}\n","import define1 from \"./3d9d1394d858ca97@403.js\";\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\",\"code\",\"PINNED\"], function(md,code,PINNED){return(\nmd`# Toolbox\n\nA growing<sup>*</sup> library of functions for various tasks.\nThis notebook will change frequently. If you rely on it be sure to pin the version:\n${code(`import {/* ... */} from '${PINNED}'`)}\n\n<small><sup>*</sup> <i>A bit of a mess right now as I move things around. Let's not focus on the bad things though, shall we? :D</i></small>\n\n`\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Reactivity\n`\n)});\n  main.variable(observer(\"linkViews\")).define(\"linkViews\", function(){return(\nfunction linkViews(target, views, descriptor = {enumerable: true}) {\n  Object.entries(views).forEach(([name, view]) => {\n    Object.defineProperty(target, name, Object.assign({\n      get() { return view.value; }\n    }, descriptor));\n  });\n  return target;\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Images\n`\n)});\n  main.variable(observer()).define([\"signature\",\"fitSize\"], function(signature,fitSize){return(\nsignature(fitSize, {\n  description: `Scales dimensions proportionally to fit into the given width and/or height.`,\n  example: `\nconst [width, height, scale] = fitSize(img.naturalWidth, img.naturalHeight, {width: 500, height: 500});\nimg.width = width;\nimg.height = height;\n`,\n  tests: {\n    'no target dimensions': assert => {\n      const [w, h, s] = fitSize(200, 150);\n      assert(w === 200, 'width'); assert(h === 150, 'height'); assert(s === 1, 'scale');\n    },\n    'target width only': async assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 2*200});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'target height only': assert => {\n      const [w, h, s] = fitSize(200, 150, {height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'same aspect': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 2*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'smaller aspect ratio': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 3*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n    'greater aspect ratio': assert => {\n      const [w, h, s] = fitSize(200, 150, {width: 3*200, height: 2*150});\n      assert(w === 2*200, 'width'); assert(h === 2*150, 'height'); assert(s === 2, 'scale');\n    },\n  }\n})\n)});\n  main.variable(observer(\"fitSize\")).define(\"fitSize\", function(){return(\nfunction fitSize(sourceWidth, sourceHeight, options = {}) {\n  const {width: tw, height: th, crop = false} = options;\n  if(tw == null && th == null) return [sourceWidth, sourceHeight, 1];\n  const ar = sourceWidth / sourceHeight;\n  return tw == null || (th != null && ar < tw / th)\n    ? [th * ar, th, th / sourceHeight]\n    : [tw, tw / ar, tw / sourceWidth];\n}\n)});\n  main.variable(observer()).define([\"signature\",\"importAsset\"], function(signature,importAsset){return(\nsignature(importAsset, {\n  description: `Imports a remote asset and returns its local URL and blob.`,\n  example: `const {blob, url} = await importAsset('https://example.com/image.png');`,\n  tests: {\n    'import asset': async assert => {\n      const {blob, url} = await importAsset('https://en.wikipedia.org/static/favicon/wikipedia.ico');\n      assert(blob instanceof Blob, 'blob');\n      assert(typeof url === 'string', 'url');\n    }\n  }\n})\n)});\n  main.variable(observer(\"importAsset\")).define(\"importAsset\", [\"invalidation\"], function(invalidation){return(\nasync function importAsset(src) {\n  return fetch(src).then(res => res.blob()).then(blob => {\n    const url = URL.createObjectURL(blob);\n    invalidation.then(() => URL.revokeObjectURL(url));\n    return {url, blob};\n  });\n}\n)});\n  main.variable(observer()).define([\"signature\",\"importImage\",\"DOM\"], function(signature,importImage,DOM){return(\nsignature(importImage, {\n  description: `Returns an Image for a remote src. The image has been created from an object URL and won't taint a canvas.`,\n  example: `\nconst img = await importImage('https://example.com/image.png');\nconst ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\nctx.drawImage(img, 0, 0);\n  `,\n  tests: {\n    'tainted canvas': async assert => {\n      const img = DOM.element('img', {src: 'https://i.imgur.com/D6H96Hc.png'});\n      await img.decode();\n      const ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\n      ctx.drawImage(img, 0, 0);\n      let err = '';\n      try { ctx.getImageData(0, 0, 1, 1) }\n      catch(e) { err += e}\n      assert(/^SecurityError/.test(err), 'remote URL taints canvas');\n    },\n    'import image': async assert => {\n      const img = await importImage('https://i.imgur.com/D6H96Hc.png');\n      const ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\n      ctx.drawImage(img, 0, 0);\n      const d = ctx.getImageData(0, 0, 1, 1).data;\n      assert(d[0]===255,d[1]===0, 'Image can be imported and applied to canvas without tainting it');\n    }\n  }\n})\n)});\n  main.variable(observer(\"importImage\")).define(\"importImage\", [\"DOM\"], function(DOM){return(\nasync function importImage(src) {\n  const img = DOM.element('img', {crossorigin: 'anonymous', src});\n  return img.decode().then(() => img);\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Markup\n`\n)});\n  main.variable(observer(\"querylink\")).define(\"querylink\", [\"DOM\"], function(DOM){return(\nfunction querylink(title, attr = {}, options = {}) {\n  const {query = s => `https://duckduckgo.com/?q=\"${decodeURI(s)}\"`} = options;\n  const a = DOM.element('a', {href: attr.href || query(title), ...attr});\n  return a.textContent = title, a;\n}\n)});\n  main.variable(observer()).define(function(){return(\n\"\"\n)});\n  main.variable(observer()).define([\"signature\",\"scopedStyle\"], function(signature,scopedStyle){return(\nsignature(scopedStyle, {\n  description: `Creates a scoped \\`<style>\\` element from CSS.`,\n  example: `\nconst namespace = DOM.uid('scope').id;\nconst style = scopedStyle('.' + namespace, \\`\n  :scope { font-family: sans-serif }\n  :scope, :scope > * { padding: 0 }\n\\`);\nreturn html\\`<div class=\"\\${namespace}\">\n  \\${style}\n  <span> text ...\n\\`;\n`,\n})\n)});\n  main.variable(observer(\"scopedStyle\")).define(\"scopedStyle\", [\"html\"], function(html){return(\nfunction scopedStyle(scope, css) {\n  const style = html`<style>`;\n  style.textContent = css.replace(/\\:scope\\b/g, scope); \n  return style;\n}\n)});\n  main.variable(observer()).define([\"signature\",\"getPinnedSlug\"], function(signature,getPinnedSlug){return(\nsignature(getPinnedSlug)\n)});\n  main.variable(observer(\"getPinnedSlug\")).define(\"getPinnedSlug\", [\"html\"], function(html){return(\nfunction getPinnedSlug({name = null, parseVersion = 'v1'} = {}) {\n  const getLines = async (route, rtVersion, lines) => {\n    return fetch(`https://api.observablehq.com/${route}.js?v=${rtVersion}`)\n      .then(response => response.text())\n      .catch(e => null)\n      .then(t => t == null ? [] : t.split('\\n', lines + 1).slice(0, lines));\n  }\n  const parsers = {\n    v1: route => getLines(route, 1, 4).then(ln => {\n          const name = ln[0].slice('// URL: https://observablehq.com/'.length).replace(/^d\\//, '');\n          const version = ln[3].slice('// Version: '.length);\n          return `${name}@${version}`;\n        }),\n    v3: route => getLines(route, 3, 1).then(ln => {\n          return ln[0].slice('// https://observablehq.com/'.length).replace(/^d\\//, '');\n        }),\n  };\n  \n  try {\n    const route = name != null\n      ? name.replace(/^(?!@)/, 'd/')\n      : html`<a href>`.pathname.match(/^\\/(d\\/[a-f0-9]{16}|@[^\\/]+\\/[^@].*?)(?:$|\\/)/)[1];\n    return parsers[parseVersion](route).catch(e => null);\n  }\n  catch(e) {\n    return null;\n  }  \n}\n)});\n  main.variable(observer()).define([\"signature\"], function(signature){return(\nsignature('PINNED', {\n  name: 'PINNED',\n  description: 'Notebook slug, automatically pinned to the most recent version of the importing notebook.',\n  example: `md\\`You can import my notebook this way:\n\\\\\\`\\\\\\`\\\\\\`javascript\nimport {foo} from \"\\${PINNED}\"\n\\\\\\`\\\\\\`\\\\\\`\\`\n`\n})\n)});\n  main.variable(observer(\"PINNED\")).define(\"PINNED\", [\"getPinnedSlug\"], function(getPinnedSlug){return(\ngetPinnedSlug()\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Internals`\n)});\n  main.variable(observer(\"readChunks\")).define(\"readChunks\", function(){return(\nasync function readChunks(reader, options = {}) {\n  const { separator = 0x0A, limit = Infinity} = options;\n  const merge = (a, b) => {\n    const c = new Uint8Array(a.length + b.length);\n    return c.set(a, 0), c.set(b, a.length), c;\n  }\n  \n  const lines = [];\n  let tail = new Uint8Array();\n  \n  const next = () => {\n    return reader.read().then(({done, value}) => {\n      let i = -1, o = 0;\n      if(value) {\n        console.log('chunk size', value.length);\n        while(++i < value.length) {\n          if(value[i] === separator) {\n            lines.push(merge(tail, value.slice(o, i)));\n            if(lines.length >= limit) {\n              reader.cancel();\n              return lines;\n            }\n            o = i + 1;\n          }\n        }\n        tail = value.slice(o);\n      }\n      \n      return !done ? next() : (lines.push(tail), lines);\n    });\n  };\n  return next();\n}\n)});\n  main.variable(observer(\"PINNED_LIB\")).define(\"PINNED_LIB\", [\"getPinnedSlug\"], function(getPinnedSlug){return(\ngetPinnedSlug({name: '691ae3b95f02db79'})\n)});\n  main.variable(observer(\"viewof RUN_TESTS\")).define(\"viewof RUN_TESTS\", [\"deprecateImport\",\"viewof _dep_RUN_TESTS\"], function(deprecateImport,$0){return(\ndeprecateImport($0, 'RUN_TESTS', false)\n)});\n  main.variable(observer(\"RUN_TESTS\")).define(\"RUN_TESTS\", [\"Generators\", \"viewof RUN_TESTS\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`---\n## Deprecations\n`\n)});\n  main.variable(observer(\"deprecateImport\")).define(\"deprecateImport\", [\"PINNED\",\"PINNED_LIB\"], function(PINNED,PINNED_LIB){return(\nfunction deprecateImport(target, name, nulled = true, source = '3d9d1394d858ca97') {\n  // This notebook.\n  if(PINNED && PINNED === PINNED_LIB) return nulled ? undefined : target;\n  \n  console.warn(`${name} has been moved. Import it from \"${source}\".`);\n  return target;\n}\n)});\n  const child1 = runtime.module(define1);\n  main.import(\"code\", \"_dep_code\", child1);\n  main.import(\"signature\", \"_dep_signature\", child1);\n  main.import(\"signature_theme\", \"_dep_signature_theme\", child1);\n  main.import(\"viewof RUN_TESTS\", \"viewof _dep_RUN_TESTS\", child1);\n  main.import(\"RUN_TESTS\", \"_dep_RUN_TESTS\", child1);\n  main.import(\"createStepper\", \"_dep_createStepper\", child1);\n  main.import(\"defaultTestRunner\", \"_dep_defaultTestRunner\", child1);\n  main.import(\"defaultSignatureParser\", \"_dep_defaultSignatureParser\", child1);\n  main.variable(observer(\"signature\")).define(\"signature\", [\"deprecateImport\",\"_dep_signature\"], function(deprecateImport,_dep_signature){return(\ndeprecateImport(_dep_signature, 'signature', false)\n)});\n  main.variable(observer(\"code\")).define(\"code\", [\"deprecateImport\",\"_dep_code\"], function(deprecateImport,_dep_code){return(\ndeprecateImport(_dep_code, 'code', false)\n)});\n  main.variable(observer(\"signature_theme\")).define(\"signature_theme\", [\"deprecateImport\",\"_dep_signature_theme\"], function(deprecateImport,_dep_signature_theme){return(\ndeprecateImport(_dep_signature_theme, 'signature_theme')\n)});\n  main.variable(observer(\"createStepper\")).define(\"createStepper\", [\"deprecateImport\",\"_dep_createStepper\"], function(deprecateImport,_dep_createStepper){return(\ndeprecateImport(_dep_createStepper, 'createStepper')\n)});\n  main.variable(observer(\"defaultTestRunner\")).define(\"defaultTestRunner\", [\"deprecateImport\",\"_dep_defaultTestRunner\"], function(deprecateImport,_dep_defaultTestRunner){return(\ndeprecateImport(_dep_defaultTestRunner, 'defaultTestRunner')\n)});\n  main.variable(observer(\"defaultSignatureParser\")).define(\"defaultSignatureParser\", [\"deprecateImport\",\"_dep_defaultSignatureParser\"], function(deprecateImport,_dep_defaultSignatureParser){return(\ndeprecateImport(_dep_defaultSignatureParser, 'defaultSignatureParser')\n)});\n  return main;\n}\n","// https://observablehq.com/@rreusser/regl-tools@1656\nimport define1 from \"./d0ffd921b8188ba9@41.js\";\nimport define2 from \"./b1c1bcfaa4edd969@128.js\";\nimport define3 from \"./2ef1e084af5636f7@98.js\";\nimport define4 from \"./2f20d5b55f4d0b31@205.js\";\nimport define5 from \"./691ae3b95f02db79@1157.js\";\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`# regl-tools\n\nThis notebook implements a number of helper methods for simple regl, canvas and SVG plots in Observable. The goal is simple: to the extent reasonably possible, creating plots should contain information about the particular plot, not about setup and rendering.\n\nTo this end, it uses \\`d3\\` scales and makes some opinionated choices about how to represent things, though the result is hopefully general enough that it's more useful than constraining.`\n)});\n  main.variable(observer()).define([\"html\",\"md\",\"PINNED\"], function(html,md,PINNED){return(\nhtml`<div style=\"border:1px solid black; border-radius: 3px; padding: 10px; max-width:640px;\"><em style=\"color:#c22\">NOTE:</em> I'm learning Observable! You should <a href=\"https://observablehq.com/@bryangingechen/version-pinning-for-notebooks\">pin the version</a> if you use any functions herein:\n\n${md`~~~javascript\nimport { reglCanvas } from '${PINNED}'\n~~~`}\n\nThis notebook is highly subject to changes and regrets. My biggest current regrets are:\n${md`\n- It should use x0, y0, x1, y1 for the viewport. Not margins. Much more portable, except for the fact that you have to carry around the DPI along with it.\n- ~~It should add a WebGL context to an SVG as a foreign object, if possible. The reason I focused on stacking them is that WebGL contexts are limited and sooner or later you make subplots or layers and regret needing many WebGL contexts in a single plot. I was trying to make heavy use of viewports and scissoring for the sake of efficiency and minimizing contexts, but I could still do that and play the SVG game a bit better.~~\n- Update: WebGL *does not* play well with SVG as a foreign object. There are some really obscure rendering bugs that prevent WebGL contexts from obeying last-on-top SVG-style ordering. My conclusion is that it is *not*, in fact, wise to go overboard with fanciness and instead to just layer the elements.\n`}</span>`\n)});\n  const child1 = runtime.module(define1);\n  main.import(\"createReglCamera\", child1);\n  main.import(\"createInteractions\", child1);\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## reglCanvas\n\nCreate a [regl](https:/github.com/regl-project/regl) canvas using syntax which roughly mirrors that of [@observablehq/stdlib's DOM.context2d method](https://github.com/observablehq/stdlib).`\n)});\n  main.variable(observer(\"reglCanvas\")).define(\"reglCanvas\", [\"createREGL\"], function(createREGL){return(\nfunction reglCanvas (width, height, dpi, reglOptions) {\n  dpi = dpi === undefined ? devicePixelRatio : dpi;\n  reglOptions = reglOptions || {}\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = dpi * width;\n  canvas.height = dpi * height;\n  canvas.style.width = width + \"px\";\n  const regl = createREGL(Object.assign({}, reglOptions, {pixelRatio: dpi, canvas}));\n  canvas.value = regl;\n  canvas.__reglConfig = {dpi, reglOptions}\n  return canvas;\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## reusableReglCanvas`\n)});\n  main.variable(observer(\"reusableReglCanvas\")).define(\"reusableReglCanvas\", [\"width\",\"reglCanvas\"], function(width,reglCanvas){return(\nfunction reusableReglCanvas (existingCanvas, config) {\n  var dpi = config.dpi === undefined ? devicePixelRatio : config.dpi\n  var reglOptions = config.reglOptions || {}\n  var newConfig = {dpi, reglOptions}\n  var needsNewContext = !existingCanvas || \n      JSON.stringify(newConfig) !== JSON.stringify(existingCanvas.__reglConfig)\n  \n  if (!needsNewContext) {\n    existingCanvas.width = Math.floor(config.width * dpi)\n    existingCanvas.height = Math.floor(config.height * dpi)\n    existingCanvas.style.width = `${width}px`\n    return existingCanvas\n  }\n  \n  if (existingCanvas && existingCanvas.value && existingCanvas.value.destroy) {\n    existingCanvas.value.destroy()\n    delete existingCanvas.value\n  }\n  \n  return reglCanvas(config.width, config.height, dpi, reglOptions)\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## reglCanvasWithOptions\n\nA convenience function to reduce boilerplate by currying arguments. To create a function which strictly accepts \\`width\\`, \\`height\\`, and \\`dpi\\`, e.g.\n\n\\`\\`\\`js\nfn = (width, height, dpi) => reglCanvas(width, height, dpi, { ...reglOptions })\n\\`\\`\\`\n\nyou may instead write\n\n\\`\\`\\`js\nfn = reglCanvasWithOptions({ ...reglOptions })\n\\`\\`\\`\n`\n)});\n  main.variable(observer(\"reglCanvasWithOptions\")).define(\"reglCanvasWithOptions\", [\"reglCanvas\"], function(reglCanvas){return(\nfunction reglCanvasWithOptions (reglOptions) {\n  return function (width, height, dpi) {\n    return reglCanvas(width, height, dpi, reglOptions);\n  }\n}\n)});\n  main.variable(observer(\"getOrAttachReglFO\")).define(\"getOrAttachReglFO\", [\"createREGL\"], function(createREGL){return(\nfunction getOrAttachReglFO (svg, width, height, dpi, reglOptions) {\n  let fo = svg.selectAll('.regl-canvas')\n  .data([null]).join(enter => enter.append('foreignObject'))\n    .attr('class', 'regl-canvas')\n    .attr('width', width)\n    .attr('height', height)\n    //.style('position', 'relative')\n    //.style('z-index', -1)\n\n  fo.selectAll('canvas')\n    .data([null]).join(enter => enter.append('xhtml:canvas'))\n    .attr('width', width * dpi)\n    .attr('height', height * dpi)\n    .style('width', width + 'px')\n    .style('height', height + 'px')\n\n  const reglCanvas = fo.select('canvas').node()\n  const regl = reglCanvas.value = reglCanvas.value || createREGL(Object.assign(reglOptions || {}, {\n    canvas: reglCanvas,\n    pixelRatio: dpi,\n  }))\n  regl.data = regl.data || {}\n  return reglCanvas;\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## createLayerStack\n\nCreate a stack of layers (first on bottom). Each item receives width, height, and dpi. \\`layerConstructors\\` is either an array or an object of constructors for each layer. If an array, the returned layers are referenced by index. If an object, stable ordering of keys is assumed and layers may be referenced by name.`\n)});\n  main.variable(observer(\"createLayerStack\")).define(\"createLayerStack\", [\"Element\"], function(Element){return(\nfunction createLayerStack (w, h, dpi, layerConstructors) {\n  w = Math.floor(w);\n  h = Math.floor(h);\n  dpi = dpi === undefined ? devicePixelRatio : dpi;\n  const dpiWidth = Math.floor(w * dpi);\n  const dpiHeight = Math.floor(h * dpi);\n  const container = document.createElement('div');\n  container.style.position = \"relative\";\n  container.style.width = w + 'px';\n  container.style.height = h + 'px';\n  \n  function createLayer(ctor, i) {\n    let element;\n    let value = ctor(w, h, dpi);\n    if (value instanceof Element) {\n      element = value;\n      value = element.value || element;\n    } else {\n      element = value.canvas || value;\n    }\n    element.style.position = \"absolute\";\n    element.style.top = 0\n    element.style.left = 0;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.zIndex = i;\n    container.appendChild(element);\n    return value;\n  }\n  \n  let layers;\n  if (Array.isArray(layerConstructors)) {\n    layers = layerConstructors.map(createLayer);\n  } else {\n    let layerNames = Object.keys(layerConstructors);\n    layers = {};\n    layerNames.forEach((name, i) => {\n      layers[name] = createLayer(layerConstructors[name], i);\n    })\n  }\n  \n  return {\n    layers,\n    container,\n    dpiWidth,\n    dpiHeight,\n    dpi,\n    width: w,\n    height: h\n  };\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## createReglViewportConfiguration\n\nConfigure a regl viewport independent of pixel ratio given a layer stack. Returns a \\`regl\\` command which may be invoked with a \\`viewport\\` and a \\`callback\\`.`\n)});\n  main.variable(observer(\"createReglViewportConfiguration\")).define(\"createReglViewportConfiguration\", [\"mat3create\"], function(mat3create){return(\nfunction createReglViewportConfiguration (regl) {\n  const viewport3 = mat3create();\n  \n  let command = regl({\n    scissor: {\n      enable: true,\n      box: { \n        x: (ctx, props) => ctx.pixelRatio * props.margin.l,\n        y: (ctx, props) => ctx.pixelRatio * props.margin.b,\n        width: (ctx, props) => ctx.framebufferWidth - ctx.pixelRatio * (props.margin.r + props.margin.l),\n        height: (ctx, props) => ctx.framebufferHeight - ctx.pixelRatio * (props.margin.t + props.margin.b)\n      }\n    },\n    viewport: {\n      x: (ctx, props) => ctx.pixelRatio * props.margin.l,\n      y: (ctx, props) => ctx.pixelRatio * props.margin.b,\n      width: (ctx, props) => ctx.framebufferWidth - ctx.pixelRatio * (props.margin.r + props.margin.l),\n      height: (ctx, props) => ctx.framebufferHeight - ctx.pixelRatio * (props.margin.t + props.margin.b)\n    },\n    uniforms: {\n      viewportResolution: (ctx, props) => [ctx.viewportWidth, ctx.viewportHeight],\n      framebufferResolution: ctx => [ctx.framebufferWidth, ctx.framebufferHeight],\n      inverseViewportResolution: (ctx, props) => [1 / ctx.viewportWidth, 1 / ctx.viewportHeight],\n      inverseFramebufferResolution: ctx => [1 / ctx.framebufferWidth, 1 / ctx.framebufferHeight],\n    }\n  });\n  return function (viewport, callback) {\n    command(viewport, callback);\n  }\n}\n)});\n  main.variable(observer()).define([\"md\",\"tex\"], function(md,tex){return(\nmd`## createReglLinearScaleConfiguration\n\nCreate a regl command which adds 2d (${tex`3 \\times 3`}) and and 3d (${tex`4 \\times 4`}) homogeneous transformation matrices to \\`regl\\` context and uniforms. Must be invoked with two \\`d3\\` \\`linearScales\\` and a \\`callback\\`.`\n)});\n  main.variable(observer(\"createReglLinearScaleConfiguration\")).define(\"createReglLinearScaleConfiguration\", [\"mat3create\",\"mat4create\",\"mat3fromLinearScales\",\"mat3invert\",\"mat4fromMat3\"], function(mat3create,mat4create,mat3fromLinearScales,mat3invert,mat4fromMat3){return(\nfunction createReglLinearScaleConfiguration (regl) {\n  const matrices = {\n    view3: mat3create(),\n    inverseView3: mat3create(),\n    view: mat4create(),\n    inverseView: mat4create(),\n  };\n  const command = regl({\n    context: {\n      view3: regl.prop('view3'),\n      inverseView3: regl.prop('inverseView3'),\n      view: regl.prop('view'),\n      inverseView: regl.prop('inverseView')\n    },\n    uniforms: {\n      view3: regl.prop('view3'),\n      inverseView3: regl.prop('inverseView3'),\n      view: regl.prop('view'),\n      inverseView: regl.prop('inverseView')\n    },\n  });\n  \n  return function (xScale, yScale, cb) {\n    mat3fromLinearScales(matrices.view3, xScale, yScale);\n    mat3invert(matrices.inverseView3, matrices.view3);\n    mat4fromMat3(matrices.view, matrices.view3);\n    mat4fromMat3(matrices.inverseView, matrices.inverseView3);\n    command(matrices, cb);\n  }\n}\n)});\n  main.variable(observer()).define([\"md\",\"tex\"], function(md,tex){return(\nmd`## createReglMap\n\nCreate a \\`regl\\` command to configure a single triangle covering the whole viewport. Accepts options with an optional \\`transform\\` parameter defining the name of a uniform to use as a 3d homogeneous (${tex`4 \\times 4`}) matrix uniform to be applied in the vertex shader.`\n)});\n  main.variable(observer(\"createReglMap\")).define(\"createReglMap\", function(){return(\nfunction (regl, opts) {\n  opts = opts || {};\n  let transform = opts.transform === undefined ? 'inverseView' : opts.transform;\n  return regl({\n    vert: `\n      precision highp float;\n      ${transform ? `uniform mat4 ${transform};` : ''}\n      attribute vec2 aUV;\n      varying vec2 xy;\n      void main () {\n        xy = ${transform ? `(${transform} * vec4(aUV, 0, 1)).xy` : 'aUV'};\n        gl_Position = vec4(aUV, 0, 1);\n      }`,\n    attributes: {aUV: [-4, -4, 4, -4, 0, 4]},\n    depth: {enable: false},\n    primitive: 'triangles',\n    count: 3,\n  })\n}\n)});\n  main.variable(observer(\"mat3ViewportFromLinearScales\")).define(\"mat3ViewportFromLinearScales\", function(){return(\nfunction mat3ViewportFromLinearScales (out, xScale, yScale) {\n  let xRange = xScale.range();\n  let yRange = yScale.range();\n  \n  let w = xRange[1] - xRange[0];\n  let h = yRange[0] - yRange[1];\n  out[0] = 0.5 * w;\n  out[1] = 0;\n  out[2] = 0;\n\n  out[3] = 0;\n  out[4] = -0.5 * h;\n  out[5] = 0;\n\n  out[6] = 0.5 * w + xRange[0];\n  out[7] = 0.5 * h + yRange[1];\n  out[8] = 1;\n  \n  return out;\n}\n)});\n  main.variable(observer(\"mat3fromLinearScales\")).define(\"mat3fromLinearScales\", function(){return(\nfunction mat3fromLinearScales (out, xScale, yScale) {\n  let xDomain = xScale.domain()\n  let yDomain = yScale.domain()\n  \n  let xs = 2 / (xDomain[1] - xDomain[0])\n  let ys = 2 / (yDomain[1] - yDomain[0])\n  \n  out[0] = xs\n  out[1] = 0\n  out[2] = 0\n  \n  out[3] = 0\n  out[4] = ys\n  out[5] = 0\n  \n  out[6] = -1 - xs * xDomain[0]\n  out[7] = -1 - ys * yDomain[0]\n  out[8] = 1\n  \n  return out;\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## createViewport\n\nCreate a simple representation of a viewport`\n)});\n  main.variable(observer(\"createViewport\")).define(\"createViewport\", function(){return(\nfunction createViewport (opts, margin) {\n  return {\n    width: opts.width,\n    height: opts.height,\n    dpi: opts.dpi,\n    margin: Object.assign({t: 0, r: 0, b: 0, l: 0}, margin || {}),\n  };\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## viewportAxes\n\nRender basic SVG axes given a viewport and two \\`d3\\` scales.`\n)});\n  main.variable(observer(\"viewportAxes\")).define(\"viewportAxes\", [\"d3\"], function(d3){return(\nfunction viewportAxes (viewport, xScale, yScale, opts) {\n  opts = opts || {};\n  viewport.margin = viewport.margin === undefined ? {t: 0, r: 0, b: 0, l: 0} : viewport.margin;\n  opts.xLabelSpacing = opts.xLabelSpacing === undefined ? 80 : opts.xLabelSpacing\n  opts.yLabelSpacing = opts.yLabelSpacing === undefined ? 80 : opts.yLabelSpacing\n  let xAxis = opts.xAxis === undefined ? d3.axisBottom : opts.xAxis\n  let yAxis = opts.yAxis === undefined ? d3.axisLeft : opts.yAxis\n  let xRange = xScale.range();\n  let yRange = xScale.range();\n  viewport.width = viewport.width === undefined ? (xRange[1] - xRange[0]) : viewport.width;\n  viewport.height = viewport.height === undefined ? (yRange[1] - yRange[0]) : viewport.height;\n  return function (selection) {\n    let xa = selection.select('g.x.axis');\n    if (xa.empty()) {\n      xa = selection.append(\"g\").attr(\"class\", \"x axis\")\n    }\n    xa.attr(\"transform\", \"translate(0,\" + (viewport.height - viewport.margin.b) + \")\")\n      .call(xAxis(xScale)\n        .ticks(Math.floor((viewport.width - viewport.margin.l - viewport.margin.r) / opts.xLabelSpacing)))\n\n    \n    let ya = selection.select('g.y.axis');\n    if (ya.empty()) {\n      ya = selection.append(\"g\").attr(\"class\", \"y axis\")\n    }\n    ya.attr('transform', 'translate(' + viewport.margin.l + ', 0)')\n      .call(yAxis(yScale)\n        .ticks(Math.floor((viewport.height - viewport.margin.t - viewport.margin.b) / opts.yLabelSpacing)))\n    \n    return selection;\n  };\n}\n)});\n  main.variable(observer(\"constrainLinearScaleAspectRatio\")).define(\"constrainLinearScaleAspectRatio\", function(){return(\nfunction constrainLinearScaleAspectRatio (newScale, refScale, aspectRatio) {\n  let newDomain = newScale.domain();\n  let refDomain = refScale.domain();\n  let newRange = newScale.range();\n  let refRange = refScale.range();\n  let newDomainLength = newDomain[1] - newDomain[0];\n  let newRangeLength = newRange[1] - newRange[0];\n  let refDomainLength = refDomain[1] - refDomain[0];\n  let refRangeLength = refRange[1] - refRange[0];\n  let refRes = refRangeLength / refDomainLength;\n  let newRes = newRangeLength / newDomainLength;\n  let currentAspect = Math.abs(newRes / refRes);\n  let newDomainCenter = 0.5 * (newDomain[0] + newDomain[1]);\n  newScale.domain([\n    newDomainCenter - newDomainLength * 0.5 * currentAspect / aspectRatio,\n    newDomainCenter + newDomainLength * 0.5 * currentAspect / aspectRatio\n  ]);\n  return newScale;\n}\n)});\n  main.variable(observer(\"persistentZoom\")).define(\"persistentZoom\", [\"d3\"], function(d3){return(\nfunction persistentZoom (xScale, yScale, originalXScale, originalYScale, callback) {\n  return d3.zoom().on('zoom', function () {\n    let range\n    let t = d3.event.transform;\n\n    range = xScale.range().map(t.invertX, t);\n    xScale.domain(originalXScale.domain())\n    xScale.domain(range.map(xScale.invert, xScale));\n\n    range = yScale.range().map(t.invertY, t);\n    yScale.domain(originalYScale.domain())\n    yScale.domain(range.map(yScale.invert, yScale));\n  });\n}\n)});\n  main.variable(observer(\"createTextureLookupTable\")).define(\"createTextureLookupTable\", function(){return(\nfunction createTextureLookupTable(w, h, stride) {\n  stride = stride || 2;\n  var n = w * h * stride;\n\n  var out = new Float32Array(n);\n\n  for (var i = 0, iStride = 0; iStride < n; i++, iStride += stride) {\n    out[iStride] = ((i % w) + 0.5) / w;\n    out[iStride + 1] = (((i / w) | 0) + 0.5) / h;\n  }\n\n  return out;\n}\n)});\n  main.variable(observer(\"canWriteToFBOOfType\")).define(\"canWriteToFBOOfType\", function(){return(\nfunction canWriteToFBOOfType(regl, type) {\n  type = type || 'float';\n  if (!regl.hasExtension(`oes_texture_${type.replace(' ', '_')}`)) return false;\n\n  try {\n    var floatFBO = regl.framebuffer({\n      colorType: type,\n      colorFormat: 'rgba',\n      radius: 1\n    });\n\n    var uintFBO = regl.framebuffer({\n      colorType: 'uint8',\n      colorFormat: 'rgba',\n      radius: 1\n    });\n\n    var draw = regl({\n      vert: `\n      precision highp float;\n      attribute vec2 aXY;\n      void main () {\n        gl_Position = vec4(aXY, 0, 1);\n        gl_PointSize = 1.0;\n      }`,\n      frag: `\n      precision highp float;\n      void main () {\n        gl_FragColor = vec4(1, 0, 0, 1);\n      }`,\n      primitive: 'points',\n      count: 1,\n      attributes: {\n        aXY: [0, 0]\n      },\n      depth: { enable: false }\n    });\n\n    var transfer = regl({\n      vert: `\n      precision highp float;\n      attribute vec2 aXY;\n      void main () {\n        gl_Position = vec4(aXY, 0, 1);\n      }`,\n      frag: `\n      precision highp float;\n      void main () {\n        gl_FragColor = vec4(1, 0, 0, 1);\n      }`,\n      attributes: {\n        aXY: [-4, -4, 4, -4, 0, 4]\n      },\n      count: 3,\n      primitive: 'triangles',\n      depth: { enable: false }\n    });\n\n    draw();\n    var data;\n    uintFBO.use(() => {\n      transfer();\n      data = regl.read();\n    });\n\n    return data[0] !== 0 && data[1] === 0 && data[2] === 0 && data[3] !== 0;\n  } catch (e) {\n    return false;\n  }\n}\n)});\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## Sample Usage`\n)});\n  main.variable(observer(\"stack\")).define(\"stack\", [\"createLayerStack\",\"width\",\"height\",\"reglCanvas\",\"DOM\"], function(createLayerStack,width,height,reglCanvas,DOM){return(\ncreateLayerStack(width, height, devicePixelRatio, {\n  regl: (w, h, dpi) => reglCanvas(w, h, dpi),\n  canvas: DOM.context2d,\n  svg: DOM.svg\n})\n)});\n  main.variable(observer(\"viewport\")).define(\"viewport\", [\"createViewport\",\"stack\"], function(createViewport,stack){return(\ncreateViewport(stack, {t: 10, r: 15, b: 22, l: 37})\n)});\n  main.variable(observer()).define([\"md\",\"html\"], function(md,html){return(\nmd`The view below shows a ${html`<span style=\"color:red\"><code>regl</code> WebGL context</span>`}, a ${html`<span style=\"color:green\">HTML canvas</span>`}, and a ${html`<span style=\"color:blue\">SVG element</span>`} stacked upon each other and living together in harmony.`\n)});\n  main.variable(observer()).define([\"stack\",\"d3\",\"viewport\",\"constrainLinearScaleAspectRatio\",\"viewportAxes\",\"configureViewport\",\"configureLinearScales\",\"drawStrip\",\"mat3multiply\",\"mat3create\",\"mat3ViewportFromLinearScales\",\"mat3fromLinearScales\",\"vec2transformMat3\"], function*(stack,d3,viewport,constrainLinearScaleAspectRatio,viewportAxes,configureViewport,configureLinearScales,drawStrip,mat3multiply,mat3create,mat3ViewportFromLinearScales,mat3fromLinearScales,vec2transformMat3)\n{\n  let regl = stack.layers.regl;\n  let ctx = stack.layers.canvas;\n  let svg = d3.select(stack.layers.svg);\n  \n  let xScale = d3.scaleLinear()\n    .domain([-3, 3])\n    .range([viewport.margin.l, viewport.width - viewport.margin.r])\n    .clamp(true);\n  \n  let yScale = constrainLinearScaleAspectRatio(\n    d3.scaleLinear()\n      .domain([-1.5, 1.5])\n      .range([viewport.height - viewport.margin.b, viewport.margin.t])\n      .clamp(true),\n    xScale, 1);\n  \n  let update;\n  \n  let points = [[1, -1], [1, 1], [-1, -1], [-1, 1]];\n  let pointsBuffer = regl.buffer(points);\n  \n  svg.selectAll('g.axes').remove();\n  let axes = svg.append('g')\n    .attr('class', 'axes')\n    .call(viewportAxes(viewport, xScale, yScale))\n  \n  let g = svg.selectAll('g.handles').remove();\n  g = svg.selectAll('g.handles')\n    .data([points])\n    .enter().append('g')\n      .attr('class', 'handles');\n \n  let handles = g.selectAll('circle')\n    .data(d => d).enter().append('circle')\n      .attr('cursor', 'move')\n      .attr('r', 5)\n      .attr('stroke-width', 30)\n      .attr('stroke', 'transparent')\n      .attr('fill', 'blue')\n      .call(d3.drag()\n        .on(\"drag\", (d) => {\n          d[0] = xScale.invert(d3.event.x);\n          d[1] = yScale.invert(d3.event.y);\n          update();\n        }));\n  \n  update = function update () {\n    handles\n      .attr('cx', data => xScale(data[0]))\n      .attr('cy', data => yScale(data[1]));\n    \n    pointsBuffer.subdata(points)\n    regl.poll();\n    regl.clear({color: [1, 1, 1, 1]})\n    configureViewport(viewport, ({viewport3}) => {\n      configureLinearScales(xScale, yScale, ({view3}) => {\n        drawStrip({points: pointsBuffer, count: points.length});\n      })\n    })\n    \n    let ctxTransform = mat3multiply(mat3create(), \n      mat3ViewportFromLinearScales(mat3create(), xScale, yScale),\n      mat3fromLinearScales(mat3create(), xScale, yScale));\n\n    ctx.clearRect(0, 0, stack.width, stack.height);\n    ctx.beginPath();\n    ctx.lineWidth = 4;\n    ctx.strokeStyle = '#3a3';\n    ctx.moveTo.apply(ctx, vec2transformMat3([], points[1], ctxTransform));\n    ctx.lineTo.apply(ctx, vec2transformMat3([], points[2], ctxTransform));\n    ctx.moveTo.apply(ctx, vec2transformMat3([], points[3], ctxTransform));\n    ctx.lineTo.apply(ctx, vec2transformMat3([], points[0], ctxTransform));\n    ctx.stroke();\n  }\n  \n  update();\n    \n  yield stack.container\n}\n);\n  main.variable(observer(\"configureLinearScales\")).define(\"configureLinearScales\", [\"createReglLinearScaleConfiguration\",\"regl\"], function(createReglLinearScaleConfiguration,regl){return(\ncreateReglLinearScaleConfiguration(regl)\n)});\n  main.variable(observer(\"regl\")).define(\"regl\", [\"stack\"], function(stack){return(\nstack.layers.regl\n)});\n  main.variable(observer(\"height\")).define(\"height\", [\"width\"], function(width){return(\nwidth * 0.5\n)});\n  main.variable(observer(\"configureViewport\")).define(\"configureViewport\", [\"createReglViewportConfiguration\",\"regl\"], function(createReglViewportConfiguration,regl){return(\ncreateReglViewportConfiguration(regl)\n)});\n  main.variable(observer(\"drawStrip\")).define(\"drawStrip\", [\"regl\"], function(regl){return(\nregl({\n  vert: `\n    precision highp float;\n    uniform mat4 view;\n    attribute vec2 xy;\n    void main () {\n      gl_Position = view * vec4(xy, 0, 1);\n    }`,\n  frag: `\n    precision highp float;\n    void main () {\n      gl_FragColor = vec4(1.0, 0.8, 0.8, 1);\n    }`,\n  attributes: {\n    xy: regl.prop('points')\n  },\n  primitive: 'triangle strip',\n  depth: {enable: false},\n  count: regl.prop('count')\n})\n)});\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], function(require){return(\nrequire(\"d3@5\")\n)});\n  main.variable(observer(\"createREGL\")).define(\"createREGL\", [\"require\"], function(require){return(\nrequire(\"regl\")\n)});\n  const child2 = runtime.module(define2);\n  main.import(\"mat4create\", child2);\n  main.import(\"mat4fromMat3\", child2);\n  const child3 = runtime.module(define3);\n  main.import(\"mat3create\", child3);\n  main.import(\"mat3invert\", child3);\n  main.import(\"mat3multiply\", child3);\n  const child4 = runtime.module(define4);\n  main.import(\"vec2transformMat3\", child4);\n  const child5 = runtime.module(define5);\n  main.import(\"PINNED\", child5);\n  main.variable(observer()).define([\"md\"], function(md){return(\nmd`## License\n\nThe code in this notebook is MIT Licensed.`\n)});\n  main.variable(observer(\"LICENSE\")).define(\"LICENSE\", function(){return(\n\"mit\"\n)});\n  return main;\n}\n","// https://observablehq.com/@nicola/fake-transparency-for-3d-surfaces@748\nimport define1 from './a82f06f54ea1d92b@1656.js'\n\nexport default function define (runtime, observer) {\n  const main = runtime.module()\n  main\n    .variable(observer('viewof regl'))\n    .define('viewof regl', ['createREGL', 'invalidation'], function (\n      createREGL,\n      invalidation\n    ) {\n      console.log('reloaded')\n      const pixelRatio = devicePixelRatio\n      const w = 280\n      const h = 500\n      const canvas = document.createElement('canvas')\n      canvas.width = Math.floor(w * pixelRatio)\n      canvas.height = Math.floor(h * pixelRatio)\n      canvas.style.width = `${120}px`\n      canvas.style.height = `${125}px`\n      const regl = createREGL({\n        canvas,\n        pixelRatio,\n        extensions: ['OES_standard_derivatives'],\n        optionalExtensions: ['OES_element_index_uint']\n      })\n      canvas.value = regl\n      invalidation.then(() => regl.destroy())\n      return canvas\n    })\n  main\n    .variable(observer('regl'))\n    .define('regl', ['Generators', 'viewof regl'], (G, _) => G.input(_))\n  main.variable(observer('time')).define('time', function () {\n    return 3\n  })\n  main.variable(observer()).define(function () {\n    return window.scrollY\n  })\n  main.variable(observer('opacity')).define('opacity', function () {\n    return 0.85\n  })\n  main.variable(observer('passes')).define('passes', function () {\n    return ['Solid surface pass', 'Fake transparency pass']\n  })\n  main.variable(observer('gridOpacity')).define('gridOpacity', function () {\n    return 0\n  })\n  main.variable(observer('gridWidth')).define('gridWidth', function () {\n    return 0.5\n  })\n  main\n    .variable(observer('cartoonEdgeWidth'))\n    .define('cartoonEdgeWidth', function () {\n      return 2.5\n    })\n  main\n    .variable(observer('cartoonEdgeOpacity'))\n    .define('cartoonEdgeOpacity', function () {\n      return 1\n    })\n  main.variable(observer('specular')).define('specular', function () {\n    return 1\n  })\n  main\n    .variable(observer())\n    .define(\n      [\n        'camera',\n        'buffers',\n        'opacity',\n        'specular',\n        'cartoonEdgeWidth',\n        'cartoonEdgeOpacity',\n        'gridWidth',\n        'gridOpacity',\n        'regl',\n        'setUniforms',\n        'passes',\n        'drawMesh',\n        'invalidation'\n      ],\n      function (\n        camera,\n        buffers,\n        opacity,\n        specular,\n        cartoonEdgeWidth,\n        cartoonEdgeOpacity,\n        gridWidth,\n        gridOpacity,\n        regl,\n        setUniforms,\n        passes,\n        drawMesh,\n        invalidation\n      ) {\n        camera.taint()\n        const meshProps = {\n          buffers,\n          opacity,\n          specular,\n          cartoonEdgeWidth,\n          cartoonEdgeOpacity,\n          gridWidth,\n          gridOpacity\n        }\n        const frame = regl.frame(() => {\n          camera(({ dirty }) => {\n            if (!dirty) return\n            setUniforms(() => {\n              regl.clear({ color: [1, 1, 1, 1] })\n\n              // Draw the solid surface\n              if (~passes.indexOf('Solid surface pass')) {\n                drawMesh({ ...meshProps, solidPass: true })\n              }\n\n              // The second pass with only the wireframe and edges\n              if (~passes.indexOf('Fake transparency pass')) {\n                drawMesh({ ...meshProps, solidPass: false })\n              }\n            })\n          })\n        })\n        invalidation.then(() => frame.cancel())\n      }\n    )\n  main\n    .variable(observer('createREGL'))\n    .define('createREGL', ['require'], function (require) {\n      return require('regl')\n    })\n  main\n    .variable(observer('mesh'))\n    .define('mesh', ['meshFromFunction'], function (meshFromFunction) {\n      return meshFromFunction((u, v) => [u, v], {\n        resolution: [151, 151],\n        uDomain: [0, 1.5],\n        vDomain: [-Math.PI, Math.PI],\n        uPeriodic: false,\n        vPeriodic: true\n      })\n    })\n  main\n    .variable(observer('drawMesh'))\n    .define('drawMesh', ['regl'], function (regl) {\n      return regl({\n        vert: `\n    precision highp float;\n    attribute vec2 uv;\n    uniform mat4 projection, view;\n    varying vec3 vPosition, vNormal;\n    varying vec2 vUV;\n    uniform float time;\n\n    // Our function!\n    vec3 f(vec2 uv) {\n      float r2 = dot(uv, uv);\n      float s = 8.0 * sqrt(r2);\n      float t = time * 4.0;\n      return vec3(\n        uv.x,\n        -4.0 / sqrt(t*t+ s * s),\n        uv.y\n      );\n    }\n\n    void main () {\n      vUV = uv.x * vec2(cos(uv.y), sin(uv.y));\n      vPosition = f(vUV);\n\n      // We differentiate the surface numerically to get the partial\n      // derivative wrt u and v, then take the cross product to get\n      // the surface normal.\n      float dx = 1e-2;\n      vec3 dpdu = f(vUV + vec2(dx, 0)) - vPosition;\n      vec3 dpdv = f(vUV + vec2(0, dx)) - vPosition;\n      vNormal = normalize(cross(dpdu, dpdv));\n\n      gl_Position = projection * view * vec4(vPosition, 1);\n    }\n  `,\n        frag: `\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n    varying vec3 vPosition, vNormal;\n    uniform vec3 eye;\n    uniform bool solidPass;\n    varying vec2 vUV;\n    uniform float pixelRatio, opacity, cartoonEdgeWidth, gridOpacity, specular, cartoonEdgeOpacity, gridWidth;\n\n    // This function implements a constant-width grid as a function of\n    // a two-dimensional input. This makes it possible to draw a grid\n    // which does not line up with the triangle edges.\n    // from: https://github.com/rreusser/glsl-solid-wireframe\n    float gridFactor (vec2 parameter, float width, float feather) {\n      float w1 = width - feather * 0.5;\n      vec2 d = fwidth(parameter);\n      vec2 looped = 0.5 - abs(mod(parameter, 1.0) - 0.5);\n      vec2 a2 = smoothstep(d * w1, d * (w1 + feather), looped);\n      return min(a2.x, a2.y);\n    }\n\n    void main () {\n      vec3 normal = normalize(vNormal);\n\n      // The dot product of the view direction and surface normal.\n      float vDotN = abs(dot(normal, normalize(vPosition - eye)));\n\n      // We divide vDotN by its gradient magnitude in screen space to\n      // give a function which goes roughly from 0 to 1 over a single\n      // pixel right at glancing angles. i.e. cartoon edges!\n      float cartoonEdge = smoothstep(0.75, 1.25, vDotN / fwidth(vDotN) / (cartoonEdgeWidth * pixelRatio));\n\n      // Combine the gridlines and cartoon edges\n      float grid = gridFactor(vUV * 10.0, 0.5 * gridWidth * pixelRatio, 0.5);\n      float combinedGrid = max(cartoonEdgeOpacity * (1.0 - cartoonEdge), gridOpacity * (1.0 - grid));\n\n      if (solidPass) {\n        // If the surface pass, we compute some shading\n        float shade = 0.2 + mix(1.2, specular * pow(vDotN, 3.0), 0.5);\n        vec3 colorFromNormal = (0.5 - (gl_FrontFacing ? 1.0 : -1.0) * 0.5 * normal);\n        vec3 baseColor = gl_FrontFacing ? vec3(12.0/255.0, 80.0/255.0, 255.0/255.0) : vec3(255.0/255.0, 116.0/255.0, 241.0/255.0);\n\n        vec3 color = shade * mix(\n            baseColor,\n            colorFromNormal,\n            0.0\n          );\n        // Apply the gridlines\n        color = mix(color, vec3(0), opacity * combinedGrid);\n        gl_FragColor = vec4(pow(color, vec3(0.454)), 1.0);\n      } else {\n        // If the wireframe pass, we just draw black lines with some alpha\n        gl_FragColor = vec4(\n          // To get the opacity to mix ~correctly, we use reverse-add blending mode\n          // so that white here shows up as black gridlines. This could be simplified\n          // by doing a bit more math to get the mixing right with just additive blending.\n          vec3(1),\n          (1.0 - opacity) * combinedGrid\n        );\n\n        if (gl_FragColor.a < 1e-3) discard;\n      }\n    }\n  `,\n        primitive: 'triangles',\n        uniforms: {\n          solidPass: regl.prop('solidPass'),\n          opacity: regl.prop('opacity'),\n          cartoonEdgeWidth: regl.prop('cartoonEdgeWidth'),\n          cartoonEdgeOpacity: regl.prop('cartoonEdgeOpacity'),\n          gridOpacity: regl.prop('gridOpacity'),\n          gridWidth: regl.prop('gridWidth'),\n          specular: regl.prop('specular')\n        },\n        attributes: {\n          uv: regl.prop('buffers.uv')\n        },\n        depth: {\n          enable: regl.prop('solidPass')\n        },\n        blend: {\n          enable: (ctx, props) => !props.solidPass,\n          func: {\n            srcRGB: 'src alpha',\n            srcAlpha: 1,\n            dstRGB: 1,\n            dstAlpha: 1\n          },\n          equation: {\n            rgb: 'reverse subtract',\n            alpha: 'add'\n          }\n        },\n        elements: regl.prop('buffers.elements')\n      })\n    })\n  main\n    .variable(observer('setUniforms'))\n    .define('setUniforms', ['regl', 'time'], function (regl, time) {\n      return regl({\n        uniforms: {\n          projection: regl.context('projection'),\n          view: regl.context('view'),\n          eye: regl.context('eye'),\n          pixelRatio: regl.context('pixelRatio'),\n          time: (ctx, context) => time\n        }\n      })\n    })\n  main\n    .variable(observer('buffers'))\n    .define('buffers', ['regl', 'mesh', 'invalidation'], function (\n      regl,\n      mesh,\n      invalidation\n    ) {\n      const uv = regl.buffer(mesh.positions.flat())\n      const elements = regl.elements(mesh.cells.flat())\n      invalidation.then(() => {\n        uv.destroy()\n        elements.destroy()\n      })\n      return { uv, elements }\n    })\n  main\n    .variable(observer('meshFromFunction'))\n    .define('meshFromFunction', function () {\n      return function meshFromFunction (surfaceFn, opts) {\n        let i, j, u, v\n        opts = opts || {}\n\n        const res = opts.resolution === undefined ? 11 : opts.resolution\n        const nbUFaces = Array.isArray(opts.resolution)\n          ? opts.resolution[0]\n          : res\n        const nbVFaces = Array.isArray(opts.resolution)\n          ? opts.resolution[1]\n          : res\n\n        const uDomain = opts.uDomain === undefined ? [0, 1] : opts.uDomain\n        const vDomain = opts.vDomain === undefined ? [0, 1] : opts.vDomain\n\n        let nbBoundaryAdjustedUFaces = nbUFaces\n        let nbBoundaryAdjustedVFaces = nbVFaces\n        if (!opts.vPeriodic) nbBoundaryAdjustedUFaces += 1\n        if (!opts.uPeriodic) nbBoundaryAdjustedVFaces += 1\n\n        const positions = []\n        const cells = []\n\n        for (i = 0; i < nbBoundaryAdjustedUFaces; i++) {\n          u = uDomain[0] + ((uDomain[1] - uDomain[0]) * i) / nbUFaces\n          for (j = 0; j < nbBoundaryAdjustedVFaces; j++) {\n            v = vDomain[0] + ((vDomain[1] - vDomain[0]) * j) / nbVFaces\n            positions.push(surfaceFn(u, v))\n          }\n        }\n\n        var faceIndex = 0\n        for (i = 0; i < nbUFaces; i++) {\n          var iPlusOne = i + 1\n          if (opts.vPeriodic) iPlusOne = iPlusOne % nbUFaces\n          for (j = 0; j < nbVFaces; j++) {\n            var jPlusOne = j + 1\n            if (opts.uPeriodic) jPlusOne = jPlusOne % nbVFaces\n\n            cells.push([\n              i + nbBoundaryAdjustedUFaces * j,\n              iPlusOne + nbBoundaryAdjustedUFaces * j,\n              iPlusOne + nbBoundaryAdjustedUFaces * jPlusOne\n            ])\n\n            cells.push([\n              i + nbBoundaryAdjustedUFaces * j,\n              iPlusOne + nbBoundaryAdjustedUFaces * jPlusOne,\n              i + nbBoundaryAdjustedUFaces * jPlusOne\n            ])\n          }\n        }\n\n        return { positions, cells }\n      }\n    })\n  main\n    .variable(observer('camera'))\n    .define('camera', ['createReglCamera', 'regl', 'phi'], function (\n      createReglCamera,\n      regl,\n      phi\n    ) {\n      const camera = createReglCamera(regl, {\n        distance: 10,\n        phi: phi,\n        theta: 0\n      })\n      // createInteractions(camera);\n      return camera\n    })\n  main.variable(observer('phi')).define('phi', function () {\n    return 0.0\n  })\n  const child1 = runtime.module(define1)\n  main.import('createReglCamera', child1)\n  main.import('createInteractions', child1)\n  main.variable(observer('LICENSE')).define('LICENSE', function () {\n    return 'mit'\n  })\n  return main\n}\n","import React, { useRef, useEffect, useState } from 'react'\nimport { Runtime, Inspector } from '@observablehq/runtime'\nimport define from '../observable/index'\n\nfunction Spacegap () {\n  const ref = useRef()\n  const [obs, setObs] = useState()\n\n  const phi = 1.6\n  const t = 3\n\n  useEffect(() => {\n    const main = new Runtime().module(define, name => {\n      if (name === 'viewof regl')\n        return Inspector.into(ref.current.querySelector('.viewof-regl'))()\n      return ['drawMesh', 'setUniforms', 'buffers', 'camera'].includes(name)\n    })\n    main.redefine('phi', phi)\n    main.redefine('time', t)\n    setObs(main)\n  }, [])\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollY = window.scrollY > 100 ? 1 : window.scrollY / 100\n      console.log(scrollY)\n      // const a = 0.2 + 0.13 * scrollY\n      const a = 1.6 - 1.21 * scrollY\n      const b = 3 - (3 - 0.43) * scrollY\n      obs.redefine('phi', a)\n      obs.redefine('time', b)\n      console.log('a', a)\n      console.log('b', b)\n    }\n    window.addEventListener('scroll', handleScroll)\n    return () => {\n      window.removeEventListener('scroll', handleScroll)\n    }\n  }, [obs])\n\n  return (\n    <div className='FakeTransparencyForDSurfaces' ref={ref}>\n      <div className='viewof-regl'></div>\n    </div>\n  )\n}\n\nexport default Spacegap\n","import React from 'react'\n\nexport default function FilToken () {\n  return (\n    <img src='https://filecoin.io/images/filecoin-logo.svg' class='fil-logo' />\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { Link } from 'react-router-dom'\nimport Summary from '../components/Summary'\nimport Spacegap from '../components/Spacegap'\nimport FilToken from '../components/FilToken'\n\nconst d3 = require('d3')\nconst f = d3.format(',')\nconst f0 = d3.format(',.0f')\nconst f3 = d3.format(',.3f')\nconst f1 = d3.format(',.1f')\n\nfunction Home ({ miners, client, actors, head }) {\n  const econSummary =\n    actors &&\n    client.computeEconomics(head, actors, {\n      projectedDays: 1\n    })\n\n  const WindowPoStGasAvg = 534297287\n  const PreCommitGasAvg = 21701073\n  const ProveCommitGasAvg = 47835932\n\n  const [minersInfo, setMinersInfo] = useState({})\n\n  useEffect(() => {\n    if (!miners) {\n      setMinersInfo({})\n      return\n    }\n    setMinersInfo(miners)\n  }, [miners])\n\n  let count = 0\n\n  useEffect(() => {\n    if (!client || !head || !miners || !actors) {\n      return\n    }\n\n    if (!minersInfo) {\n      setMinersInfo({})\n      return\n    }\n\n    console.log('reload miners list', count++)\n\n    let mounted = true\n    const setMinersIfMounted = info => {\n      if (mounted) setMinersInfo(info)\n    }\n\n    Object.keys(minersInfo).forEach(minerId => {\n      client.updateMinerInfo(minersInfo, minerId, setMinersIfMounted, head, {\n        deadlines: false\n      })\n    })\n    return () => {\n      mounted = false\n    }\n  }, [client, head, miners, actors])\n\n  const handleSearch = e => {\n    if (e.key === 'Enter') {\n      window.location.href = `/#/miners/${e.target.value}`\n    }\n  }\n\n  return (\n    <section id='home' className='container'>\n      <Spacegap />\n      <div className='section'>\n        <div class='search-bar'>\n          <input\n            type='text'\n            placeholder='look up a miner address'\n            onKeyDown={handleSearch}\n          />\n        </div>\n      </div>\n      <div id='actors' className='section'>\n        <h3>Tokens</h3>\n        <div className='grid'>\n          <Summary\n            title={\n              actors && (\n                <>\n                  {f0(+actors.Supply / 1e18 || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Circulating Supply'\n          />\n          <Summary\n            title={\n              actors && (\n                <>\n                  {f3(+actors.Reward.State.ThisEpochReward / 5 / 1e18 || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Block Reward'\n          />\n          {/* <Summary\n              title={`${f0(+actors.Supply.FilBurnt / 1e18 || 0)} FIL`}\n              desc='Burnt'\n            />\n            <Summary\n              desc='Locked'\n              title={`${f0(+actors.Supply.FilLocked / 1e18 || 0)} FIL`}\n            /> */}\n        </div>\n      </div>\n\n      <div id='actors2' className='section'>\n        <h3>Power</h3>\n        <div className='grid'>\n          <Summary\n            title={\n              actors &&\n              `${f0(\n                +actors.Power.State.TotalBytesCommitted / 2 ** 50 || 0\n              )} PiB`\n            }\n            desc='Network Raw'\n          />\n          <Summary\n            desc='Active Miners'\n            title={\n              actors &&\n              `${f0(+actors.Power.State.MinerAboveMinPowerCount || 0)}`\n            }\n          />\n        </div>\n      </div>\n\n      <div id='economics' className='section'>\n        <h3>Economics</h3>\n        <div className='grid'>\n          <Summary\n            title={\n              econSummary && (\n                <>\n                  {f3(econSummary.sectorIp || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Sector Pledge'\n          />\n\n          <Summary\n            title={\n              econSummary && (\n                <>\n                  {f3(econSummary.sectorProjectedReward || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Sector 360-Days Reward'\n          />\n\n          <Summary\n            desc='Sector Fault Fee'\n            title={\n              econSummary && (\n                <>\n                  {f3(econSummary.sectorFaultFee || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n          />\n        </div>\n        These numbers are approximate projections based on the current network\n        state and may be incorrect, do your own research.\n      </div>\n\n      <div className='section'>\n        <h3>Gas</h3>\n        See <Link to='/gas'> here </Link> for a detailed gas analysis.\n      </div>\n      <div className='section'>\n        <h3>Top miners</h3>\n        <div>\n          See deadlines of <Link to='/full'>top 50 miners</Link> or click on\n          individual miners or the <Link to='/status'>network status</Link>.\n        </div>\n      </div>\n      <div className='spacerace card section'>\n        <div className='card-body'>\n          <table className='table table-sm space table-borderless'>\n            <thead>\n              <tr>\n                <th scope='col'>#</th>\n                <th scope='col'>Miner</th>\n                <th scope='col'>Power</th>\n                <th scope='col'>PreCommits</th>\n                <th scope='col'>Available Balance</th>\n              </tr>\n            </thead>\n            <tbody>\n              {minersInfo &&\n                miners &&\n                Object.keys(miners)\n                  // .slice(0, 5)\n                  .map((d, i) => (\n                    <tr key={i}>\n                      <th scope='row'>{i + 1}</th>\n                      <td align='right' className='minerAddress'>\n                        <Link to={`/miners/${miners[d].address}`}>\n                          {miners && miners[d] && miners[d].address}\n                        </Link>\n                      </td>\n                      <td align='right'>\n                        {f1(\n                          minersInfo[d] && +minersInfo[d].rawBytePower / 2 ** 50\n                        )}{' '}\n                        PiB\n                      </td>\n                      <td align='right'>\n                        {minersInfo[d] && minersInfo[d].preCommits ? (\n                          minersInfo[d].preCommits.Count\n                        ) : (\n                          <div className='gradient' />\n                        )}\n                      </td>\n                      <td align='right'>\n                        {minersInfo[d] && minersInfo[d].deposits ? (\n                          `${minersInfo[d].deposits.Available} FIL`\n                        ) : (\n                          <div className='gradient' />\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default withRouter(Home)\n","import React from 'react'\n\nexport default function WindowPoStStatus ({ deadline, head }) {\n  const d = deadline\n\n  return (\n    <div className='deadlines windowpost'>\n      <div className={d.LiveSectors === 0 ? 'deadline opacity5' : 'deadline'}>\n        <div className='out'>\n          In {d.Close - head.Height}\n          {/* <span className=\"epochs\">epochs</span> */}\n        </div>\n        <div className='hddWrapper'>\n          <div className='in'>\n            {Math.round((d.LiveSectors * 32) / 1024)} TiB\n          </div>\n          <div className='hdds'>\n            {[\n              ...Array(\n                Math.ceil(\n                  Math.round(\n                    (d.LiveSectors * 32) / 1024 -\n                      +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                  ) / 8\n                )\n              )\n            ].map((v, i) => (\n              <div key={i} className='hdd'>\n                {' '}\n              </div>\n            ))}\n            {[\n              ...Array(\n                Math.ceil(\n                  Math.round(+d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)) /\n                    8\n                )\n              )\n            ].map((v, i) => (\n              <div key={i} className='hdd faulty'>\n                {' '}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport asyncPool from 'tiny-async-pool'\nimport { Link } from 'react-router-dom'\nimport Summary from '../components/Summary'\nimport WindowPoStStatus from '../components/WindowPoStStatus'\n\nconst d3 = require('d3')\nconst f2 = d3.format(',.2f')\nconst bytesToPiB = 1024 * 1024 * 1024 * 1024 * 1024\n\nexport default function Status ({ client, spa, head, miners }) {\n  const [minersDeadlines, setMinersDeadlines] = useState({})\n  const [minersDeadlines2880, setMinersDeadlines2880] = useState({})\n  const [prev60, setPrev60] = useState()\n  const [prev120, setPrev120] = useState()\n\n  useEffect(() => {\n    if (!head) return\n\n    const fetchingPrevious = async () => {\n      const getPrev = async diff => {\n        const prevHead = await client.fetchTipsetHead(head.Height - diff)\n        const prevSpa = await client.fetchPower(prevHead)\n        return prevSpa\n      }\n\n      const [prev60, prev120] = await Promise.all([getPrev(60), getPrev(120)])\n\n      await setPrev60(prev60)\n      await setPrev120(prev120)\n    }\n    fetchingPrevious()\n  }, [head])\n\n  useEffect(() => {\n    let mounted = true\n    if (!head) return\n\n    const minersList = Object.keys(miners)\n      .slice(0, 40)\n      .map(d => miners[d].address)\n    asyncPool(5, minersList, async minerId => {\n      if (!mounted) return\n      const deadlines = await client.fetchDeadlines(minerId, head)\n      if (!mounted) return\n      const prevHead = await client.fetchTipsetHead(head.Height - 2880)\n      if (!mounted) return\n      const deadlines2880 = await client.fetchDeadlines(minerId, prevHead)\n      if (!mounted) return\n      minersDeadlines[minerId] = deadlines\n      minersDeadlines2880[minerId] = deadlines2880\n      await setMinersDeadlines({ ...minersDeadlines })\n      return await setMinersDeadlines2880({ ...minersDeadlines2880 })\n    })\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, miners])\n\n  return (\n    <section className='container'>\n      <div id='deposits' className='section'>\n        <div className='grid'>\n          {spa && (\n            <>\n              <Summary\n                title={f2(parseInt(spa.TotalQualityAdjPower) / bytesToPiB)}\n                desc='Total QA Power'\n              />\n            </>\n          )}\n          {prev60 && spa && (\n            <>\n              <Summary\n                title={f2(\n                  parseInt(\n                    spa.TotalQualityAdjPower - prev60.TotalQualityAdjPower\n                  ) / bytesToPiB\n                )}\n                desc='60 Epochs delta'\n              />\n            </>\n          )}\n          {prev120 && spa && (\n            <>\n              <Summary\n                title={f2(\n                  parseInt(\n                    spa.TotalQualityAdjPower - prev120.TotalQualityAdjPower\n                  ) / bytesToPiB\n                )}\n                desc='120 Epochs delta'\n              />\n            </>\n          )}\n        </div>\n      </div>\n      Listing WindowPoSt duties of the top 50 miners.\n      {miners &&\n        Object.keys(miners)\n          .slice(0, 40)\n          .map((d, i) => (\n            <div className='flex' key={i}>\n              <Link to={`/miners/${miners[d].address}`}>\n                {miners[d].address}\n              </Link>\n              {minersDeadlines && minersDeadlines[miners[d].address] && (\n                <WindowPoStStatus\n                  head={head}\n                  deadline={\n                    minersDeadlines[miners[d].address].nextDeadlines[47]\n                  }\n                />\n              )}\n              {minersDeadlines2880 &&\n                minersDeadlines2880[miners[d].address] && (\n                  <WindowPoStStatus\n                    head={head}\n                    deadline={\n                      minersDeadlines2880[miners[d].address].nextDeadlines[47]\n                    }\n                  />\n                )}\n            </div>\n          ))}\n    </section>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function WindowPoSt ({ minerId, deadlines, head, link, out }) {\n  if (!link) {\n    link = d => `/miners/${minerId}/deadlines/${d.Index}`\n  }\n  if (!out) {\n    out = ({ d, head, i }) => `In ${d.Close - head.Height}`\n  }\n  if (!head || !deadlines) {\n    return <></>\n  }\n  return (\n    <div className='deadlines windowpost'>\n      {deadlines &&\n        deadlines.map((d, i) => (\n          <div\n            key={i}\n            className={d.LiveSectors === 0 ? 'deadline opacity5' : 'deadline'}\n          >\n            <Link to={link(d)}>\n              <div className='out'>\n                {out({ d, head, i })}\n                {/* <span className=\"epochs\">epochs</span> */}\n              </div>\n              <div className='hddWrapper'>\n                <div className='in'>\n                  {Math.round((d.LiveSectors * 32) / 1024)} TiB\n                </div>\n                <div className='hdds'>\n                  {[\n                    ...Array(\n                      Math.ceil(\n                        Math.round(\n                          (d.LiveSectors * 32) / 1024 -\n                            +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                        ) / 8\n                      )\n                    )\n                  ].map((v, i) => (\n                    <div key={i} className='hdd'>\n                      {' '}\n                    </div>\n                  ))}\n                  {/* {Math.round(+d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024))} */}\n                  {[\n                    ...Array(\n                      Math.ceil(\n                        Math.round(\n                          +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                        ) / 8\n                      )\n                    )\n                  ].map((v, i) => (\n                    <div key={i} className='hdd faulty'>\n                      {' '}\n                    </div>\n                  ))}\n                </div>\n              </div>\n              {/* <div className=\"partitions\">\n                            {\n                            [...Array(Math.ceil(d.LiveSectors/2349))].map(v =>\n                            <div className='partition'></div>\n                            )\n                            }\n                            </div> */}\n            </Link>\n          </div>\n        ))}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport asyncPool from 'tiny-async-pool'\n\nimport WindowPoSt from '../components/WindowPoSt'\n\nexport default function Full ({ miners, client }) {\n  const [minersDeadlines, setMinersDeadlines] = useState({})\n  const [head, setHead] = useState()\n\n  useEffect(() => {\n    const fetchingHead = async () => {\n      const fetched = await client.fetchHead()\n      setHead(fetched)\n    }\n    fetchingHead()\n  }, [client])\n\n  useEffect(() => {\n    let mounted = true\n    if (!head) return\n\n    const minersList = Object.keys(miners)\n      .slice(0, 50)\n      .map(d => miners[d].address)\n    asyncPool(5, minersList, async minerId => {\n      if (!mounted) return\n      const deadlines = await client.fetchDeadlines(minerId, head)\n      if (!mounted) return\n      minersDeadlines[minerId] = deadlines.nextDeadlines\n      return await setMinersDeadlines({ ...minersDeadlines })\n    })\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, miners])\n\n  return (\n    <section id='LookUp' className='container'>\n      Listing WindowPoSt duties of the top 50 miners.\n      {miners &&\n        Object.keys(miners)\n          .slice(0, 50)\n          .map((d, i) => (\n            <div key={i}>\n              <Link to={`/miners/${miners[d].address}`}>\n                {miners[d].address}\n              </Link>\n\n              <WindowPoSt\n                deadlines={minersDeadlines[miners[d].address]}\n                head={head}\n              />\n            </div>\n          ))}\n    </section>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function MinerBar ({\n  client,\n  miners,\n  minerId,\n  deadlineId,\n  miner\n}) {\n  return (\n    <div className='section minerbar'>\n      {/* <div>{miner && miner.info && JSON.stringify(miner.info)}</div> */}\n      <div className='minerId'>\n        {!deadlineId && (\n          <>\n            <Link to={`/miners/${minerId}`}>{minerId}</Link>\n            <span className='tinyarrow'>\n              <a href={`https://filfox.info/en/address/${minerId}`}></a>\n            </span>\n            {miner && miner.deposits && +miner.deposits.FeeDebt !== 0 && (\n              <span className='rekt'>DEBT</span>\n            )}\n          </>\n        )}\n        {deadlineId && (\n          <>\n            <Link to={`/miners/${minerId}/deadlines/${deadlineId}`}>\n              Deadline {deadlineId}\n            </Link>\n          </>\n        )}\n      </div>\n      {deadlineId && (\n        <>\n          <div className='backto'>\n            <Link to={`/miners/${minerId}`}>\n              See miner\n              <span className='bolder'> {minerId}</span>\n            </Link>\n          </div>\n        </>\n      )}\n      {!deadlineId && (\n        <div>\n          {miners && miners[minerId] && miners[minerId].tag && (\n            <span className='miner-name'>\n              {miners[minerId].tag.name}\n\n              {miners && miners[minerId].location && (\n                <span> {miners[minerId].location.flagEmoji}</span>\n              )}\n            </span>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { useParams, withRouter } from 'react-router-dom'\nimport ReactTooltip from 'react-tooltip'\nimport WindowPoSt from '../components/WindowPoSt'\nimport Summary from '../components/Summary'\nimport asyncPool from 'tiny-async-pool'\nimport MinerBar from '../components/MinerBar'\nconst d3 = require('d3')\nconst f = d3.format(',')\nconst f2 = d3.format(',.1f')\n\nfunction Deadline ({ miners, client, head }) {\n  const { minerId, deadlineId } = useParams()\n  const [partitions, setPartitions] = useState()\n  // const [miner, setMiner] = useState({ id: minerId })\n  const [minerDeadlines, setMinerDeadlines] = useState({})\n  const [todayDeadlines, setTodayDeadlines] = useState()\n\n  const deadlinesArray = () => {\n    return Object.keys(minerDeadlines)\n      .sort((a, b) => +a - +b)\n      .map(k => [k, minerDeadlines[k]])\n  }\n\n  const deadlineArray = i => {\n    return deadlinesArray()\n      .map(([epoch, deadlines]) => {\n        return deadlines.deadlines[i]\n      })\n      .flat()\n  }\n\n  useEffect(() => {\n    if (!todayDeadlines) return\n\n    console.log('>> today is set', todayDeadlines)\n    client\n      .fetchPartitionsSectors(todayDeadlines.deadlines[deadlineId].Partitions)\n      .then(d => {\n        setPartitions(d)\n      })\n      .catch(e => {\n        console.error('failed to load sectors')\n      })\n  }, [todayDeadlines])\n\n  useEffect(() => {\n    if (!minerId || !head || !deadlineId) {\n      return\n    }\n\n    let mounted = true\n    let firstTime = true\n    const continueLoad = () => firstTime || mounted\n\n    const days = Math.ceil(head.Height / 2880)\n    const epochs = [...Array(days)]\n      .map((_, i) => ({\n        height: i * 2880 <= head.Height ? i * 2880 : head.Height,\n        day: days - i - 1\n      }))\n      .reverse()\n\n    console.log('>>> epochs', epochs)\n\n    if (todayDeadlines) {\n      return\n    }\n\n    try {\n      asyncPool(40, epochs, async ({ day, height }) => {\n        let prevHead\n        try {\n          prevHead = await client.fetchTipsetHead(height)\n          if (!continueLoad()) return\n        } catch (e) {\n          console.log('could not fetch head', minerId, day, height, e)\n          return\n        }\n\n        try {\n          const deadlines = await client.fetchDeadlines(minerId, prevHead)\n          if (!continueLoad()) return\n          minerDeadlines[day] = deadlines\n          setMinerDeadlines({ ...minerDeadlines })\n          if (day === 0) {\n            setTodayDeadlines(deadlines)\n          }\n        } catch (e) {\n          console.log('could not find', minerId, day, height, e)\n        }\n      })\n    } catch (e) {\n      console.log('trouble with ', e)\n    }\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, minerId, deadlineId, todayDeadlines])\n\n  return (\n    <section className='container'>\n      <MinerBar\n        client={client}\n        miners={miners}\n        minerId={minerId}\n        deadlineId={deadlineId}\n      />\n      <div className='section wpost'>\n        <div className='grid'>\n          <Summary\n            title={\n              minerDeadlines &&\n              minerDeadlines[0] &&\n              `${f2(\n                (+minerDeadlines[0].deadlines[deadlineId].LiveSectors * 32) /\n                  1024\n              )} TiB`\n            }\n            desc={`${\n              minerDeadlines && minerDeadlines[0]\n                ? f(minerDeadlines[0].deadlines[deadlineId].LiveSectors)\n                : ''\n            } Live Sectors`}\n          />\n\n          <Summary\n            title={\n              minerDeadlines &&\n              minerDeadlines[0] &&\n              `${f2(\n                +minerDeadlines[0].deadlines[deadlineId].FaultyPower.Raw /\n                  (1024 * 1024 * 1024 * 1024)\n              )} TiB`\n            }\n            desc={`${\n              minerDeadlines && minerDeadlines[0]\n                ? f(\n                    +minerDeadlines[0].deadlines[deadlineId].FaultyPower.Raw /\n                      ((1024 * 1024 * 1024 * 1024) / 32)\n                  )\n                : ''\n            } Faulty Sectors`}\n          />\n        </div>\n      </div>\n      <div className='section wpost'>\n        <div className='row'>\n          <div className='col section-title'>\n            <h3>History</h3>\n            <a data-tip data-for='wpost-desc'>\n              (what is this?)\n            </a>\n            <ReactTooltip id='wpost-desc' effect='solid' place='top'>\n              <span>\n                List of 48 WindowPoSt submission deadlines ordered by due time\n                (in epochs).\n                <br />\n                Bars represent ~8TB disks to be proven, white are healthy disks,\n                red are faulty.\n              </span>\n            </ReactTooltip>\n          </div>\n        </div>\n        <WindowPoSt\n          link={d => `/miners/${minerId}/deadlines/${deadlineId}`}\n          deadlines={deadlineArray(deadlineId)}\n          head={head}\n          out={({ d, head, i }) => (i === 0 ? `Today` : `${i}d ago`)}\n        />\n      </div>\n      <div className='section sectors'>\n        <div className='row'>\n          <div className='col section-title'>\n            <h3>Sectors</h3>\n            <a data-tip data-for='sectors-desc'>\n              (what is this?)\n            </a>\n            <ReactTooltip id='sectors-desc' effect='solid' place='top'>\n              <span>Each square is a 32GiB sector.</span>\n            </ReactTooltip>\n          </div>\n        </div>\n        {partitions && (\n          <div>\n            {partitions.map((partition, i) => (\n              <div key={i}>\n                <h4>\n                  Partition {i}{' '}\n                  {Object.keys(partition[0].Faults).length ===\n                    partition[0].Sectors.length && (\n                    <span className='rekt'>REKT</span>\n                  )}\n                </h4>\n                <div className='s-partition'>\n                  {partition[0].Sectors.map(sector => (\n                    <div\n                      key={sector}\n                      className={`s-sector ${partition[0].Faults[sector] &&\n                        'faulty'} ${partition[0].Terminated[sector] &&\n                        'terminated'} ${partition[0].Recoveries[sector] &&\n                        'recovering'}`}\n                    >\n                      <span>{sector}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default withRouter(Deadline)\n","import React, { useState, useEffect } from 'react'\nimport { useParams, withRouter } from 'react-router-dom'\n\nimport Summary from '../components/Summary'\nimport ReactTooltip from 'react-tooltip'\nimport WindowPoSt from '../components/WindowPoSt'\nimport MinerBar from '../components/MinerBar'\nimport FilToken from '../components/FilToken'\n\nconst d3 = require('d3')\nconst f = d3.format(',')\nconst f2 = d3.format(',.0f')\n\nfunction MinerInfo ({ client, miners, head, actors }) {\n  const { minerId } = useParams()\n  const [minersInfo, setMinersInfo] = useState({ [minerId]: { id: minerId } })\n\n  const sectorFaultFee =\n    actors &&\n    client.computeEconomics(head, actors, {\n      projectedDays: 1\n    }).sectorFaultFee\n\n  // On new (hash or head): fetch miner\n  useEffect(() => {\n    if (!minerId || !head || !client) {\n      return\n    }\n\n    let mounted = true\n    const setMinersIfMounted = info => {\n      if (mounted) setMinersInfo(info)\n    }\n\n    client.updateMinerInfo(minersInfo, minerId, setMinersIfMounted, head)\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, minerId])\n\n  if (!minerId || !head || !minersInfo[minerId]) {\n    return <></>\n  }\n\n  const miner = minersInfo[minerId]\n\n  return (\n    <section className='container'>\n      <MinerBar\n        client={client}\n        miners={miners}\n        minerId={minerId}\n        miner={miner}\n      />\n      <div id='deposits' className='section'>\n        <div className='grid'>\n          <Summary\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.Balance || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Balance'\n          />\n\n          <Summary\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.Available || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Available'\n          />\n\n          <Summary\n            desc='Vesting'\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.LockedFunds || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n          />\n        </div>\n        <div className='grid grid-4'>\n          <Summary\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.InitialPledge || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Initial Pledge'\n          />\n\n          <Summary\n            desc='PreCommit Deposit'\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.PreCommitDeposits || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n          />\n\n          <Summary\n            title={\n              miner.deposits && (\n                <>\n                  {f(miner.deposits.FeeDebt || 0)}\n                  <FilToken />\n                </>\n              )\n            }\n            desc='Fee Debt'\n          />\n\n          <Summary\n            title={\n              miner.deposits &&\n              sectorFaultFee &&\n              `${f2(\n                (+miner.deposits.Available + +miner.deposits.LockedFunds) /\n                  +sectorFaultFee || 0\n              )}`\n            }\n            desc='Faults to Debt'\n          />\n        </div>\n      </div>\n\n      <div id='sectors'>\n        <div className='grid grid-4'>\n          <Summary\n            title={\n              miner.deadlines &&\n              `${f2((miner.deadlines.SectorsCount * 32) / 1024)} TiB`\n            }\n            desc={`${miner.deadlines &&\n              f(miner.deadlines.SectorsCount || 0)} Total Sectors`}\n          />\n\n          <Summary\n            title={\n              miner.deadlines &&\n              `${f2((miner.deadlines.ActiveCount * 32) / 1024)} TiB`\n            }\n            desc={`${miner.deadlines &&\n              f(miner.deadlines.ActiveCount || 0)} Active Sectors`}\n          />\n          <Summary\n            title={\n              miner.deadlines &&\n              `${f2((miner.deadlines.FaultsCount * 32) / 1024)} TiB`\n            }\n            desc={`${miner.deadlines &&\n              f(miner.deadlines.FaultsCount || 0)} Faulty Sectors`}\n          />\n\n          <Summary\n            title={miner.preCommits && f(miner.preCommits.Count || 0)}\n            desc='PreCommits'\n          />\n        </div>\n      </div>\n\n      {miner.deadlines && (\n        <div className='section wpost'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>Deadlines</h3>\n              <a data-tip data-for='wpost-desc'>\n                (what is this?)\n              </a>\n              <ReactTooltip id='wpost-desc' effect='solid' place='top'>\n                <span>\n                  List of 48 WindoPoSt submission deadlines ordered by due time\n                  (in epochs).\n                  <br />\n                  Bars represent ~8TB disks to be proven, white are healthy\n                  disks, red are faulty.\n                </span>\n              </ReactTooltip>\n            </div>\n          </div>\n          <WindowPoSt\n            minerId={minerId}\n            deadlines={miner.deadlines.nextDeadlines}\n            head={head}\n          />\n        </div>\n      )}\n\n      {miner.deadlines && (\n        <div className='section'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>Upcoming Deadline</h3>\n            </div>\n          </div>\n          <div className='row'>\n            <div className='col'>\n              <div className='timeline'></div>\n              <ul>\n                <li>\n                  PoStSubmissions:\n                  {miner.deadlines.nextDeadlines[0].PostSubmissions}\n                </li>\n                <li>\n                  Sectors to Prove:{' '}\n                  {miner.deadlines.nextDeadlines[0].LiveSectors}\n                </li>\n                <li>Current Deadline: {miner.deadlines.deadline.Index}</li>\n                <li>\n                  FaultCutoff:{' '}\n                  {miner.deadlines.deadline.FaultCutoff - head.Height}\n                </li>\n                <li>\n                  Challenge: {miner.deadlines.deadline.Challenge - head.Height}\n                </li>\n                <li>\n                  {miner.deadlines.deadline.Open - head.Height > 0\n                    ? 'Open'\n                    : 'Opened'}\n                  : {miner.deadlines.deadline.Open - head.Height}\n                </li>\n                <li>Close: {miner.deadlines.deadline.Close - head.Height}</li>\n              </ul>\n            </div>\n            <div className='col'>\n              <WindowPoSt\n                minerId={minerId}\n                deadlines={[miner.deadlines.nextDeadlines[0]]}\n                head={head}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {miner.preCommits && (\n        <div id='provecommit' className='section'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>New sectors</h3>\n              <a data-tip data-for='provecommit-desc'>\n                (what is this?)\n              </a>\n              <ReactTooltip id='provecommit-desc' effect='solid' place='top'>\n                <span>\n                  List of ProveCommits ordered by due time (in epochs).\n                  <br />\n                  Circles represent sectors to be proven.\n                </span>\n              </ReactTooltip>\n            </div>\n          </div>\n          <div className='deadlines provecommit'>\n            {miner.preCommits.PreCommitDeadlines.map((d, i) => (\n              <div key={i} className='deadline'>\n                <div className='out'>\n                  In {d.Expiry - head.Height}\n                  {/* <span className=\"epochs\">epochs</span> */}\n                </div>\n                <div className='hddWrapper'>\n                  <div className='in'>\n                    {Math.round(d.Sectors.length)} sectors\n                  </div>\n                  <div className='hdds'>\n                    {d.Sectors.map(v => (\n                      <div key={v} className='hdd'>\n                        {''}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </section>\n  )\n}\n\nexport default withRouter(MinerInfo)\n","export default async function () {\n  return await (await fetch('https://api3.drand.sh/health')).json()\n}\n","import React, { useState, useEffect } from 'react'\nimport Drand from '../services/drand'\n\nconst d3 = require('d3')\nconst f = d3.format(',')\n\nfunction getFilecoinExpectedHeight () {\n  const filGenesis = new Date('2020-08-24 22:00:00Z').getTime()\n  return Math.floor((Date.now() - filGenesis) / 1000 / 30)\n}\n\nexport default function TinySummary ({ client, head }) {\n  const [expected, setFilExpectedHeight] = useState(getFilecoinExpectedHeight())\n  const [round, setRound] = useState()\n\n  useEffect(() => {\n    let mounted = true\n\n    const fetchingHead = async () => {\n      Drand().then(fetched => {\n        if (!mounted) return\n        if (round && fetched.current === round.current) {\n          console.log('   repeated drand, skip')\n          return\n        }\n        console.log('   new drand', fetched)\n        setRound(fetched)\n      })\n\n      if (getFilecoinExpectedHeight() !== expected) {\n        setFilExpectedHeight(getFilecoinExpectedHeight())\n      }\n    }\n\n    fetchingHead()\n\n    const interval = setInterval(() => {\n      if (mounted) {\n        fetchingHead()\n      }\n    }, 5000)\n\n    return () => {\n      mounted = false\n      clearInterval(interval)\n      console.log('removing interval')\n    }\n  }, [client, head, round])\n\n  return (\n    <>\n      <div className='tiny-grid'>\n        <div>\n          Filecoin Status{' '}\n          <span>\n            {head && expected && head.Height < expected\n              ? expected - head.Height === 1\n                ? 'behind'\n                : 'receiving'\n              : 'ok'}\n          </span>\n        </div>\n\n        <div className='tiny'>\n          Current Tipset{' '}\n          <a href={`https://filfox.info/en/tipset/${head && head.Height}`}>\n            {head && f(head.Height)}\n          </a>\n        </div>\n\n        <div className='tiny'>\n          Expected Tipset{' '}\n          <a href={`https://filfox.info/en/tipset/${expected}`}>\n            {f(expected)}\n          </a>\n        </div>\n\n        <div className='tiny'>\n          Drand Status{' '}\n          <span>\n            {round && round.current < round.expected ? 'catching up' : 'ok'}\n          </span>\n        </div>\n        <div className='tiny'>\n          Current Drand{' '}\n          <a href={`https://api.drand.sh/public/${round && round.current}`}>\n            {f(round && round.current)}\n          </a>\n        </div>\n        <div className='tiny'>\n          Expected Drand{' '}\n          <a href={`https://api.drand.sh/public/${round && round.expected}`}>\n            {f(round && round.expected)}\n          </a>\n        </div>\n      </div>\n    </>\n  )\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Chart from 'chart.js'\nimport Stats, {\n  objectMap,\n  objectFilter,\n  growthRate,\n  wpostToSectors\n} from '../services/filecoin/stats'\n\n// number of consecutive block we take the average from\nconst averageLength = 3\n\nfunction Gas ({ client, head }) {\n  const [stats, setStat] = useState()\n\n  const updateStats = async () => {\n    const s = new Stats(client, averageLength)\n    await s.fetchCids()\n    setStat(s)\n  }\n\n  useEffect(() => {\n    updateStats()\n  }, [client, head])\n\n  if (!stats) return <></>\n\n  return (\n    <div className='row'>\n      <div className='accordion col-12' id='accordionExample'>\n        <GrowthCard nstats={stats} head={head} />\n        <MinerInfoCard nstats={stats} />\n        <BiggestGasSpenderCard nstats={stats} head={head} />\n        <GasTableCard nstats={stats} head={head} />\n      </div>\n    </div>\n  )\n}\n\nfunction GrowthCard ({ nstats, head }) {\n  const [commits, setCommits] = useState({})\n  const [wposts, setWposts] = useState({})\n  const [graph, setGraph] = useState(undefined)\n  const maxRounds = 30\n  const canvasRef = useRef(null)\n  const cardRef = useRef(null)\n\n  const setCollapseEvent = g => {\n    cardRef.current.addEventListener('show.bs.collapse', function () {\n      g.update()\n    })\n    cardRef.current.addEventListener('hide.bs.collapse', function () {\n      g.update()\n    })\n  }\n\n  const options = {\n    title: {\n      display: true,\n      text: 'Growth rate and proven sectors'\n    },\n    scales: {\n      yAxes: [\n        {\n          id: 'commits',\n          type: 'linear',\n          position: 'left',\n          scaleLabel: {\n            labelString: 'Estimated Growth Rate (PB/day) ',\n            display: true\n          }\n        },\n        {\n          id: 'wposts',\n          type: 'linear',\n          position: 'right',\n          scaleLabel: {\n            labelString: 'Estimated Sectors Proven per height',\n            display: true\n          }\n        }\n      ]\n    }\n  }\n\n  const fillDataset = async () => {\n    const allSealed = await nstats.transactionsPerHeight(7)\n    const allProven = await nstats.transactionsPerHeight(5)\n    // convert those to only the number of transactions per height\n    const sealed = Object.fromEntries(\n      objectMap(allSealed, (v, k) => [k, v.length])\n    )\n    const proven = Object.fromEntries(\n      objectMap(allProven, (v, k) => [k, v.length])\n    )\n    // merge what we have with potentially new stuff - overwrite old data\n    // with new data if same height\n    const newCommits = { ...commits, ...sealed }\n    const newWposts = { ...wposts, ...proven }\n    // sort in decreasing order, take some of it then show it in reverse\n    // order\n    const rounds = objectMap(newCommits, (v, k) => k)\n      .sort((a, b) => b - a)\n      .slice(0, maxRounds)\n      .reverse()\n    // filter only rounds selected and convert to growth rate\n    const filteredCommits = objectFilter(newCommits, (v, k) =>\n      rounds.includes(k)\n    )\n    setCommits(filteredCommits)\n    const dataCommits = rounds\n      .map(r => filteredCommits[r])\n      .map(c => Math.round(growthRate(c)))\n    // filter only rounds selected and convert to number of sectors\n    const filteredPosts = objectFilter(newWposts, (v, k) => rounds.includes(k))\n    setWposts(filteredPosts)\n    const dataWposts = rounds\n      .map(r => filteredPosts[r])\n      .map(w => Math.round(wpostToSectors(w)))\n    var myGraph = graph\n    if (myGraph == undefined) {\n      const dataset = [\n        {\n          data: dataCommits,\n          borderColor: chartColors.blue,\n          fill: false,\n          label: 'Estimated growth rate in PB per day',\n          yAxisID: 'commits'\n        },\n        {\n          data: dataWposts,\n          borderColor: chartColors.red,\n          fill: false,\n          label: 'Estimated number of proven sectors per height',\n          yAxisID: 'wposts'\n        }\n      ]\n      const lineData = {\n        datasets: dataset,\n        labels: rounds\n      }\n      const ctx = canvasRef.current.getContext('2d')\n      const newGraph = new Chart(ctx, {\n        type: 'line',\n        data: lineData,\n        options: options\n      })\n      myGraph = newGraph\n      setCollapseEvent(myGraph)\n    } else {\n      myGraph.data.datasets[0].data = dataCommits\n      myGraph.data.datasets[1].data = dataWposts\n      myGraph.data.labels = rounds\n      myGraph.update()\n    }\n    setGraph(myGraph)\n  }\n\n  useEffect(() => {\n    fillDataset()\n  }, [head, nstats])\n\n  return (\n    <div className='card'>\n      <div className='card-header' id='growth'>\n        <h2>\n          <button\n            className='btn btn-link'\n            type='button'\n            data-toggle='collapse'\n            data-target='#collapseGrowth'\n            aria-expanded='true'\n            aria-controls='collapseBiggest'\n          >\n            Growth evolution\n          </button>\n        </h2>\n      </div>\n      <div\n        id='collapseGrowth'\n        ref={cardRef}\n        className='collapse'\n        aria-labelledby='growth'\n        data-parent='#accordionExample'\n      >\n        <div className='card-body'>\n          <div className='col-12'>\n            {graph == undefined && <p> Loading.... </p>}\n            <canvas ref={canvasRef}>Loading...</canvas>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction MinerInfoCard ({ nstats }) {\n  const headers = [\n    'Miner',\n    'Raw Byte Power',\n    'Ratio over total raw power',\n    'Size',\n    'Daily gas required (wpost)',\n    'Daily price FIL'\n  ]\n\n  const [minerAddr, setAddr] = useState('')\n  const [data, setData] = useState({})\n\n  const drawHeaders = v => v.map(h => <th key={h}> {h} </th>)\n  const searchMiner = async e => {\n    e.preventDefault()\n    console.log('search miner for ', minerAddr)\n    const res = await nstats.minerInfo(minerAddr)\n    setData(res)\n  }\n\n  return (\n    <div className='card'>\n      <div className='card-header' id='minerInfo'>\n        <h2>\n          <button\n            className='btn btn-link'\n            type='button'\n            data-toggle='collapse'\n            data-target='#collapseInfo'\n            aria-expanded='true'\n            aria-controls='collapseInfo'\n          >\n            Miner info search\n          </button>\n        </h2>\n      </div>\n      <div\n        id='collapseInfo'\n        className='collapse'\n        aria-labelledby='minerInfo'\n        data-parent='#accordionExample'\n      >\n        <div className='card-body'>\n          <div className='row'>\n            <div className='col-4'> </div>\n            <form>\n              <div className='form-group'>\n                <label for='minerAddress'>Miner address</label>\n                <input\n                  value={minerAddr}\n                  onChange={e => setAddr(e.target.value)}\n                  type='text'\n                  className='form-control'\n                  placeholder='Enter miner address'\n                />\n              </div>\n              <button\n                onClick={searchMiner}\n                type='submit'\n                className='btn btn-primary'\n              >\n                Search\n              </button>\n            </form>\n          </div>\n          <div className='row'>\n            <div className='col-12'>\n              <table className='table table-hover'>\n                <thead>\n                  <tr>{drawHeaders(headers)}</tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td> {minerAddr} </td>\n                    <td> {data.raw} </td>\n                    <td> {data.ratio} </td>\n                    <td> {data.size} </td>\n                    <td> {data.dailyGas} </td>\n                    <td> {data.maxDailyPrice} </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction BiggestGasSpenderCard ({ head, nstats }) {\n  const [dataset, setData] = useState({})\n  const [opts, setOpts] = useState({})\n  const [pie, setPie] = useState(undefined)\n  const maxUser = 10\n  const canvasRef = useRef(null)\n  const cardRef = useRef(null)\n\n  const setCollapseEvent = pie => {\n    cardRef.current.addEventListener('show.bs.collapse', function () {\n      pie.update()\n    })\n    cardRef.current.addEventListener('hide.bs.collapse', function () {\n      pie.update()\n    })\n  }\n\n  const fillDataset = async () => {\n    const allHeights = await nstats.biggestGasUserFor()\n    if (Object.keys(allHeights).length < 1) {\n      return\n    }\n    const sortedHeight = Object.keys(allHeights).sort((a, b) => b - a)\n    const data = allHeights[sortedHeight[0]]\n    const rawData = data.slice(0, maxUser).map(d => d[1])\n    const datasets = [\n      {\n        data: rawData,\n        backgroundColor: objectMap(chartColors, (color, name) => color).slice(\n          0,\n          maxUser\n        ),\n        label: 'transaction gas'\n      }\n    ]\n    const labels = data.slice(0, maxUser).map(d => d[0])\n    const newOpts = {\n      title: {\n        display: true,\n        text: `Gas usage at height ${sortedHeight[0]}`\n      }\n    }\n    const newDataset = {\n      datasets: datasets,\n      labels: labels\n    }\n    setOpts(newOpts)\n    setData(newDataset)\n\n    var myPie = pie\n    if (myPie == undefined) {\n      const ctx = canvasRef.current.getContext('2d')\n      const newPie = new Chart(ctx, {\n        type: 'doughnut',\n        data: newDataset,\n        options: newOpts\n      })\n      myPie = newPie\n      setCollapseEvent(myPie)\n    } else {\n      pie.data.datasets[0].data = rawData\n      pie.options = newOpts\n      pie.update()\n    }\n    setPie(myPie)\n  }\n\n  useEffect(() => {\n    fillDataset()\n  }, [head, nstats])\n\n  return (\n    <div className='card'>\n      <div className='card-header' id='biggestGas'>\n        <h2>\n          <button\n            className='btn btn-link'\n            type='button'\n            data-toggle='collapse'\n            data-target='#collapseBiggest'\n            aria-expanded='true'\n            aria-controls='collapseBiggest'\n          >\n            Biggest gas users\n          </button>\n        </h2>\n      </div>\n      <div\n        id='collapseBiggest'\n        ref={cardRef}\n        className='collapse'\n        aria-labelledby='biggestGas'\n        data-parent='#accordionExample'\n      >\n        <div className='card-body'>\n          <div className='col-12'>\n            {pie == undefined && <p> Loading.... </p>}\n            <canvas ref={canvasRef}>Loading...</canvas>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction GasTableCard ({ nstats, head }) {\n  const headers = [\n    '',\n    'Average Count',\n    'Average GasUsed ',\n    'Ratio over total GasUsed',\n    'Average GasLimit',\n    'Ratio avg over total GasLimit',\n    'Ratio GasUsed over GasLimit',\n    'Ratio GasUsed over BlockLimit',\n    'Ratio GasLimit over BlockLimit'\n  ]\n  const empty = Array(headers.length - 1).fill(0)\n  const [avgGas, setAvgGas] = useState({\n    headers: headers,\n    total: empty,\n    wpost: empty,\n    pre: empty,\n    prove: empty\n  })\n\n  const updateAverage = async nstats => {\n    const totalGasUsed = await nstats.avgTotalGasUsed()\n    const totalGasLimit = await nstats.avgGasLimit()\n\n    const computeEntry = async (...method) => {\n      const nTx = await nstats.avgNumberTx(...method)\n      const gasUsed = await nstats.avgGasOfMethod(...method)\n      const gasLimit = await nstats.avgGasLimit(...method)\n      const ratioUsed = await nstats.avgRatioUsedOverTotalUsed(...method)\n      const ratioLimit = await nstats.avgRatioLimitOverTotalLimit(...method)\n      const ratioUsedLimit = await nstats.avgRatioUsedOverLimit(...method)\n      const ratioUsedBlockLimit = await nstats.avgTotalGasUsedOverTipsetLimit(\n        ...method\n      )\n      const ratioBlockLimit = await nstats.avgTotalGasLimitOverTipsetLimit(\n        ...method\n      )\n      return [\n        nTx,\n        gasUsed,\n        ratioUsed,\n        gasLimit,\n        ratioLimit,\n        ratioUsedLimit,\n        ratioUsedBlockLimit,\n        ratioBlockLimit\n      ]\n    }\n    const results = {}\n    results.headers = headers\n    results.total = await computeEntry()\n    results.wpost = await computeEntry(5)\n    results.pre = await computeEntry(6)\n    results.prove = await computeEntry(7)\n    setAvgGas(results)\n  }\n\n  useEffect(() => {\n    updateAverage(nstats)\n  }, [nstats, head])\n\n  const drawHeaders = v => v.map(h => <th key={h}> {h} </th>)\n\n  return (\n    <div className='card'>\n      <div className='card-header' id='headingOne'>\n        <h2>\n          <button\n            className='btn btn-link'\n            type='button'\n            data-toggle='collapse'\n            data-target='#collapseOne'\n            aria-expanded='false'\n            aria-controls='collapseOne'\n          >\n            Gas usage table\n          </button>\n        </h2>\n      </div>\n      <div\n        id='collapseOne'\n        className='collapse'\n        aria-labelledby='headingOne'\n        data-parent='#accordionExample'\n      >\n        <div className='card-body'>\n          <div className='row'>\n            <p>\n              {' '}\n              This table shows different statistics about the gas usage per\n              epoch. All results are averaged accross the last\n              {averageLength} epochs. You can find a complete description of\n              each column below the table.{' '}\n            </p>\n            <div className='row'>\n              <div className='col-12'>\n                <table className='table table-hover'>\n                  <thead>\n                    <tr>{drawHeaders(avgGas.headers)}</tr>\n                  </thead>\n                  <tbody>\n                    <RowInfo name='Total gas used:' values={avgGas.total} />\n                    <RowInfo name='WindowPoSt:' values={avgGas.wpost} />\n                    <RowInfo name='PreCommit:' values={avgGas.pre} />\n                    <RowInfo name='ProveCommit:' values={avgGas.prove} />\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div className='row'>\n              <div className='col-0'> </div>\n              <div className='col-11'>\n                <ul className='list-group list-group-flush'>\n                  <li className='list-group-item'>\n                    <b>Average Count:</b> number of transaction per epoch in\n                    average of the method{' '}\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Average GasUsed:</b> gas used per transaction of the\n                    method\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Ratio over total GasUsed:</b> Precedent number divided by\n                    the total gas used accross all epochs\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Average GasLimit:</b> gas limit set per transaction of\n                    the method\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Ratio over total GasLimit:</b> Precedent number divided\n                    by the total gas used accross all epochs\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Ratio GasUsed over GasLimit:</b> Total gas used for the\n                    method over total gas limit set accross all epoch\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Total GasUsed over BlockLimit:</b> Total gas used divided\n                    by total gas limit set per epoch\n                  </li>\n                  <li className='list-group-item'>\n                    <b>Total GasLimit over BlockLimit:</b> precedent number\n                    divided by total gas limit set per epoch\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// RowInfo is simply a row of the table filled by the main table\nfunction RowInfo (props) {\n  const showValues = vv =>\n    vv.map((v, idx) => (\n      <td key={idx.toString()}>\n        {isNaN(v) || Math.ceil(v) === v ? v : v.toFixed(2)}\n      </td>\n    ))\n\n  return (\n    <tr>\n      <td> {props.name} </td>\n      {showValues(props.values)}\n    </tr>\n  )\n}\n\nexport default withRouter(Gas)\n\nconst chartColors = {\n  red: 'rgb(255, 99, 132)',\n  orange: 'rgb(255, 159, 64)',\n  yellow: 'rgb(255, 205, 86)',\n  green: 'rgb(75, 192, 192)',\n  blue: 'rgb(54, 162, 235)',\n  purple: 'rgb(153, 102, 255)',\n  grey: 'rgb(201, 203, 207)'\n}\n","import React, { useState, useEffect } from 'react'\nimport { HashRouter as Router, Switch, Route, Link } from 'react-router-dom'\n\nimport Filecoin from './services/filecoin'\n\nimport Home from './views/Home'\nimport Status from './views/Status'\nimport Full from './views/Full'\nimport Deadline from './views/Deadline'\nimport MinerInfo from './views/MinerInfo'\nimport TinySummary from './components/TinySummary'\nimport Gas from './views/Gas'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.bundle.min'\nimport './App.scss'\n\nfunction App () {\n  console.log('reloaded')\n  const [miners, setMiners] = useState()\n  const [head, setHead] = useState()\n  const [node, setNode] = useState('wss://node.glif.io/space07/lotus/rpc/v0')\n  const [client, setFilClient] = useState(new Filecoin(node))\n  const [spa, setSpa] = useState()\n  const [actors, setActors] = useState()\n\n  useEffect(() => {\n    const reload = async () => {\n      await setHead()\n      await setFilClient(new Filecoin(node))\n    }\n\n    reload()\n  }, [node])\n\n  useEffect(() => {\n    if (!head) return\n    const fetchingEcon = async () => {\n      const actors = await client.fetchGenesisActors(head)\n      setActors(actors)\n    }\n\n    fetchingEcon()\n  }, [client, head])\n\n  // useEffect(() => {\n  //   if (!head) return\n\n  //   client.fetchPower(head).then(power => {\n  //     setSpa(power)\n  //   })\n  // }, [head, client])\n\n  useEffect(() => {\n    let mounted = true\n\n    client.getMiners().then(res => {\n      if (!mounted) return\n      setMiners(res)\n    })\n\n    const fetchingHead = async () => {\n      client.fetchHead().then(fetched => {\n        if (!mounted) return\n        if (head && fetched.Height === head.Height) {\n          console.log('   repeated block, skip')\n          return\n        }\n        console.log('   new block', fetched.Height, head && head.Height)\n        setHead(fetched)\n      })\n    }\n\n    fetchingHead()\n\n    const interval = setInterval(() => {\n      if (mounted) {\n        fetchingHead()\n      }\n    }, 5000)\n\n    return () => {\n      mounted = false\n      clearInterval(interval)\n      console.log('removing interval')\n    }\n  }, [client, head])\n\n  return (\n    <Router>\n      <div className='App'>\n        <div className='container'>\n          {/* <div className='row'>\n            <div className='col'>\n              Connected to Filecoin Network via&nbsp;\n              <select onChange={e => setNode(e.target.value)} value={node}>\n                <option value='wss://lotus.jimpick.com/spacerace_api/0/node/rpc/v0'>\n                  Jim's node 0\n                </option>\n                <option value='wss://lotus.jimpick.com/spacerace_api/1/node/rpc/v0'>\n                  Jim's node 1\n                </option>\n                <option value='ws://www.border.ninja:12342/node/rpc/v0'>\n                  Border's node\n                </option>\n                <option value='wss://node.glif.io/space07/lotus/rpc/v0'>\n                  Glif's node\n                </option>\n              </select>\n            </div>\n          </div> */}\n          <TinySummary client={client} head={head} />\n        </div>\n        <header className='container-fluid'>\n          <Link to='/'>\n            <h1 id='logo' className='logo'>\n              <span>spacegap</span>\n            </h1>\n          </Link>\n        </header>\n        <div className='container'>\n          <Switch>\n            <Route path='/miners/:minerId/deadlines/:deadlineId'>\n              <Deadline client={client} miners={miners} head={head} />\n            </Route>\n            <Route path='/miners/:minerId'>\n              <MinerInfo\n                actors={actors}\n                client={client}\n                miners={miners}\n                head={head}\n              />\n            </Route>\n            <Route path='/full'>\n              <Full client={client} miners={miners} />\n            </Route>\n            <Route path='/status'>\n              <Status head={head} spa={spa} client={client} miners={miners} />\n            </Route>\n            <Route path='/gas'>\n              <Gas client={client} head={head} />\n            </Route>\n            <Route path='/'>\n              <Home\n                actors={actors}\n                client={client}\n                head={head}\n                miners={miners}\n              />\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}