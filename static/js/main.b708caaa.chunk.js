(this.webpackJsonpspacegap=this.webpackJsonpspacegap||[]).push([[0],{102:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return G}));var a=n(14),r=n(4),i=n(1),o=n.n(i),c=n(9),s=n(10),u=n(3),l=n(11),d=n(6),m=n(2),f=n(103),p=n(55),v=n(104),h=n.n(v),g=n(107),b=(n(74),n(25),n(39)),F=n.n(b),E=n(25),w=E.format("0.2f"),y=n(172)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),j=n(42),U=n(184).mainnet.fullNode,x=window.BigInt||window.parseInt;function S(e){if(""===e)return x(0);var t=atob(e),n=[];return t.split("").forEach((function(e){var t=e.charCodeAt(0).toString(16);t.length%2&&(t="0"+t),n.push(t)})),x("0x"+n.join(""))}var O={bafkqaddgnfwc6mjpon4xg5dfnu:"systemActor",bafkqactgnfwc6mjpnfxgs5a:"initActor",bafkqaddgnfwc6mjpojsxoylsmq:"rewardActor",bafkqactgnfwc6mjpmnzg63q:"cronActor",bafkqaetgnfwc6mjpon2g64tbm5sxa33xmvza:"storagePowerActor",bafkqae3gnfwc6mjpon2g64tbm5sw2ylsnnsxi:"storageMarketActor",bafkqaftgnfwc6mjpozsxe2lgnfswi4tfm5uxg5dspe:"verifiedRegistryActor",bafkqadlgnfwc6mjpmfrwg33vnz2a:"accountActor",bafkqadtgnfwc6mjpnv2wy5djonuwo:"multisigActor",bafkqafdgnfwc6mjpobqxs3lfnz2gg2dbnzxgk3a:"paymentChannelActor",bafkqaetgnfwc6mjpon2g64tbm5sw22lomvza:"storageMinerActor",bafkqaddgnfwc6mrpon4xg5dfnu:"systemActor",bafkqactgnfwc6mrpnfxgs5a:"initActor",bafkqaddgnfwc6mrpojsxoylsmq:"rewardActorV2",bafkqactgnfwc6mrpmnzg63q:"cronActor",bafkqaetgnfwc6mrpon2g64tbm5sxa33xmvza:"storagePowerActorV2",bafkqae3gnfwc6mrpon2g64tbm5sw2ylsnnsxi:"storageMarketActorV2",bafkqaftgnfwc6mrpozsxe2lgnfswi4tfm5uxg5dspe:"verifiedRegistryActor",bafkqadlgnfwc6mrpmfrwg33vnz2a:"accountActor",bafkqadtgnfwc6mrpnv2wy5djonuwo:"multisigActor",bafkqafdgnfwc6mrpobqxs3lfnz2gg2dbnzxgk3a:"paymentChannelActor",bafkqaetgnfwc6mrpon2g64tbm5sw22lomvza:"storageMinerActorV2",bafkqaetgnfwc6nbpon2g64tbm5sw22lomvza:"storageMinerActorV3"},k=function(e){return!e||e>=138720?{Sectors:"buffer",Unproven:"buffer",Faults:"buffer",Recoveries:"buffer",Terminated:"buffer",ExpirationEpochs:"cid",EarlyTerminated:"cid",LivePower:{a:"bigint",b:"bigint"},UnprovenPower:{a:"bigint",b:"bigint"},FaultyPower:{a:"bigint",b:"bigint"},RecoveringPower:{a:"bigint",b:"bigint"}}:{Sectors:"buffer",Faults:"buffer",Recoveries:"buffer",Terminated:"buffer",ExpirationEpochs:"cid",EarlyTerminated:"cid",LivePower:{a:"bigint",b:"bigint"},FaultyPower:{a:"bigint",b:"bigint"},RecoveringPower:{a:"bigint",b:"bigint"}}};function M(e){for(var t=x(0),n=0;n<e.length;n++)t*=x(256),t+=x(e[n]);return t}function N(e){for(var t=new j(0),n=0;n<e.length;n++)t=(t=t.mul(new j(256))).add(new j(e[e.length-n-1]));return t}function C(e,t){var n=e.num.and(new j(1).shln(t).sub(new j(1)));return e.num=e.num.shrn(t),e.left-=t,n.toNumber()}function T(e){var t,n=function(e){for(var t={left:8*e.length,num:N(e)},n=(C(t,2),C(t,1)),a=[];t.left>0;){if(1!==C(t,1))if(1!==C(t,1)){for(var r=0,i=0,o=0;;o++){if(10===o)throw new Error("run too long");var c=C(t,8);if(c<128){if(o>9||9===o&&c>1)throw new Error("run too long");if(0===c&&i>0)throw new Error("invalid run");r|=c<<i;break}r|=(127&c)<<i,i+=7}a.push(r)}else{var s=C(t,4);a.push(s)}else a.push(1)}return{first:n,runs:a}}(e),a=n.first,r=n.runs,i=a,o=[],c=0,s=Object(m.a)(r);try{for(s.s();!(t=s.n()).done;){for(var u=t.value,l=0;l<u;l++)1===i&&o.push(c),c++;i=1-i}}catch(d){s.e(d)}finally{s.f()}return o}function A(e){var t,n=0,a=[],r=0,i=Object(m.a)(e);try{for(i.s();!(t=i.n()).done;){for(var o=t.value,c=0;c<o;c++)1===n&&a.push(r),r++;n=1-n}}catch(s){i.e(s)}finally{i.f()}return a}function R(t){return{pointers:t[1],bitfield:M(e.from(t[0],"base64"))}}function P(e){return Object.keys(e).reduce((function(t,n){return Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,{info:{seal_proof:e[n][0][0],sector_number:e[n][0][1],sealed_cid:e[n][0][2],seal_rand_epoch:e[n][0][3],deal_ids:e[n][0][4],expiration:e[n][0][5],replace_capacity:e[n][0][6],replace_sector_deadline:e[n][0][7],replace_sector_partition:e[n][0][8],replace_sector_number:e[n][0][9]},precommit_deposit:M(e[n][1]),precommit_epoch:e[n][2],deal_weight:M(e[n][3]),verified_deal_weight:M(e[n][4])}))}),{})}function I(t){return"string"===typeof t?e.from(t,"base64"):t instanceof Array?t.map(I):t}function L(e,t,n){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(o.a.mark((function t(n,a,i){var c,s,u,l,d,f,p,v,h,g,b,F,E,w,y,j,U,x,S;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=2,n.data.pointers[0]["/"]||Array.isArray(n.data.pointers[0])&&!n.data.pointers[0][0].codec||(c=1),1!=c){t.next=44;break}s=Object(m.a)(n.data.pointers),t.prev=4,s.s();case 6:if((u=s.n()).done){t.next=34;break}if(!(l=u.value)[0]){t.next=14;break}return t.next=11,a(l[0]["/"]);case 11:return d=t.sent,t.next=14,L({bitWidth:n.bitWidth,data:R(d)},a,i);case 14:if(!l[1]){t.next=32;break}f=Object(m.a)(l[1]),t.prev=16,f.s();case 18:if((p=f.n()).done){t.next=24;break}return v=Object(r.a)(p.value,2),h=v[0],g=v[1],t.next=22,i(e.from(h,"base64"),I(g));case 22:t.next=18;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(16),f.e(t.t0);case 29:return t.prev=29,f.f(),t.finish(29);case 32:t.next=6;break;case 34:t.next=39;break;case 36:t.prev=36,t.t1=t.catch(4),s.e(t.t1);case 39:return t.prev=39,s.f(),t.finish(39);case 42:t.next=84;break;case 44:b=Object(m.a)(n.data.pointers),t.prev=45,b.s();case 47:if((F=b.n()).done){t.next=76;break}if(!((E=F.value)instanceof Array)){t.next=69;break}w=Object(m.a)(E),t.prev=51,w.s();case 53:if((y=w.n()).done){t.next=59;break}return j=Object(r.a)(y.value,2),U=j[0],x=j[1],t.next=57,i(I(U),I(x));case 57:t.next=53;break;case 59:t.next=64;break;case 61:t.prev=61,t.t2=t.catch(51),w.e(t.t2);case 64:return t.prev=64,w.f(),t.finish(64);case 67:t.next=74;break;case 69:return t.next=71,a(E["/"]);case 71:return S=t.sent,t.next=74,L({bitWidth:n.bitWidth,data:R(S)},a,i);case 74:t.next=47;break;case 76:t.next=81;break;case 78:t.prev=78,t.t3=t.catch(45),b.e(t.t3);case 81:return t.prev=81,b.f(),t.finish(81);case 84:case"end":return t.stop()}}),t,null,[[4,36,39,42],[16,26,29,32],[45,78,81,84],[51,61,64,67]])})))).apply(this,arguments)}function _(e,t){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,L({bitWidth:5,data:R(t)},n,(function(e,t){a[e.toString("hex")]=t}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(){function e(t){Object(c.a)(this,e),this.url=t;var n=new p.a(t);console.log("new endpoint",t),this.client=new f.a(n,{schema:U}),this.parents={},this.receipts={},this.minfo={}}return Object(s.a)(e,[{key:"getData",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r,i,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.client.chainGetNode(t);case 2:return n=e.sent,e.abrupt("return",n.Obj);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,this.client.stateGetActor(t,null);case 3:return a=e.sent,console.log("".concat(a.Head["/"],"/6")),e.next=7,this.client.chainGetNode("".concat(a.Head["/"],"/6"));case 7:if(r=e.sent.Obj,console.log({data:r}),r&&r[0]){e.next=11;break}return e.abrupt("return",{});case 11:return e.next=13,_(r,n);case 13:return i=e.sent,console.log({object:i}),e.abrupt("return",P(i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchHead",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.chainHead());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPartitionsSectorsState",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.StateMinerPartitions(n,a,t.Cids);case 2:return r=e.sent,e.abrupt("return",r.map((function(e){return{Sectors:A(e.AllSectors),Faults:A(e.FaultySectors).reduce((function(e,t){return e[t]=!0,e}),{}),Recoveries:A(e.RecoveringSectors).reduce((function(e,t){return e[t]=!0,e}),{}),Active:A(e.ActiveSectors).reduce((function(e,t){return e[t]=!0,e}),{}),Live:A(e.LiveSectors).reduce((function(e,t){return e[t]=!0,e}),{})}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"fetchPartitionsSectors",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.chainGetNode("".concat(t["/"]));case 2:return a=e.sent.Obj[2][2],e.abrupt("return",a.map((function(e){var t=h.a.methods.decode(k(n),e);return[{Sectors:T(t.Sectors),Faults:T(t.Faults).reduce((function(e,t){return e[t]=!0,e}),{}),Terminated:T(t.Terminated).reduce((function(e,t){return e[t]=!0,e}),{}),Recoveries:T(t.Recoveries).reduce((function(e,t){return e[t]=!0,e}),{})}]})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchTipsetHead",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.ChainGetTipSetByHeight(t,null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPower",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Blocks[0].ParentStateRoot["/"],a=t.Height>=138720?"".concat(n,"/1/@Ha:t04/1"):"".concat(n,"/@Ha:t04/1"),e.next=4,this.client.chainGetNode(a);case 4:return r=e.sent.Obj,e.abrupt("return",{TotalRawBytePower:M(y.decode(r[0])),TotalBytesCommitted:M(y.decode(r[1])),TotalQualityAdjPower:M(y.decode(r[2])),TotalQABytesCommitted:M(y.decode(r[3])),TotalPledgeCollateral:M(y.decode(r[4])),ThisEpochRawBytePower:M(y.decode(r[5])),ThisEpochQualityAdjPower:M(y.decode(r[6])),ThisEpochPledgeCollateral:M(y.decode(r[7]))});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchActor",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.StateGetActor(t,n.Cids);case 2:return(a=e.sent).type=O[a.Code["/"]],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,r,i,c,s,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.StateReadState(t,n.Cids);case 2:return a=e.sent,r=a.State,i=a.Balance,c=r.PreCommitDeposits,s=r.LockedFunds,u=r.InitialPledge,l=r.FeeDebt,d=i-u-c-s,e.abrupt("return",{Balance:w(i/1e18),InitialPledge:w(u/1e18),Available:w(d/1e18),LockedFunds:w(s/1e18),PreCommitDeposits:w(c/1e18),FeeDebt:w(l/1e18)});case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMiners",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.localStorage.getItem("miners"),n=window.localStorage.getItem("time"),!(t&&n&&Date.now()-+n<1e3)){e.next=4;break}return e.abrupt("return",JSON.parse(t));case 4:return e.next=6,fetch("https://filfox.info/api/v1/miner/top-miners/power?count=30");case 6:return e.next=8,e.sent.json();case 8:return a=e.sent,r=a.miners.reduce((function(e,t){return e[t.address]=t,e}),{}),window.localStorage.setItem("miners",JSON.stringify(r)),window.localStorage.setItem("time",Date.now()),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeadlinesProxy",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,r,i,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.stateGetActor(t,[]);case 2:return a=e.sent,e.next=5,this.client.chainGetNode("".concat(a.Head["/"],"/12"));case 5:return r=e.sent.Obj[0],e.next=8,F()(24,r,function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.client.chainGetNode(t["/"]);case 2:return n=e.sent.Obj,e.abrupt("return",{Partitions:n[0],LiveSectors:n[4],TotalSectors:n[5],FaultyPower:{Raw:Number(S(n[6][0]))}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchMinerInfo",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.StateMinerInfo(t,n.Cids));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchDeadlines",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var i,c,s,u,l,m,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.client.StateMinerProvingDeadline(t,n.Cids),this.fetchDeadlinesProxy(t,n)]);case 2:return i=e.sent,c=Object(r.a)(i,2),s=c[0],u=c[1],l=Object(a.a)(Array(48)).map((function(e,t){return Object(d.a)(Object(d.a)({},u[(s.Index+t)%48]),{},{Close:s.Close+60*t,Index:(s.Index+t)%48})})),m=u.map((function(e){return+e.LiveSectors})).reduce((function(e,t){return e+t}),0),f=u.map((function(e){return+e.FaultyPower.Raw})).reduce((function(e,t){return e+t}),0)/34359738368,e.abrupt("return",{deadlines:u.map((function(e,t){return Object(d.a)(Object(d.a)({},u[t]),{},{Close:s.Close+60*t,Index:t})})),nextDeadlines:l,SectorsCount:m,FaultsCount:f,ActiveCount:m-f,deadline:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateMinerInfo",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,r){var i,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=s.length>4&&void 0!==s[4]?s[4]:{deadlines:!0},c=t[n],a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},c)))),this.fetchMinerInfo(n,r).then((function(e){c.info=e,a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},c))))})).catch((function(e){console.error("failed to fetch miner info")})),i.deadlines&&(console.log("fff fetching deadline",n,r),this.fetchDeadlines(n,r).then((function(e){c.deadlines=e,a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},c))))})).catch((function(e){console.error("failed to fetch deadlines",e)}))),this.fetchDeposits(n,r).then((function(e){c.deposits=e,a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},c))))})).catch((function(e){console.error("failed to fetch deposits")})),this.fetchPreCommittedSectors(n,r).then((function(e){c.preCommits=e,a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},c))))})).catch((function(e){console.error("failed to fetch precommitted sectors",e)}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"updateMinerMarketInfo",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a,r){var i,c=this,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.length>4&&void 0!==s[4]?s[4]:{deadlines:!0},delete(i=t[n]).ask,this.fetchMinerInfo(n,r).then((function(e){var r=new Promise((function(e){return setTimeout((function(){e({Error:!0})}),2e3)})),o=c.client.ClientQueryAsk(e.PeerId,n);Promise.any([r,o]).then((function(e){i.ask=e,a(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},n,Object(d.a)({},i))))}))})).catch((function(e){console.error("failed to fetch miner info")}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"fetchPreCommittedSectors",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"@Ha:".concat(t,"/1/6"),e.next=3,this.getData(t);case 3:return a=e.sent,i=E.groups(Object.keys(a).map((function(e){return{SectorNumber:a[e].info.sector_number,Expiry:a[e].precommit_epoch+10210}})),(function(e){return e.Expiry})).map((function(e){var t=Object(r.a)(e,2);return{Expiry:t[0],Sectors:t[1].map((function(e){return e.SectorNumber}))}})).sort((function(e,t){return e.Expiry-t.Expiry})),e.abrupt("return",{PreCommitDeadlines:i,Count:Object.keys(a).length});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchSectors",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.StateMinerSectors(t,null,n.Cids);case 2:return a=e.sent,r=a.reduce((function(e,t){return e[t.ID]={number:t.ID,info:t},e}),{}),i=Object.keys(r).length,e.abrupt("return",{sectorsCount:i,Sectors:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parentMessages",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["/"]in this.parents)){e.next=2;break}return e.abrupt("return",this.parents[t["/"]]);case 2:return e.next=4,this.client.chainGetParentMessages(t);case 4:return n=e.sent,this.parents[t["/"]]=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiptParentMessages",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["/"]in this.receipts)){e.next=2;break}return e.abrupt("return",this.receipts[t["/"]]);case 2:return e.next=4,this.client.chainGetParentReceipts(t);case 4:return n=e.sent,this.receipts[t["/"]]=n,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parentAndReceiptsMessages",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,i,c,s,u=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=u[i];return e.next=3,this.parentMessages(t);case 3:return c=e.sent,e.next=6,this.receiptParentMessages(t);case 6:if(s=e.sent,c.length==s.length){e.next=9;break}throw new Error("invalid length");case 9:return e.abrupt("return",z(c,s).filter((function(e){var t=Object(r.a)(e,2),n=t[0],i=0==t[1].ExitCode,o=!0;return a.length>0&&(o=a.includes(n.Message.Method)),i&&o})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinerPower",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["/"]in this.minfo)){e.next=2;break}return e.abrupt("return",this.minfo[t["/"]]);case 2:return e.next=4,this.client.stateMinerPower(a,t);case 4:return r=e.sent,this.minfo[t["/"]]=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"fetchGenesisActors",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,i,c,s,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.client.StateCirculatingSupply(t.Cids),this.client.StateReadState("f02",t.Cids),this.client.StateReadState("f04",t.Cids),this.client.StateReadState("f05",t.Cids),this.client.StateReadState("f099",t.Cids),this.client.StateVMCirculatingSupplyInternal(t.Cids)]);case 2:return n=e.sent,a=Object(r.a)(n,6),i=a[0],c=a[1],s=a[2],u=a[3],l=a[4],d=a[5],e.abrupt("return",{Supply:i,Reward:c,Power:s,Market:u,Burnt:l,SupplyVM:d});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeEconomics",value:function(e,t,n){var a=t.Supply,r=t.Reward,i=t.Power,o=n.projectedDays,c=n.perDurationNwRbGrowth,s=void 0===c?10*Math.pow(2,50):c,u=n.perDurationMinerQaGrowth,l=void 0===u?Math.pow(2,51):u,d={currEpoch:+e.Height,nwqap:+i.State.ThisEpochQualityAdjPower,nwqapP:+i.State.ThisEpochQAPowerSmoothed.PositionEstimate/Math.pow(2,128),nwqapV:+i.State.ThisEpochQAPowerSmoothed.VelocityEstimate/Math.pow(2,128),nwCircSupply:+a/1e18,perEpochRewardP:+r.State.ThisEpochRewardSmoothed.PositionEstimate/(1e18*Math.pow(2,128)),perEpochRewardV:+r.State.ThisEpochRewardSmoothed.VelocityEstimate/(1e18*Math.pow(2,128)),nwCumsumRealized:+r.State.CumsumRealized,perDurationNwRbGrowth:s,projectedDays:o,perDurationMinerQaGrowth:l};return new g.a(d).summary()}}]),e}(),z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.map((function(e,t){return n.reduce((function(e,n){return[].concat(Object(a.a)(e),[n[t]])}),[e])}))}}).call(this,n(16).Buffer)},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(9),r=n(10),i=function(e){var t=288888888e10,n=Math.pow(2,1/1051200),a=1/Math.log(n),r=-t*a;return Math.log((e-r)/(t*a))/Math.log(n)},o=function(e,t,n,a){var r=Math.log(2)/6307200,i=33e7*(1-Math.pow(Math.E,-r*t)),o=33e7*(1-Math.pow(Math.E,-r*e)),c=77e7*(1-Math.pow(Math.E,-r*a));return o+77e7*(1-Math.pow(Math.E,-r*n))-i-c},c=function(e){var t=Math.pow(2,1/1051200);return 288888888e10*Math.pow(t,e)},s=function(){function e(t){var n=t.currEpoch,r=t.nwqap,i=t.nwqapP,o=t.nwqapV,c=t.nwCircSupply,s=t.perEpochRewardP,u=t.perEpochRewardV,l=t.perDurationNwRbGrowth,d=t.projectedDays,m=t.perDurationMinerQaGrowth,f=t.nwCumsumRealized;Object(a.a)(this,e),Object.assign(this,{currEpoch:n,nwqap:r,nwqapP:i,nwqapV:o,nwCircSupply:c,perEpochRewardP:s,perEpochRewardV:u,perDurationNwRbGrowth:l,projectedDays:d,perDurationMinerQaGrowth:m,nwCumsumRealized:f})}return Object(r.a)(e,[{key:"projectFutureReward",value:function(e,t){var n=new u(this.nwqapP,this.nwqapV),a=new u(this.perEpochRewardP,this.perEpochRewardV);return e*l(a,n,2880*t)}},{key:"computeInitialPledgeForQAPower",value:function(e,t){return this.projectFutureReward(e,20)+.3*e*this.nwCircSupply/Math.max(this.nwqap,c(t))}},{key:"summary",value:function(){return{sectorIp:this.computeInitialPledgeForQAPower(32*Math.pow(2,30),this.currEpoch),sectorProjectedReward:this.projectFutureReward(32*Math.pow(2,30),360),sectorProjectedReward1:this.projectFutureReward(32*Math.pow(2,30),1),sectorFaultFee:this.projectFutureReward(32*Math.pow(2,30),3.51)}}},{key:"computeInitialPledgeFromAssumptions",value:function(){for(var e=this.currEpoch,t=this.nwqap,n=this.nwqapP,a=this.nwqapV,r=this.nwCircSupply,s=this.perEpochRewardP,d=this.perEpochRewardV,m=this.perDurationNwRbGrowth,f=this.projectedDays,p=this.perDurationMinerQaGrowth,v=this.nwCumsumRealized,h=new u(n,a),g=new u(s,d),b=m/f/2880,F=p/f/2880,E=[],w=0,y=t,j=v,U=i(v),x=e+1;x<e+2880*f+1;x++){var S=F*(l(g,h,57600)+.3*r/Math.max(y,c(x)));E.push(S),w+=S;var O=i(j+=y+=b),k=o(x,x-1,O,U);g.addNewEntry(k,1),h.addNewEntry(y,1),U=O}return{newInitialPledges:E,totalInitialPledge:w}}}]),e}(),u=function(){function e(t,n){Object(a.a)(this,e),this.alpha=925e-6,this.beta=284e-9,this.p=t,this.v=n}return Object(r.a)(e,[{key:"addNewEntry",value:function(e,t){this.p+=this.v*t;var n=e-this.p;this.p+=this.alpha*n,this.p=Math.max(this.p,0),this.v+=this.beta*n/t}}]),e}(),l=function(e,t,n){var a=Math.log(t.p+t.v),r=Math.log(t.p+t.v+t.v*n);return(t.v*e.p*(r-a)+e.v*(t.p*(a-r)+t.v*n))/Math.pow(t.v,2)}},112:function(e,t,n){e.exports=n(183)},117:function(e,t,n){},126:function(e,t){},138:function(e,t){},140:function(e,t){},182:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(101),o=(n(117),n(1)),c=n.n(o),s=n(3),u=n(4),l=n(8),d=n(12),m=n(102),f=n(58),p=n.n(f);function v(e){var t=e.title,n=e.url,a=e.desc;return r.a.createElement("div",{className:"summary col-sm"},r.a.createElement("div",{className:"summary-title ".concat(t?"":"gradient")},n?r.a.createElement("a",{href:n},t):r.a.createElement(r.a.Fragment,null,t)),r.a.createElement("div",{className:"summary-desc"},a))}function h(){return r.a.createElement("img",{src:"https://filecoin.io/images/filecoin-logo.svg",class:"fil-logo"})}var g=n(6),b=a.createContext();function F(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(),c=Object(u.a)(o,2);c[0],c[1];return Object(a.useEffect)((function(){!function(e,t){var n=new WebSocket("wss://api.spacegap.d.interplanetary.one");n.onopen=function(e){},n.onmessage=function(t){e(JSON.parse(t.data))}}((function(e){i((function(t){return Object(g.a)(Object(g.a)({},t),e)}))}))}),[]),a.createElement(b.Provider,{value:{data:r}},e.children)}var E=n(25),w=(E.format(","),E.format(",.0f")),y=E.format(",.3f"),j=E.format(",.1f");var U=Object(d.h)((function(){var e=Object(a.useContext)(b).data,t=e.actors,n=e.economics;return r.a.createElement("section",{id:"home",className:"container"},r.a.createElement("div",{className:"section"},r.a.createElement("div",{class:"search-bar"},r.a.createElement("input",{type:"text",placeholder:"look up a miner address",onKeyDown:function(e){"Enter"===e.key&&(window.location.href="/#/address/".concat(e.target.value))}}))),r.a.createElement("div",{id:"actors",className:"section"},r.a.createElement("h3",null,"Tokens"),r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.circulatingSupply),r.a.createElement(h,null)),desc:"Circulating Supply"}),r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.burnt),r.a.createElement(h,null)),desc:"Burnt"}),r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.locked),r.a.createElement(h,null)),desc:"Locked"})),r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.last24hNewSupply),r.a.createElement(h,null)),desc:"24h new supply"}),r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.last24hNewBurnt),r.a.createElement(h,null)),desc:"24h new Burnt"}),r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,w(t.last24hLocked),r.a.createElement(h,null)),desc:"Locked"}))),r.a.createElement("div",{id:"actors2",className:"section"},r.a.createElement("h3",null,"Power"),r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:t&&"".concat(j(t.networkRaw)," PiB"),desc:"Network Raw"}),r.a.createElement(v,{title:t&&"".concat(j(t.last24hNewStorage)," PiB"),desc:"24h new storage"}),r.a.createElement(v,{title:t&&t.activeMiners,desc:"Active Miners"}))),r.a.createElement("div",{id:"economics",className:"section"},r.a.createElement("h3",null,"Economics"),r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:n&&r.a.createElement(r.a.Fragment,null,y(n.sectorPledge),r.a.createElement(h,null)),desc:"Sector Pledge"}),r.a.createElement(v,{title:n&&r.a.createElement(r.a.Fragment,null,y(n.sectorProjectedReward||0),r.a.createElement(h,null)),desc:"Sector 360-Days Reward"}),r.a.createElement(v,{title:n&&r.a.createElement(r.a.Fragment,null,y(n.sectorFaultFee||0),r.a.createElement(h,null)),desc:"Sector Fault Fee"})),r.a.createElement("div",{class:"grid"},r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,y(t.blockReward),r.a.createElement(h,null)),desc:"Block Reward"}),r.a.createElement(v,{title:n&&r.a.createElement(r.a.Fragment,null,y(n.dayFilTiBReward),r.a.createElement(h,null)),desc:"1-day FIL/TiB Reward"})),"These numbers are approximate projections based on the current network state and may be incorrect, do your own research."),r.a.createElement("div",{className:"section"},r.a.createElement("h3",null,"Gas"),"See ",r.a.createElement(l.b,{to:"/gas"}," Gas ")," for a detailed gas analysis."),r.a.createElement("div",{className:"section"},r.a.createElement("h3",null,"Market"),"See ",r.a.createElement(l.b,{to:"/market"}," Market "),"."),r.a.createElement("div",{className:"section"},r.a.createElement("h3",null,"Top miners"),r.a.createElement("div",null,"See deadlines of ",r.a.createElement(l.b,{to:"/full"},"top 50 miners")," or click on individual miners or the ",r.a.createElement(l.b,{to:"/status"},"network status"),".")),r.a.createElement("div",{className:"spacerace card section"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-sm space table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Miner"),r.a.createElement("th",{scope:"col"},"Power"),r.a.createElement("th",{scope:"col"},"PreCommits"),r.a.createElement("th",{scope:"col"},"Available Balance"))),r.a.createElement("tbody",null,e&&e.miners&&Object.keys(e.miners).map((function(t,n){var a;return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n+1),r.a.createElement("td",{align:"right",className:"minerAddress"},r.a.createElement(l.b,{to:"/miners/".concat(e.miners[t].address)},e.miners[t].address)),r.a.createElement("td",{align:"right"},p()(e.miners[t].rawPower,{standard:"iec",round:3})),r.a.createElement("td",{align:"right"},e.miners[t]?e.miners[t].preCommitsCount||0:r.a.createElement("div",{className:"gradient"})),r.a.createElement("td",{align:"right"},(null===(a=e.miners[t].deposits)||void 0===a?void 0:a.available)?"".concat(e.miners[t].deposits.available," FIL"):r.a.createElement("div",{className:"gradient"})))})))))))})),x=n(78),S=n(5);function O(){var e=Object(S.a)(["# regl-camera"]);return O=function(){return e},e}function k(e,t){var n=e.module();return n.variable(t()).define(["md"],(function(e){return e(O())})),n.variable(t("createReglCamera")).define("createReglCamera",["self","require"],(function(e,t){var n={},a={},r={};return function(t){"object"===typeof a&&"undefined"!==typeof r?r.exports=t():("undefined"!==typeof window?window:"undefined"!==typeof n?n:"undefined"!==typeof e?e:this).createREGLCamera=t()}((function(){return function e(n,a,r){function i(c,s){if(!a[c]){if(!n[c]){var u="function"==typeof t&&t;if(!s&&u)return u(c,!0);if(o)return o(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[c]={exports:{}};n[c][0].call(d.exports,(function(e){return i(n[c][1][e]||e)}),d,d.exports,e,n,a,r)}return a[c].exports}for(var o="function"==typeof t&&t,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],2:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],3:[function(e,t,n){t.exports=function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=t[9],m=t[10],f=t[11],p=t[12],v=t[13],h=t[14],g=t[15],b=n*c-a*o,F=n*s-r*o,E=n*u-i*o,w=a*s-r*c,y=a*u-i*c,j=r*u-i*s,U=l*v-d*p,x=l*h-m*p,S=l*g-f*p,O=d*h-m*v,k=d*g-f*v,M=m*g-f*h,N=b*M-F*k+E*O+w*S-y*x+j*U;if(!N)return null;return N=1/N,e[0]=(c*M-s*k+u*O)*N,e[1]=(r*k-a*M-i*O)*N,e[2]=(v*j-h*y+g*w)*N,e[3]=(m*y-d*j-f*w)*N,e[4]=(s*S-o*M-u*x)*N,e[5]=(n*M-r*S+i*x)*N,e[6]=(h*E-p*j-g*F)*N,e[7]=(l*j-m*E+f*F)*N,e[8]=(o*k-c*S+u*U)*N,e[9]=(a*S-n*k-i*U)*N,e[10]=(p*y-v*E+g*b)*N,e[11]=(d*E-l*y-f*b)*N,e[12]=(c*x-o*O-s*U)*N,e[13]=(n*O-a*x+r*U)*N,e[14]=(v*F-p*w-h*b)*N,e[15]=(l*w-d*F+m*b)*N,e}},{}],4:[function(e,t,n){var a=e("./identity");t.exports=function(e,t,n,r){var i,o,c,s,u,l,d,m,f,p,v=t[0],h=t[1],g=t[2],b=r[0],F=r[1],E=r[2],w=n[0],y=n[1],j=n[2];if(Math.abs(v-w)<1e-6&&Math.abs(h-y)<1e-6&&Math.abs(g-j)<1e-6)return a(e);d=v-w,m=h-y,f=g-j,p=1/Math.sqrt(d*d+m*m+f*f),i=F*(f*=p)-E*(m*=p),o=E*(d*=p)-b*f,c=b*m-F*d,(p=Math.sqrt(i*i+o*o+c*c))?(i*=p=1/p,o*=p,c*=p):(i=0,o=0,c=0);s=m*c-f*o,u=f*i-d*c,l=d*o-m*i,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0);return e[0]=i,e[1]=s,e[2]=d,e[3]=0,e[4]=o,e[5]=u,e[6]=m,e[7]=0,e[8]=c,e[9]=l,e[10]=f,e[11]=0,e[12]=-(i*v+o*h+c*g),e[13]=-(s*v+u*h+l*g),e[14]=-(d*v+m*h+f*g),e[15]=1,e}},{"./identity":2}],5:[function(e,t,n){t.exports=function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=t[9],f=t[10],p=t[11],v=t[12],h=t[13],g=t[14],b=t[15],F=n[0],E=n[1],w=n[2],y=n[3];return e[0]=F*a+E*c+w*d+y*v,e[1]=F*r+E*s+w*m+y*h,e[2]=F*i+E*u+w*f+y*g,e[3]=F*o+E*l+w*p+y*b,F=n[4],E=n[5],w=n[6],y=n[7],e[4]=F*a+E*c+w*d+y*v,e[5]=F*r+E*s+w*m+y*h,e[6]=F*i+E*u+w*f+y*g,e[7]=F*o+E*l+w*p+y*b,F=n[8],E=n[9],w=n[10],y=n[11],e[8]=F*a+E*c+w*d+y*v,e[9]=F*r+E*s+w*m+y*h,e[10]=F*i+E*u+w*f+y*g,e[11]=F*o+E*l+w*p+y*b,F=n[12],E=n[13],w=n[14],y=n[15],e[12]=F*a+E*c+w*d+y*v,e[13]=F*r+E*s+w*m+y*h,e[14]=F*i+E*u+w*f+y*g,e[15]=F*o+E*l+w*p+y*b,e}},{}],6:[function(e,t,n){t.exports=function(e,t,n,a,r){var i=1/Math.tan(t/2),o=1/(a-r);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+a)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*a*o,e[15]=0,e}},{}],7:[function(e,t,n){t.exports=function(e,t,n){var a=n[0],r=n[1],i=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],8:[function(e,t,n){t.exports=function(e,t,n){var a,r,i,o,c,s,u,l,d,m,f,p,v=n[0],h=n[1],g=n[2];t===e?(e[12]=t[0]*v+t[4]*h+t[8]*g+t[12],e[13]=t[1]*v+t[5]*h+t[9]*g+t[13],e[14]=t[2]*v+t[6]*h+t[10]*g+t[14],e[15]=t[3]*v+t[7]*h+t[11]*g+t[15]):(a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=t[9],f=t[10],p=t[11],e[0]=a,e[1]=r,e[2]=i,e[3]=o,e[4]=c,e[5]=s,e[6]=u,e[7]=l,e[8]=d,e[9]=m,e[10]=f,e[11]=p,e[12]=a*v+c*h+d*g+t[12],e[13]=r*v+s*h+m*g+t[13],e[14]=i*v+u*h+f*g+t[14],e[15]=o*v+l*h+p*g+t[15]);return e}},{}],9:[function(e,t,n){t.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}},{}],10:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],11:[function(e,t,n){t.exports=1e-6},{}],12:[function(e,t,n){t.exports=function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],c=t[1],s=t[2];return Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-c)<=a*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))};var a=e("./epsilon")},{"./epsilon":11}],13:[function(e,t,n){t.exports=function(e,t){var n=t[0],a=t[1],r=t[2],i=n*n+a*a+r*r;i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i);return e}},{}],14:[function(e,t,n){t.exports=function(e,t,n,a){var r=n[1],i=n[2],o=t[1]-r,c=t[2]-i,s=Math.sin(a),u=Math.cos(a);return e[0]=t[0],e[1]=r+o*u-c*s,e[2]=i+o*s+c*u,e}},{}],15:[function(e,t,n){t.exports=function(e,t,n,a){var r=n[0],i=n[2],o=t[0]-r,c=t[2]-i,s=Math.sin(a),u=Math.cos(a);return e[0]=r+c*s+o*u,e[1]=t[1],e[2]=i+c*u-o*s,e}},{}],16:[function(e,t,n){t.exports=function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e}},{}],17:[function(e,t,n){t.exports=function(e,t,n){var a=t[0],r=t[1],i=t[2],o=n[3]*a+n[7]*r+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*a+n[4]*r+n[8]*i+n[12])/o,e[1]=(n[1]*a+n[5]*r+n[9]*i+n[13])/o,e[2]=(n[2]*a+n[6]*r+n[10]*i+n[14])/o,e}},{}],18:[function(e,t,n){var a=e("gl-vec3/transformMat4"),r=e("gl-vec3/rotateY"),i=e("gl-vec3/rotateX"),o=e("gl-vec3/equals"),c=e("gl-vec3/add"),s=e("gl-vec3/scaleAndAdd"),u=e("gl-vec3/copy"),l=e("gl-vec3/normalize"),d=e("gl-mat4/identity"),m=e("gl-mat4/invert"),f=e("gl-mat4/translate"),p=e("gl-mat4/scale"),v=e("gl-mat4/lookAt"),h=e("gl-mat4/perspective"),g=.5*Math.PI-1e-4,b=.5*-Math.PI+1e-4;t.exports=function(e){var t=!0,n={aspectRatio:(e=e||{}).aspectRatio?e.aspectRatio:1,zoomAboutCursor:void 0===e.zoomAboutCursor||e.zoomAboutCursor,distance:void 0===e.distance?10:e.distance,phi:void 0===e.phi?0:e.phi,theta:void 0===e.theta?0:e.theta,fovY:void 0===e.fovY?Math.PI/4:e.fovY,near:void 0===e.near?.1:e.near,far:void 0===e.far?100:e.far,panDecayTime:e.panDecayTime||100,zoomDecayTime:e.zoomDecayTime||100,rotationDecayTime:e.rotationDecayTime||100,dirty:!0,up:e.up||new Float32Array([0,1,0]),center:e.center||new Float32Array(3),rotationCenter:e.rotationCenter||e.center&&e.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},F=null,E={tick:function(e){if(R.zoom&&(n.zoom=R.zoom),R.dTheta&&(n.dTheta=R.dTheta),R.dPhi&&(n.dPhi=R.dPhi),R.panX&&(n.panX=R.panX),R.panY&&(n.panY=R.panY),R.panZ&&(n.panZ=R.panZ),R.yaw&&(n.yaw=R.yaw),R.pitch&&(n.pitch=R.pitch),A(R),e){var a=n.dPhi,r=n.dTheta,i=n.zoom,c=n.panX,s=n.panY,u=n.panZ,l=n.pitch,d=n.yaw;Object.assign(n,e),void 0!==e.dPhi&&(n.dPhi+=a),void 0!==e.dTheta&&(n.dTheta+=r),void 0!==e.zoom&&(n.zoom+=i),void 0!==e.panX&&(n.panX+=c),void 0!==e.panY&&(n.panY+=s),void 0!==e.panZ&&(n.panZ+=u),void 0!==e.pitch&&(n.pitch+=l),void 0!==e.yaw&&(n.yaw+=d)}o(n.up,O.up)&&o(n.center,O.center)&&n.near===O.near&&n.far===O.far&&n.phi===O.phi&&n.theta===O.theta&&n.distance===O.distance&&n.fovY===O.fovY||(M.dPhi=n.phi-O.phi,M.dTheta=n.theta-O.theta,M.zoom=n.distance/O.distance-1,n.theta=O.theta,n.distance=O.distance,n.phi=O.phi,M.yaw=0,M.pitch=0,M.panX=0,M.panY=0,M.panZ=0,M.mouseX=0,M.mouseY=0,P(M)),!function(){if(Math.abs(n.zoom)>1e-4)return!0;if(Math.abs(n.panX)>1e-4)return!0;if(Math.abs(n.panY)>1e-4)return!0;if(Math.abs(n.panZ)>1e-4)return!0;if(Math.abs(n.dTheta)>1e-4)return!0;if(Math.abs(n.dPhi)>1e-4)return!0;if(Math.abs(n.yaw)>1e-4)return!0;if(Math.abs(n.pitch)>1e-4)return!0}()?A(n):P(n);var m=Date.now();null!==F&&function(e){var t=n.panDecayTime?Math.exp(-e/n.panDecayTime/Math.LN2):0,a=n.zoomDecayTime?Math.exp(-e/n.zoomDecayTime/Math.LN2):0,r=n.rotationDecayTime?Math.exp(-e/n.rotationDecayTime/Math.LN2):0;n.zoom*=a,n.panX*=t,n.panY*=t,n.panZ*=t,n.dTheta*=r,n.dPhi*=r,n.yaw*=r,n.pitch*=r}(m-F),F=m,E.state.dirty=t,t=!1,k()},taint:C,resize:T,params:n,rotate:function(e,t){R.dTheta+=e,R.dPhi+=t},pivot:function(e,t){var a=E.params.fovY;R.yaw+=e*a*n.aspectRatio,R.pitch+=t*a},pan:function(e,t){var a=E.params.distance*Math.tan(.5*E.params.fovY)*2;return R.panX+=e*n.aspectRatio*a,R.panY+=t*a,E},zoom:function(e,t,a){return R.zoom+=a,n.mouseX=e,n.mouseY=t,E},computeMatrices:N,state:{}};E.state.projection=new Float32Array(16),E.state.viewInv=new Float32Array(16),E.state.view=new Float32Array(16),E.state.width=null,E.state.height=null,E.state.eye=new Float32Array(3);var w=new Float32Array(3),y=new Float32Array(3),j=new Float32Array(3),U=new Float32Array(3),x=new Float32Array(3),S=new Float32Array(16),O={up:new Float32Array(3),center:new Float32Array(3)};function k(){u(O.up,n.up),u(O.center,n.center),O.near=n.near,O.far=n.far,O.distance=n.distance,O.phi=n.phi,O.theta=n.theta,O.fovY=n.fovY}k();var M={};function N(){E.state.eye[0]=0,E.state.eye[1]=0,E.state.eye[2]=n.distance,i(E.state.eye,E.state.eye,x,-n.phi),r(E.state.eye,E.state.eye,x,n.theta),c(E.state.eye,E.state.eye,n.center),v(E.state.view,E.state.eye,n.center,n.up),h(E.state.projection,n.fovY,E.params.aspectRatio,n.near,n.far),m(E.state.viewInv,E.state.view)}function C(){t=!0}function T(e){E.params.aspectRatio=e,N(),C()}function A(e){e.zoom=0,e.dTheta=0,e.dPhi=0,e.panX=0,e.panY=0,e.panZ=0,e.yaw=0,e.pitch=0}var R={};function P(e){var t;d(S),n.zoomAboutCursor&&(t=n.distance*Math.tan(.5*n.fovY),w[0]=e.mouseX*n.aspectRatio*t,w[1]=e.mouseY*t,w[2]=0,f(S,S,w)),w[0]=1+e.zoom,w[1]=1+e.zoom,w[2]=1,p(S,S,w),n.zoomAboutCursor&&(t=n.distance*Math.tan(.5*n.fovY),w[0]=-e.mouseX*n.aspectRatio*t,w[1]=-e.mouseY*t,w[2]=0,f(S,S,w)),S[12]-=.5*e.panX,S[13]-=.5*e.panY,a(n.center,n.center,E.state.view),a(n.center,n.center,S),a(n.center,n.center,E.state.viewInv),n.rotateAboutCenter&&u(n.rotationCenter,n.center),n.distance*=1+e.zoom;var o=n.phi;n.phi+=e.dPhi,n.phi=Math.min(g,Math.max(b,n.phi));var c=n.phi-o,m=n.theta;n.theta+=e.dTheta;var v=n.theta-m;if(r(n.center,n.center,n.rotationCenter,v-n.theta),i(n.center,n.center,n.rotationCenter,-c),r(n.center,n.center,n.rotationCenter,n.theta),0!==e.yaw||0!==e.pitch){j[0]=E.state.view[0],j[1]=E.state.view[4],j[2]=E.state.view[8],l(j,j),y[0]=E.state.view[1],y[1]=E.state.view[5],y[2]=E.state.view[9],l(y,y),U[0]=E.state.view[2],U[1]=E.state.view[6],U[2]=E.state.view[10],l(U,U);var h=Math.min(g,Math.max(b,n.phi+.5*e.pitch)),F=h-n.phi;s(n.center,n.center,j,-Math.sin(.5*e.yaw)*n.distance),s(n.center,n.center,y,-Math.sin(F)*n.distance),s(n.center,n.center,U,(2-Math.cos(.5*e.yaw)-Math.cos(F))*n.distance),n.phi=h,n.theta+=.5*e.yaw}N(),C()}return A(R),T(E.params.aspectRatio),E}},{"gl-mat4/identity":2,"gl-mat4/invert":3,"gl-mat4/lookAt":4,"gl-mat4/perspective":6,"gl-mat4/scale":7,"gl-mat4/translate":8,"gl-vec3/add":9,"gl-vec3/copy":10,"gl-vec3/equals":12,"gl-vec3/normalize":13,"gl-vec3/rotateX":14,"gl-vec3/rotateY":15,"gl-vec3/scaleAndAdd":16,"gl-vec3/transformMat4":17}],19:[function(e,t,n){var a=e("gl-mat4/create"),r=e("gl-mat4/multiply"),i=e("./inertial-turntable-camera");t.exports=function(e,t){var n=e._gl.canvas;function o(){return n.clientWidth/n.clientHeight}var c=i(Object.assign({},{aspectRatio:o()},t||{})),s=a(),u=e({context:{projection:function(){return c.state.projection},view:function(){return c.state.view},viewInv:function(){return c.state.viewInv},eye:function(){return c.state.eye}},uniforms:{uProjectionView:function(e){return r(s,e.projection,e.view)}}});function l(e,t){t||(t=e,e={}),c.tick(e),e.afterTick&&(e.afterTick(c.state,c.params),c.computeMatrices()),u((function(){t(c.state,c.params)}))}return l.taint=c.taint,l.resize=c.resize,l.tick=c.tick,l.setUniforms=u,l.computeMatrices=c.computeMatrices,l.rotate=c.rotate,l.pan=c.pan,l.pivot=c.pivot,l.zoom=c.zoom,Object.defineProperties(l,{state:{get:function(){return c.state},set:function(e){c.state=e}},params:{get:function(){return c.params},set:function(e){c.params=e}},element:{get:function(){return n}}}),window.addEventListener("resize",(function(){c.resize(o())}),!1),l}},{"./inertial-turntable-camera":18,"gl-mat4/create":1,"gl-mat4/multiply":5}]},{},[19])(19)})),r.exports})),n.variable(t("createInteractions")).define("createInteractions",["self","require"],(function(e,t){var n={},a={},r={};return function(t){"object"===typeof a&&"undefined"!==typeof r?r.exports=t():("undefined"!==typeof window?window:"undefined"!==typeof n?n:"undefined"!==typeof e?e:this).createInteractions=t()}((function(){return function e(n,a,r){function i(c,s){if(!a[c]){if(!n[c]){var u="function"==typeof t&&t;if(!s&&u)return u(c,!0);if(o)return o(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[c]={exports:{}};n[c][0].call(d.exports,(function(e){return i(n[c][1][e]||e)}),d,d.exports,e,n,a,r)}return a[c].exports}for(var o="function"==typeof t&&t,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(e,t,n){var a=e("es5-ext/object/assign"),r=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/is-callable"),o=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,i,c,s,u;return arguments.length<2||"string"!==typeof e?(s=t,t=e,e=null):s=arguments[2],null==e?(n=c=!0,i=!1):(n=o.call(e,"c"),i=o.call(e,"e"),c=o.call(e,"w")),u={value:t,configurable:n,enumerable:i,writable:c},s?a(r(s),u):u}).gs=function(e,t,n){var c,s,u,l;return"string"!==typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:i(t)?null==n?n=void 0:i(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(c=!0,s=!1):(c=o.call(e,"c"),s=o.call(e,"e")),l={get:t,set:n,configurable:c,enumerable:s},u?a(r(u),l):l}},{"es5-ext/object/assign":3,"es5-ext/object/is-callable":6,"es5-ext/object/normalize-options":11,"es5-ext/string/#/contains":14}],2:[function(e,t,n){t.exports=function(){}},{}],3:[function(e,t,n){t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":4,"./shim":5}],4:[function(e,t,n){t.exports=function(){var e,t=Object.assign;return"function"===typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],5:[function(e,t,n){var a=e("../keys"),r=e("../valid-value"),i=Math.max;t.exports=function(e,t){var n,o,c,s=i(arguments.length,2);for(e=Object(r(e)),c=function(a){try{e[a]=t[a]}catch(r){n||(n=r)}},o=1;o<s;++o)a(t=arguments[o]).forEach(c);if(void 0!==n)throw n;return e}},{"../keys":8,"../valid-value":13}],6:[function(e,t,n){t.exports=function(e){return"function"===typeof e}},{}],7:[function(e,t,n){var a=e("../function/noop")();t.exports=function(e){return e!==a&&null!==e}},{"../function/noop":2}],8:[function(e,t,n){t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":9,"./shim":10}],9:[function(e,t,n){t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],10:[function(e,t,n){var a=e("../is-value"),r=Object.keys;t.exports=function(e){return r(a(e)?Object(e):e)}},{"../is-value":7}],11:[function(e,t,n){var a=e("./is-value"),r=Array.prototype.forEach,i=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=i(null);return r.call(arguments,(function(e){a(e)&&o(Object(e),t)})),t}},{"./is-value":7}],12:[function(e,t,n){t.exports=function(e){if("function"!==typeof e)throw new TypeError(e+" is not a function");return e}},{}],13:[function(e,t,n){var a=e("./is-value");t.exports=function(e){if(!a(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":7}],14:[function(e,t,n){t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":15,"./shim":16}],15:[function(e,t,n){var a="razdwatrzy";t.exports=function(){return"function"===typeof a.contains&&(!0===a.contains("dwa")&&!1===a.contains("foo"))}},{}],16:[function(e,t,n){var a=String.prototype.indexOf;t.exports=function(e){return a.call(this,e,arguments[1])>-1}},{}],17:[function(e,t,n){var a,r,i,o,c,s,u,l=e("d"),d=e("es5-ext/object/valid-callable"),m=Function.prototype.apply,f=Function.prototype.call,p=Object.create,v=Object.defineProperty,h=Object.defineProperties,g=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n,r;return d(t),r=this,a.call(this,e,n=function(){i.call(r,e,n),m.call(t,this,arguments)}),n.__eeOnceListener__=t,this},c={on:a=function(e,t){var n;return d(t),g.call(this,"__ee__")?n=this.__ee__:(n=b.value=p(null),v(this,"__ee__",b),b.value=null),n[e]?"object"===typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r,off:i=function(e,t){var n,a,r,i;if(d(t),!g.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"===typeof(a=n[e]))for(i=0;r=a[i];++i)r!==t&&r.__eeOnceListener__!==t||(2===a.length?n[e]=a[i?0:1]:a.splice(i,1));else a!==t&&a.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,a,r,i;if(g.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"===typeof r){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(r=r.slice(),t=0;a=r[t];++t)m.call(a,this,i)}else switch(arguments.length){case 1:f.call(r,this);break;case 2:f.call(r,this,arguments[1]);break;case 3:f.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];m.call(r,this,i)}}},s={on:l(a),once:l(r),off:l(i),emit:l(o)},u=h({},s),t.exports=n=function(e){return null==e?p(u):h(Object(e),s)},n.methods=c},{d:1,"es5-ext/object/valid-callable":12}],18:[function(e,t,n){t.exports=function(e,t,n){var a=t[0],r=t[1],i=t[2],o=n[3]*a+n[7]*r+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*a+n[4]*r+n[8]*i+n[12])/o,e[1]=(n[1]*a+n[5]*r+n[9]*i+n[13])/o,e[2]=(n[2]*a+n[6]*r+n[10]*i+n[14])/o,e}},{}],19:[function(e,t,n){t.exports=function(e,t){t||(t=e,e=window);var n=0,r=0,i=0,o={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function s(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function u(e,c){var u=a.x(c),l=a.y(c);"buttons"in c&&(e=0|c.buttons),(e!==n||u!==r||l!==i||s(c))&&(n=0|e,r=u||0,i=l||0,t&&t(n,r,i,o))}function l(e){u(0,e)}function d(){(n||r||i||o.shift||o.alt||o.meta||o.control)&&(r=i=0,n=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function m(e){s(e)&&t&&t(n,r,i,o)}function f(e){0===a.buttons(e)?u(0,e):u(n,e)}function p(e){u(n|a.buttons(e),e)}function v(e){u(n&~a.buttons(e),e)}function h(){c||(c=!0,e.addEventListener("mousemove",f),e.addEventListener("mousedown",p),e.addEventListener("mouseup",v),e.addEventListener("mouseleave",l),e.addEventListener("mouseenter",l),e.addEventListener("mouseout",l),e.addEventListener("mouseover",l),e!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}h();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return c},set:function(t){t?h():function(){if(!c)return;c=!1,e.removeEventListener("mousemove",f),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",v),e.removeEventListener("mouseleave",l),e.removeEventListener("mouseenter",l),e.removeEventListener("mouseout",l),e.removeEventListener("mouseover",l),e!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m))}()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g};var a=e("mouse-event")},{"mouse-event":21}],20:[function(e,t,n){var a={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,i=e.clientY||0,o=(c=t,c===window||c===document||c===document.body?a:c.getBoundingClientRect());var c;return n[0]=r-o.left,n[1]=i-o.top,n}},{}],21:[function(e,t,n){function a(e){return e.target||e.srcElement||window}n.buttons=function(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},n.element=a,n.x=function(e){if("object"===typeof e){if("offsetX"in e)return e.offsetX;var t=a(e).getBoundingClientRect();return e.clientX-t.left}return 0},n.y=function(e){if("object"===typeof e){if("offsetY"in e)return e.offsetY;var t=a(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],22:[function(e,t,n){var a=e("gl-vec3/transformMat4"),r=e("./normalized-interaction-events");t.exports=function(e,t){t=t||{};var n=e.element,o=.5*(void 0===t.zoomSpeed?1:t.zoomSpeed),c=void 0===t.zoom||t.zoom,s=void 0!==t.touchZoom?!!t.touchZoom:void 0===t.zoom||!!t.zoom,u=null,l=null,d=null,m={defaultPrevented:!1};function f(){m.defaultPrevented=!1}function p(e){return e.defaultPrevented=m.defaultPrevented,e.preventDefault=function(){e.defaultPrevented=!0,m.defaultPrevented=!0},e}var v=[0,0,0],h=[0,0];return r(n).on("wheel",(function(t){c&&(t.originalEvent.preventDefault(),e.zoom(t.x0,t.y0,Math.exp(-t.dy*o)-1))})).on("mousedown",(function(e){f(),e=p(e),u&&u(e),e.originalEvent.preventDefault()})).on("mousemove",(function(t){if(t=p(t),d&&d(t),!t.defaultPrevented&&t.active&&1===t.buttons)if(t.mods.alt){if(!c)return;e.zoom(t.x0,t.y0,Math.exp(t.dy*o)-1),t.originalEvent.preventDefault()}else t.mods.shift?(e.pan(t.dx,t.dy),t.originalEvent.preventDefault()):t.mods.meta?(e.pivot(t.dx,t.dy),t.originalEvent.preventDefault()):(e.rotate(-t.dx*i,-t.dy*i),t.originalEvent.preventDefault())})).on("mouseup",(function(e){f(),e=p(e),l&&l(e)})).on("touchstart",(function(e){e.originalEvent.preventDefault(),e=p(e),u&&u(e)})).on("touchmove",(function(t){t=p(t),d&&d(t),t.defaultPrevented||t.active&&(e.rotate(-t.dx*i,-t.dy*i),t.originalEvent.preventDefault())})).on("touchend",(function(e){f(),e=p(e),l&&l(e)})).on("pinchmove",(function(n){n.active&&(!function(e){v[0]=e.x,v[1]=e.y,v[2]=0,t.invViewportShift&&a(v,v,t.invViewportShift);h[0]=v[0],h[1]=v[1]}(n),s&&e.zoom(h[0],h[1],1-n.zoomx),e.pan(n.dx,n.dy),n.originalEvent.preventDefault())})).on("pinchstart",(function(e){e.originalEvent.preventDefault()})),u=t.onStart,d=t.onMove,l=t.onEnd,{setInteractions:function(e){u=e.onStart,l=e.onEnd,d=e.onMove}}};var i=.75*Math.PI},{"./normalized-interaction-events":23,"gl-vec3/transformMat4":18}],23:[function(e,t,n){t.exports=function(e){e=e||window;var t,n,o,c,s=i(),u=[null,null],l=[null,null],d=[null,null],m=[null,null],f=0,p={},v=e===window?function(){t=window.innerWidth,n=window.innerHeight}:function(){t=e.clientWidth,n=e.clientHeight},h=0,g={},b=a(e,(function(e,t,n,a){o=t,c=n,h=e,g=a}));function F(a){r(a,e,d),v(),p.buttons=h,p.mods=g,p.x0=p.x=p.x1=2*d[0]/t-1,p.y0=p.y=p.y1=1-2*d[1]/n,p.x2=null,p.y2=null,p.dx=2*a.deltaX/t,p.dy=-2*a.deltaY/n,p.dz=2*a.deltaZ/t,p.active=1,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=a,s.emit("wheel",p),u[0]=d[0],u[1]=d[1]}var E=null,w=null,y=0;function j(a){r(a,e,d),y=0,v(),p.buttons=h,p.mods=g,p.x=p.x1=2*d[0]/t-1,p.y=p.y1=1-2*d[1]/n,p.x2=null,p.y2=null,p.active=y,p.x0=2*E/t-1,p.y0=1-2*w/n,p.dx=0,p.dy=0,p.dz=0,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=a,s.emit("mouseup",p),E=w=null,u[0]=d[0],u[1]=d[1]}function U(a){r(a,e,d),y=1,v(),E=o,w=c,p.buttons=h,p.mods=g,p.x=p.x0=p.x1=2*d[0]/t-1,p.y=p.y0=p.y1=1-2*d[1]/n,p.x2=null,p.y2=null,p.active=y,p.dx=0,p.dy=0,p.dz=0,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=a,s.emit("mousedown",p),u[0]=d[0],u[1]=d[1]}function x(a){r(a,e,d),v(),p.buttons=h,p.mods=g,p.x0=2*E/t-1,p.y0=1-2*w/n,p.x=p.x1=2*d[0]/t-1,p.y=p.y1=1-2*d[1]/n,p.x2=null,p.y2=null,p.dx=2*(d[0]-u[0])/t,p.dy=-2*(d[1]-u[1])/n,p.active=y,p.dz=0,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=a,s.emit("mousemove",p),u[0]=d[0],u[1]=d[1]}function S(e){for(var t=e.identifier,n=0;n<m.length;n++)if(m[n]&&m[n].touch&&m[n].touch.identifier===t)return n;return-1}function O(a){l[0]=null,l[1]=null;for(var i=0;i<a.changedTouches.length;i++){var o=a.changedTouches[i];if(-1===S(o.identifier)&&f<2){var c=m[0]?1:0,u=m[0]?0:1,d={position:[0,0],touch:null};m[c]=d,f++,d.touch=o,r(o,e,d.position);m[u]&&m[u].touch}}var h=0,g=0,b=0;for(i=0;i<m.length;i++)m[i]&&(h+=m[i].position[0],g+=m[i].position[1],b++);if(h/=b,g/=b,f>0){if(p.theta=0,b>1){var F=m[1].position[0]-m[0].position[0],y=(m[0].position[1]-m[1].position[1])*t/n;p.theta=Math.atan2(y,F)}v(),p.buttons=0,p.mods={},p.active=f,E=h,w=g,p.x0=2*E/t-1,p.y0=1-2*w/n,p.x=2*h/t-1,p.y=1-2*g/n,p.x1=2*m[0].position[0]/t-1,p.y1=1-2*m[0].position[1]/n,f>1&&(p.x2=2*m[1].position[0]/t-1,p.y2=1-2*m[1].position[1]/n),p.active=f,p.dx=0,p.dy=0,p.dz=0,p.zoomx=1,p.zoomy=1,p.dtheta=0,p.originalEvent=a,s.emit(1===f?"touchstart":"pinchstart",p)}}function k(a){for(var i,o=!1,c=0;c<a.changedTouches.length;c++){var u=a.changedTouches[c];-1!==(i=S(u))&&(o=!0,m[i].touch=u,r(u,e,m[i].position))}if(o)if(1===f){for(i=0;i<m.length&&!m[i];i++);if(m[i]&&l[i]){var d=m[i].position[0],v=m[i].position[1],h=d-l[i][0],b=v-l[i][1];p.buttons=0,p.mods={},p.active=f,p.x=p.x1=2*d/t-1,p.y=p.y1=1-2*v/n,p.x2=null,p.y2=null,p.x0=2*E/t-1,p.y0=1-2*w/n,p.dx=2*h/t,p.dy=-2*b/n,p.dz=0,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=a,s.emit("touchmove",p)}}else if(2===f&&l[0]&&l[1]){var F=l[0],y=l[1],j=y[0]-F[0],U=(y[1]-F[1])*t/n,x=m[0].position,O=m[1].position,k=O[0]-x[0],M=(x[1]-O[1])*t/n,N=.5*Math.sqrt(j*j+U*U),C=Math.atan2(U,j),T=.5*Math.sqrt(k*k+M*M),A=Math.atan2(M,k),R=.5*(y[0]+F[0]),P=.5*(y[1]+F[1]),I=(h=.5*(O[0]+x[0]-F[0]-y[0]),b=.5*(O[1]+x[1]-F[1]-y[1]),T/N),L=A-C;p.buttons=0,p.mods=g,p.active=f,p.x=2*R/t-1,p.y=1-2*P/n,p.x0=2*E/t-1,p.y0=1-2*w/n,p.x1=2*x[0]/t-1,p.y1=1-2*x[1]/n,p.x2=2*O[0]/t-1,p.y2=1-2*O[1]/n,p.dx=2*h/t,p.dy=-2*b/n,p.dz=0,p.zoomx=I,p.zoomy=I,p.theta=A,p.dtheta=L,p.originalEvent=a,s.emit("pinchmove",p)}m[0]&&(l[0]=m[0].position.slice()),m[1]&&(l[1]=m[1].position.slice())}function M(e){for(var a,r=0;r<e.changedTouches.length;r++){var i=S(e.changedTouches[r]);if(-1!==i){a=m[i],m[i]=null,f--;var o=0===i?1:0;m[o]&&m[o].touch}}var c=0,u=0;if(0===f)a&&(c=a.position[0],u=a.position[1]);else{var l=0;for(r=0;r<m.length;r++)m[r]&&(c+=m[r].position[0],u+=m[r].position[1],l++);c/=l,u/=l}f<2&&(p.buttons=0,p.mods=g,p.active=f,p.x=2*c/t-1,p.y=1-2*u/n,p.x0=2*E/t-1,p.y0=1-2*w/n,p.dx=0,p.dy=0,p.dz=0,p.zoomx=1,p.zoomy=1,p.theta=0,p.dtheta=0,p.originalEvent=e,s.emit(0===f?"touchend":"pinchend",p)),0===f&&(E=w=null)}var N=!1;function C(){N||(N=!0,b.enabled=!0,e.addEventListener("wheel",F,!1),e.addEventListener("mousedown",U,!1),window.addEventListener("mousemove",x,!1),window.addEventListener("mouseup",j,!1),e.addEventListener("touchstart",O,!1),window.addEventListener("touchmove",k,!1),window.addEventListener("touchend",M,!1),window.addEventListener("touchcancel",M,!1))}return C(),s.enable=C,s.disable=function(){if(!N)return;N=!1,b.enabled=!1,e.removeEventListener("wheel",F,!1),e.removeEventListener("mousedown",U,!1),window.removeEventListener("mousemove",x,!1),window.removeEventListener("mouseup",j,!1),e.removeEventListener("touchstart",O,!1),window.removeEventListener("touchmove",k,!1),window.removeEventListener("touchend",M,!1),window.removeEventListener("touchcancel",M,!1)},s};var a=e("mouse-change"),r=e("mouse-event-offset"),i=e("event-emitter")},{"event-emitter":17,"mouse-change":19,"mouse-event-offset":20}]},{},[22])(22)})),r.exports})),n}function M(){var e=Object(S.a)(["## Implementation"]);return M=function(){return e},e}function N(){var e=Object(S.a)(["\nor you may import single functions directly\n\n```js\nimport {mat4create} from '@rreusser/gl-mat4'\n```\n"],["\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {mat4create} from '@rreusser/gl-mat4'\n\\`\\`\\`\n"]);return N=function(){return e},e}function C(){var e=Object(S.a)(["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n```js\nimport {mat4} from '@rreusser/gl-mat4'\n```\n\nafter which you can use the functions like normal, e.g."],["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {mat4} from '@rreusser/gl-mat4'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g."]);return C=function(){return e},e}function T(){var e=Object(S.a)(["## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution."]);return T=function(){return e},e}function A(){var e=Object(S.a)(["This notebook re-exports functions from [stackgl/gl-mat4](https://github.com/stackgl/gl-mat4). The license may be found [here](https://github.com/stackgl/gl-mat4/blob/master/LICENSE.md).\n\nAdditionally, it adds a function called `mat4fromMat3` to expand a 2d homogeneous transformation matrix to a 3d homogeneous transformation matrix."],["This notebook re-exports functions from [stackgl/gl-mat4](https://github.com/stackgl/gl-mat4). The license may be found [here](https://github.com/stackgl/gl-mat4/blob/master/LICENSE.md).\n\nAdditionally, it adds a function called \\`mat4fromMat3\\` to expand a 2d homogeneous transformation matrix to a 3d homogeneous transformation matrix."]);return A=function(){return e},e}function R(){var e=Object(S.a)(["# gl-mat4"]);return R=function(){return e},e}function P(e,t){var n=e.module();return n.variable(t()).define(["md"],(function(e){return e(R())})),n.variable(t()).define(["md"],(function(e){return e(A())})),n.variable(t()).define(["md"],(function(e){return e(T())})),n.variable(t()).define(["md"],(function(e){return e(C())})),n.variable(t("a")).define("a",["mat4"],(function(e){return e.create()})),n.variable(t()).define(["md"],(function(e){return e(N())})),n.variable(t("b")).define("b",["mat4create"],(function(e){return e()})),n.variable(t()).define(["md"],(function(e){return e(M())})),n.variable(t("mat4")).define("mat4",["mat4create","mat4clone","mat4copy","mat4identity","mat4transpose","mat4invert","mat4adjoint","mat4determinant","mat4multiply","mat4translate","mat4scale","mat4rotate","mat4rotateX","mat4rotateY","mat4rotateZ","mat4fromMat3","mat4fromRotation","mat4fromRotationTranslation","mat4fromScaling","mat4fromTranslation","mat4fromXRotation","mat4fromYRotation","mat4fromZRotation","mat4fromQuat","mat4frustum","mat4perspective","mat4perspectiveFromFieldOfView","mat4ortho","mat4lookAt","mat4str"],(function(e,t,n,a,r,i,o,c,s,u,l,d,m,f,p,v,h,g,b,F,E,w,y,j,U,x,S,O,k,M){return{create:e,clone:t,copy:n,identity:a,transpose:r,invert:i,adjoint:o,determinant:c,multiply:s,translate:u,scale:l,rotate:d,rotateX:m,rotateY:f,rotateZ:p,fromMat3:v,fromRotation:h,fromRotationTranslation:g,fromScaling:b,fromTranslation:F,fromXRotation:E,fromYRotation:w,fromZRotation:y,fromQuat:j,frustum:U,perspective:x,perspectiveFromFieldOfView:S,ortho:O,lookAt:k,str:M}})),n.variable(t("mat4adjoint")).define("mat4adjoint",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=t[9],m=t[10],f=t[11],p=t[12],v=t[13],h=t[14],g=t[15];return e[0]=c*(m*g-f*h)-d*(s*g-u*h)+v*(s*f-u*m),e[1]=-(a*(m*g-f*h)-d*(r*g-i*h)+v*(r*f-i*m)),e[2]=a*(s*g-u*h)-c*(r*g-i*h)+v*(r*u-i*s),e[3]=-(a*(s*f-u*m)-c*(r*f-i*m)+d*(r*u-i*s)),e[4]=-(o*(m*g-f*h)-l*(s*g-u*h)+p*(s*f-u*m)),e[5]=n*(m*g-f*h)-l*(r*g-i*h)+p*(r*f-i*m),e[6]=-(n*(s*g-u*h)-o*(r*g-i*h)+p*(r*u-i*s)),e[7]=n*(s*f-u*m)-o*(r*f-i*m)+l*(r*u-i*s),e[8]=o*(d*g-f*v)-l*(c*g-u*v)+p*(c*f-u*d),e[9]=-(n*(d*g-f*v)-l*(a*g-i*v)+p*(a*f-i*d)),e[10]=n*(c*g-u*v)-o*(a*g-i*v)+p*(a*u-i*c),e[11]=-(n*(c*f-u*d)-o*(a*f-i*d)+l*(a*u-i*c)),e[12]=-(o*(d*h-m*v)-l*(c*h-s*v)+p*(c*m-s*d)),e[13]=n*(d*h-m*v)-l*(a*h-r*v)+p*(a*m-r*d),e[14]=-(n*(c*h-s*v)-o*(a*h-r*v)+p*(a*s-r*c)),e[15]=n*(c*m-s*d)-o*(a*m-r*d)+l*(a*s-r*c),e}})),n.variable(t("mat4clone")).define("mat4clone",(function(){return function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}})),n.variable(t("mat4copy")).define("mat4copy",(function(){return function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}})),n.variable(t("mat4create")).define("mat4create",(function(){return function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4determinant")).define("mat4determinant",(function(){return function(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],o=e[5],c=e[6],s=e[7],u=e[8],l=e[9],d=e[10],m=e[11],f=e[12],p=e[13],v=e[14],h=e[15];return(t*o-n*i)*(d*h-m*v)-(t*c-a*i)*(l*h-m*p)+(t*s-r*i)*(l*v-d*p)+(n*c-a*o)*(u*h-m*f)-(n*s-r*o)*(u*v-d*f)+(a*s-r*c)*(u*p-l*f)}})),n.variable(t("mat4fromQuat")).define("mat4fromQuat",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=n+n,c=a+a,s=r+r,u=n*o,l=a*o,d=a*c,m=r*o,f=r*c,p=r*s,v=i*o,h=i*c,g=i*s;return e[0]=1-d-p,e[1]=l+g,e[2]=m-h,e[3]=0,e[4]=l-g,e[5]=1-u-p,e[6]=f+v,e[7]=0,e[8]=m+h,e[9]=f-v,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4fromRotation")).define("mat4fromRotation",(function(){return function(e,t,n){var a,r,i,o=n[0],c=n[1],s=n[2],u=Math.sqrt(o*o+c*c+s*s);return Math.abs(u)<1e-6?null:(o*=u=1/u,c*=u,s*=u,a=Math.sin(t),i=1-(r=Math.cos(t)),e[0]=o*o*i+r,e[1]=c*o*i+s*a,e[2]=s*o*i-c*a,e[3]=0,e[4]=o*c*i-s*a,e[5]=c*c*i+r,e[6]=s*c*i+o*a,e[7]=0,e[8]=o*s*i+c*a,e[9]=c*s*i-o*a,e[10]=s*s*i+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}})),n.variable(t("mat4fromMat3")).define("mat4fromMat3",(function(){return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=t[4],e[6]=0,e[7]=t[5],e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[6],e[13]=t[7],e[14]=0,e[15]=t[8]}})),n.variable(t("mat4fromRotationTranslation")).define("mat4fromRotationTranslation",(function(){return function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=a+a,s=r+r,u=i+i,l=a*c,d=a*s,m=a*u,f=r*s,p=r*u,v=i*u,h=o*c,g=o*s,b=o*u;return e[0]=1-(f+v),e[1]=d+b,e[2]=m-g,e[3]=0,e[4]=d-b,e[5]=1-(l+v),e[6]=p+h,e[7]=0,e[8]=m+g,e[9]=p-h,e[10]=1-(l+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}})),n.variable(t("mat4fromScaling")).define("mat4fromScaling",(function(){return function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4fromTranslation")).define("mat4fromTranslation",(function(){return function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}})),n.variable(t("mat4fromXRotation")).define("mat4fromXRotation",(function(){return function(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4fromYRotation")).define("mat4fromYRotation",(function(){return function(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4fromZRotation")).define("mat4fromZRotation",(function(){return function(e,t){var n=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4frustum")).define("mat4frustum",(function(){return function(e,t,n,a,r,i,o){var c=1/(n-t),s=1/(r-a),u=1/(i-o);return e[0]=2*i*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*s,e[6]=0,e[7]=0,e[8]=(n+t)*c,e[9]=(r+a)*s,e[10]=(o+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*u,e[15]=0,e}})),n.variable(t("mat4identity")).define("mat4identity",(function(){return function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}})),n.variable(t("mat4invert")).define("mat4invert",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=t[9],m=t[10],f=t[11],p=t[12],v=t[13],h=t[14],g=t[15],b=n*c-a*o,F=n*s-r*o,E=n*u-i*o,w=a*s-r*c,y=a*u-i*c,j=r*u-i*s,U=l*v-d*p,x=l*h-m*p,S=l*g-f*p,O=d*h-m*v,k=d*g-f*v,M=m*g-f*h,N=b*M-F*k+E*O+w*S-y*x+j*U;return N?(N=1/N,e[0]=(c*M-s*k+u*O)*N,e[1]=(r*k-a*M-i*O)*N,e[2]=(v*j-h*y+g*w)*N,e[3]=(m*y-d*j-f*w)*N,e[4]=(s*S-o*M-u*x)*N,e[5]=(n*M-r*S+i*x)*N,e[6]=(h*E-p*j-g*F)*N,e[7]=(l*j-m*E+f*F)*N,e[8]=(o*k-c*S+u*U)*N,e[9]=(a*S-n*k-i*U)*N,e[10]=(p*y-v*E+g*b)*N,e[11]=(d*E-l*y-f*b)*N,e[12]=(c*x-o*O-s*U)*N,e[13]=(n*O-a*x+r*U)*N,e[14]=(v*F-p*w-h*b)*N,e[15]=(l*w-d*F+m*b)*N,e):null}})),n.variable(t("mat4lookAt")).define("mat4lookAt",["mat4identity"],(function(e){return function(t,n,a,r){var i,o,c,s,u,l,d,m,f,p,v=n[0],h=n[1],g=n[2],b=r[0],F=r[1],E=r[2],w=a[0],y=a[1],j=a[2];return Math.abs(v-w)<1e-6&&Math.abs(h-y)<1e-6&&Math.abs(g-j)<1e-6?e(t):(d=v-w,m=h-y,f=g-j,i=F*(f*=p=1/Math.sqrt(d*d+m*m+f*f))-E*(m*=p),o=E*(d*=p)-b*f,c=b*m-F*d,(p=Math.sqrt(i*i+o*o+c*c))?(i*=p=1/p,o*=p,c*=p):(i=0,o=0,c=0),s=m*c-f*o,u=f*i-d*c,l=d*o-m*i,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=d,t[3]=0,t[4]=o,t[5]=u,t[6]=m,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=-(i*v+o*h+c*g),t[13]=-(s*v+u*h+l*g),t[14]=-(d*v+m*h+f*g),t[15]=1,t)}})),n.variable(t("mat4multiply")).define("mat4multiply",(function(){return function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=t[9],f=t[10],p=t[11],v=t[12],h=t[13],g=t[14],b=t[15],F=n[0],E=n[1],w=n[2],y=n[3];return e[0]=F*a+E*c+w*d+y*v,e[1]=F*r+E*s+w*m+y*h,e[2]=F*i+E*u+w*f+y*g,e[3]=F*o+E*l+w*p+y*b,F=n[4],E=n[5],w=n[6],y=n[7],e[4]=F*a+E*c+w*d+y*v,e[5]=F*r+E*s+w*m+y*h,e[6]=F*i+E*u+w*f+y*g,e[7]=F*o+E*l+w*p+y*b,F=n[8],E=n[9],w=n[10],y=n[11],e[8]=F*a+E*c+w*d+y*v,e[9]=F*r+E*s+w*m+y*h,e[10]=F*i+E*u+w*f+y*g,e[11]=F*o+E*l+w*p+y*b,F=n[12],E=n[13],w=n[14],y=n[15],e[12]=F*a+E*c+w*d+y*v,e[13]=F*r+E*s+w*m+y*h,e[14]=F*i+E*u+w*f+y*g,e[15]=F*o+E*l+w*p+y*b,e}})),n.variable(t("mat4ortho")).define("mat4ortho",(function(){return function(e,t,n,a,r,i,o){var c=1/(t-n),s=1/(a-r),u=1/(i-o);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*c,e[13]=(r+a)*s,e[14]=(o+i)*u,e[15]=1,e}})),n.variable(t("mat4perspective")).define("mat4perspective",(function(){return function(e,t,n,a,r){var i=1/Math.tan(t/2),o=1/(a-r);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+a)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*a*o,e[15]=0,e}})),n.variable(t("mat4perspectiveFromFieldOfView")).define("mat4perspectiveFromFieldOfView",(function(){return function(e,t,n,a){var r=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),c=Math.tan(t.rightDegrees*Math.PI/180),s=2/(o+c),u=2/(r+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-c)*s*.5,e[9]=(r-i)*u*.5,e[10]=a/(n-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n/(n-a),e[15]=0,e}})),n.variable(t("mat4rotate")).define("mat4rotate",(function(){return function(e,t,n,a){var r,i,o,c,s,u,l,d,m,f,p,v,h,g,b,F,E,w,y,j,U,x,S,O,k=a[0],M=a[1],N=a[2],C=Math.sqrt(k*k+M*M+N*N);return Math.abs(C)<1e-6?null:(k*=C=1/C,M*=C,N*=C,r=Math.sin(n),o=1-(i=Math.cos(n)),c=t[0],s=t[1],u=t[2],l=t[3],d=t[4],m=t[5],f=t[6],p=t[7],v=t[8],h=t[9],g=t[10],b=t[11],F=k*k*o+i,E=M*k*o+N*r,w=N*k*o-M*r,y=k*M*o-N*r,j=M*M*o+i,U=N*M*o+k*r,x=k*N*o+M*r,S=M*N*o-k*r,O=N*N*o+i,e[0]=c*F+d*E+v*w,e[1]=s*F+m*E+h*w,e[2]=u*F+f*E+g*w,e[3]=l*F+p*E+b*w,e[4]=c*y+d*j+v*U,e[5]=s*y+m*j+h*U,e[6]=u*y+f*j+g*U,e[7]=l*y+p*j+b*U,e[8]=c*x+d*S+v*O,e[9]=s*x+m*S+h*O,e[10]=u*x+f*S+g*O,e[11]=l*x+p*S+b*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}})),n.variable(t("mat4rotateX")).define("mat4rotateX",(function(){return function(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[4],o=t[5],c=t[6],s=t[7],u=t[8],l=t[9],d=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*r+u*a,e[5]=o*r+l*a,e[6]=c*r+d*a,e[7]=s*r+m*a,e[8]=u*r-i*a,e[9]=l*r-o*a,e[10]=d*r-c*a,e[11]=m*r-s*a,e}})),n.variable(t("mat4rotateY")).define("mat4rotateY",(function(){return function(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],o=t[1],c=t[2],s=t[3],u=t[8],l=t[9],d=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r-u*a,e[1]=o*r-l*a,e[2]=c*r-d*a,e[3]=s*r-m*a,e[8]=i*a+u*r,e[9]=o*a+l*r,e[10]=c*a+d*r,e[11]=s*a+m*r,e}})),n.variable(t("mat4rotateZ")).define("mat4rotateZ",(function(){return function(e,t,n){var a=Math.sin(n),r=Math.cos(n),i=t[0],o=t[1],c=t[2],s=t[3],u=t[4],l=t[5],d=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+u*a,e[1]=o*r+l*a,e[2]=c*r+d*a,e[3]=s*r+m*a,e[4]=u*r-i*a,e[5]=l*r-o*a,e[6]=d*r-c*a,e[7]=m*r-s*a,e}})),n.variable(t("mat4scale")).define("mat4scale",(function(){return function(e,t,n){var a=n[0],r=n[1],i=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}})),n.variable(t("mat4str")).define("mat4str",(function(){return function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}})),n.variable(t("mat4translate")).define("mat4translate",(function(){return function(e,t,n){var a,r,i,o,c,s,u,l,d,m,f,p,v=n[0],h=n[1],g=n[2];return t===e?(e[12]=t[0]*v+t[4]*h+t[8]*g+t[12],e[13]=t[1]*v+t[5]*h+t[9]*g+t[13],e[14]=t[2]*v+t[6]*h+t[10]*g+t[14],e[15]=t[3]*v+t[7]*h+t[11]*g+t[15]):(a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=t[9],f=t[10],p=t[11],e[0]=a,e[1]=r,e[2]=i,e[3]=o,e[4]=c,e[5]=s,e[6]=u,e[7]=l,e[8]=d,e[9]=m,e[10]=f,e[11]=p,e[12]=a*v+c*h+d*g+t[12],e[13]=r*v+s*h+m*g+t[13],e[14]=i*v+u*h+f*g+t[14],e[15]=o*v+l*h+p*g+t[15]),e}})),n.variable(t("mat4transpose")).define("mat4transpose",(function(){return function(e,t){if(e===t){var n=t[1],a=t[2],r=t[3],i=t[6],o=t[7],c=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=i,e[11]=t[14],e[12]=r,e[13]=o,e[14]=c}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}})),n}function I(){var e=Object(S.a)(["## Implementation"]);return I=function(){return e},e}function L(){var e=Object(S.a)(["\nor you may import single functions directly\n\n```js\nimport {mat3create} from '@rreusser/gl-mat3'\n```\n"],["\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {mat3create} from '@rreusser/gl-mat3'\n\\`\\`\\`\n"]);return L=function(){return e},e}function D(){var e=Object(S.a)(["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n```js\nimport {mat3} from '@rreusser/gl-mat3'\n```\n\nafter which you can use the functions like normal, e.g."],["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {mat3} from '@rreusser/gl-mat3'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g."]);return D=function(){return e},e}function _(){var e=Object(S.a)(["## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution."]);return _=function(){return e},e}function B(){var e=Object(S.a)(["This notebook re-exports functions from [stackgl/gl-mat3](https://github.com/stackgl/gl-mat3). The license may be found [here](https://github.com/stackgl/gl-mat3/blob/master/LICENSE.md)."]);return B=function(){return e},e}function G(){var e=Object(S.a)(["# gl-mat3"]);return G=function(){return e},e}function z(e,t){var n=e.module();return n.variable(t()).define(["md"],(function(e){return e(G())})),n.variable(t()).define(["md"],(function(e){return e(B())})),n.variable(t()).define(["md"],(function(e){return e(_())})),n.variable(t()).define(["md"],(function(e){return e(D())})),n.variable(t("a")).define("a",["mat3"],(function(e){return e.create()})),n.variable(t()).define(["md"],(function(e){return e(L())})),n.variable(t("b")).define("b",["mat3create"],(function(e){return e()})),n.variable(t()).define(["md"],(function(e){return e(I())})),n.variable(t("mat3")).define("mat3",["mat3adjoint","mat3clone","mat3copy","mat3create","mat3determinant","mat3frob","mat3fromMat2d","mat3fromMat4","mat3fromQuat","mat3identity","mat3invert","mat3multiply","mat3normalFromMat4","mat3rotate","mat3scale","mat3str","mat3translate","mat3transpose"],(function(e,t,n,a,r,i,o,c,s,u,l,d,m,f,p,v,h,g){return{adjoint:e,clone:t,copy:n,create:a,determinant:r,frob:i,fromMat2d:o,fromMat4:c,fromQuat:s,identity:u,invert:l,multiply:d,normalFromMat4:m,rotate:f,scale:p,str:v,translate:h,transpose:g}})),n.variable(t("mat3adjoint")).define("mat3adjoint",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8];return e[0]=o*l-c*u,e[1]=r*u-a*l,e[2]=a*c-r*o,e[3]=c*s-i*l,e[4]=n*l-r*s,e[5]=r*i-n*c,e[6]=i*u-o*s,e[7]=a*s-n*u,e[8]=n*o-a*i,e}})),n.variable(t("mat3clone")).define("mat3clone",(function(){return function(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}})),n.variable(t("mat3copy")).define("mat3copy",(function(){return function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}})),n.variable(t("mat3create")).define("mat3create",(function(){return function(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}})),n.variable(t("mat3determinant")).define("mat3determinant",(function(){return function(e){var t=e[0],n=e[1],a=e[2],r=e[3],i=e[4],o=e[5],c=e[6],s=e[7],u=e[8];return t*(u*i-o*s)+n*(o*c-u*r)+a*(s*r-i*c)}})),n.variable(t("mat3frob")).define("mat3frob",(function(){return function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}})),n.variable(t("mat3fromMat2d")).define("mat3fromMat2d",(function(){return function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}})),n.variable(t("mat3fromMat4")).define("mat3fromMat4",(function(){return function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}})),n.variable(t("mat3fromQuat")).define("mat3fromQuat",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=n+n,c=a+a,s=r+r,u=n*o,l=a*o,d=a*c,m=r*o,f=r*c,p=r*s,v=i*o,h=i*c,g=i*s;return e[0]=1-d-p,e[3]=l-g,e[6]=m+h,e[1]=l+g,e[4]=1-u-p,e[7]=f-v,e[2]=m-h,e[5]=f+v,e[8]=1-u-d,e}})),n.variable(t("mat3identity")).define("mat3identity",(function(){return function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}})),n.variable(t("mat3invert")).define("mat3invert",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=l*o-c*u,m=-l*i+c*s,f=u*i-o*s,p=n*d+a*m+r*f;return p?(p=1/p,e[0]=d*p,e[1]=(-l*a+r*u)*p,e[2]=(c*a-r*o)*p,e[3]=m*p,e[4]=(l*n-r*s)*p,e[5]=(-c*n+r*i)*p,e[6]=f*p,e[7]=(-u*n+a*s)*p,e[8]=(o*n-a*i)*p,e):null}})),n.variable(t("mat3multiply")).define("mat3multiply",(function(){return function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=n[0],f=n[1],p=n[2],v=n[3],h=n[4],g=n[5],b=n[6],F=n[7],E=n[8];return e[0]=m*a+f*o+p*u,e[1]=m*r+f*c+p*l,e[2]=m*i+f*s+p*d,e[3]=v*a+h*o+g*u,e[4]=v*r+h*c+g*l,e[5]=v*i+h*s+g*d,e[6]=b*a+F*o+E*u,e[7]=b*r+F*c+E*l,e[8]=b*i+F*s+E*d,e}})),n.variable(t("mat3normalFromMat4")).define("mat3normalFromMat4",(function(){return function(e,t){var n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=t[9],m=t[10],f=t[11],p=t[12],v=t[13],h=t[14],g=t[15],b=n*c-a*o,F=n*s-r*o,E=n*u-i*o,w=a*s-r*c,y=a*u-i*c,j=r*u-i*s,U=l*v-d*p,x=l*h-m*p,S=l*g-f*p,O=d*h-m*v,k=d*g-f*v,M=m*g-f*h,N=b*M-F*k+E*O+w*S-y*x+j*U;return N?(N=1/N,e[0]=(c*M-s*k+u*O)*N,e[1]=(s*S-o*M-u*x)*N,e[2]=(o*k-c*S+u*U)*N,e[3]=(r*k-a*M-i*O)*N,e[4]=(n*M-r*S+i*x)*N,e[5]=(a*S-n*k-i*U)*N,e[6]=(v*j-h*y+g*w)*N,e[7]=(h*E-p*j-g*F)*N,e[8]=(p*y-v*E+g*b)*N,e):null}})),n.variable(t("mat3rotate")).define("mat3rotate",(function(){return function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=Math.sin(n),f=Math.cos(n);return e[0]=f*a+m*o,e[1]=f*r+m*c,e[2]=f*i+m*s,e[3]=f*o-m*a,e[4]=f*c-m*r,e[5]=f*s-m*i,e[6]=u,e[7]=l,e[8]=d,e}})),n.variable(t("mat3scale")).define("mat3scale",(function(){return function(e,t,n){var a=n[0],r=n[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}})),n.variable(t("mat3str")).define("mat3str",(function(){return function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}})),n.variable(t("mat3translate")).define("mat3translate",(function(){return function(e,t,n){var a=t[0],r=t[1],i=t[2],o=t[3],c=t[4],s=t[5],u=t[6],l=t[7],d=t[8],m=n[0],f=n[1];return e[0]=a,e[1]=r,e[2]=i,e[3]=o,e[4]=c,e[5]=s,e[6]=m*a+f*o+u,e[7]=m*r+f*c+l,e[8]=m*i+f*s+d,e}})),n.variable(t("mat3transpose")).define("mat3transpose",(function(){return function(e,t){if(e===t){var n=t[1],a=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=a,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}})),n}function V(){var e=Object(S.a)(["## Implementation"]);return V=function(){return e},e}function q(){var e=Object(S.a)(["\nor you may import single functions directly\n\n```js\nimport {vec2create} from '@rreusser/gl-vec2'\n```\n"],["\nor you may import single functions directly\n\n\\`\\`\\`js\nimport {vec2create} from '@rreusser/gl-vec2'\n\\`\\`\\`\n"]);return q=function(){return e},e}function W(){var e=Object(S.a)(["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n```js\nimport {vec2} from '@rreusser/gl-vec2'\n```\n\nafter which you can use the functions like normal, e.g."],["## Usage\n\nThere are two basic ways to use this module. You may either import all functions\n\n\\`\\`\\`js\nimport {vec2} from '@rreusser/gl-vec2'\n\\`\\`\\`\n\nafter which you can use the functions like normal, e.g."]);return W=function(){return e},e}function H(){var e=Object(S.a)(["## License\n\nCopyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\nThis software is provided 'as-is', without any express or implied\nwarranty. In no event will the authors be held liable for any damages\narising from the use of this software.\n\nPermission is granted to anyone to use this software for any purpose,\nincluding commercial applications, and to alter it and redistribute it\nfreely, subject to the following restrictions:\n\n 1. The origin of this software must not be misrepresented you must not\n    claim that you wrote the original software. If you use this software\n    in a product, an acknowledgment in the product documentation would be\n    appreciated but is not required.\n\n 2. Altered source versions must be plainly marked as such, and must not\n    be misrepresented as being the original software.\n\n 3. This notice may not be removed or altered from any source distribution."]);return H=function(){return e},e}function Y(){var e=Object(S.a)(["This notebook re-exports functions from [stackgl/gl-vec2](https://github.com/stackgl/gl-vec2). The license may be found [here](https://github.com/stackgl/gl-vec2/blob/master/LICENSE.md)."]);return Y=function(){return e},e}function K(){var e=Object(S.a)(["# gl-vec2"]);return K=function(){return e},e}function Z(e,t){var n=e.module();return n.variable(t()).define(["md"],(function(e){return e(K())})),n.variable(t()).define(["md"],(function(e){return e(Y())})),n.variable(t()).define(["md"],(function(e){return e(H())})),n.variable(t()).define(["md"],(function(e){return e(W())})),n.variable(t("a")).define("a",["vec2"],(function(e){return e.create()})),n.variable(t()).define(["md"],(function(e){return e(q())})),n.variable(t("b")).define("b",["vec2create"],(function(e){return e()})),n.variable(t()).define(["md"],(function(e){return e(V())})),n.variable(t("vec2")).define("vec2",["EPSILON","vec2create","vec2clone","vec2fromValues","vec2copy","vec2set","vec2equals","vec2exactEquals","vec2add","vec2subtract","vec2sub","vec2multiply","vec2mul","vec2divide","vec2div","vec2inverse","vec2min","vec2max","vec2rotate","vec2floor","vec2ceil","vec2round","vec2scale","vec2scaleAndAdd","vec2distance","vec2dist","vec2squaredDistance","vec2sqrDist","vec2length","vec2len","vec2squaredLength","vec2sqrLen","vec2negate","vec2normalize","vec2dot","vec2cross","vec2lerp","vec2random","vec2transformMat2","vec2transformMat2d","vec2transformMat3","vec2transformMat4","vec2forEach","vec2limit"],(function(e,t,n,a,r,i,o,c,s,u,l,d,m,f,p,v,h,g,b,F,E,w,y,j,U,x,S,O,k,M,N,C,T,A,R,P,I,L,D,_,B,G,z,V){return{EPSILON:e,create:t,clone:n,fromValues:a,copy:r,set:i,equals:o,exactEquals:c,add:s,subtract:u,sub:l,multiply:d,mul:m,divide:f,div:p,inverse:v,min:h,max:g,rotate:b,floor:F,ceil:E,round:w,scale:y,scaleAndAdd:j,distance:U,dist:x,squaredDistance:S,sqrDist:O,length:k,len:M,squaredLength:N,sqrLen:C,negate:T,normalize:A,dot:R,cross:P,lerp:I,random:L,transformMat2:D,transformMat2d:_,transformMat3:B,transformMat4:G,forEach:z,limit:V}})),n.variable(t("EPSILON")).define("EPSILON",(function(){return 1e-6})),n.variable(t("vec2add")).define("vec2add",(function(){return function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}})),n.variable(t("vec2ceil")).define("vec2ceil",(function(){return function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}})),n.variable(t("vec2clone")).define("vec2clone",(function(){return function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}})),n.variable(t("vec2copy")).define("vec2copy",(function(){return function(e,t){return e[0]=t[0],e[1]=t[1],e}})),n.variable(t("vec2create")).define("vec2create",(function(){return function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}})),n.variable(t("vec2cross")).define("vec2cross",(function(){return function(e,t,n){var a=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=a,e}})),n.variable(t("vec2distance")).define("vec2distance",(function(){return function(e,t){var n=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(n*n+a*a)}})),n.variable(t("vec2dist")).define("vec2dist",["vec2distance"],(function(e){return e})),n.variable(t("vec2divide")).define("vec2divide",(function(){return function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}})),n.variable(t("vec2div")).define("vec2div",["vec2divide"],(function(e){return e})),n.variable(t("vec2dot")).define("vec2dot",(function(){return function(e,t){return e[0]*t[0]+e[1]*t[1]}})),n.variable(t("vec2equals")).define("vec2equals",["EPSILON"],(function(e){return function(t,n){var a=t[0],r=t[1],i=n[0],o=n[1];return Math.abs(a-i)<=e*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-o)<=e*Math.max(1,Math.abs(r),Math.abs(o))}})),n.variable(t("vec2exactEquals")).define("vec2exactEquals",(function(){return function(e,t){return e[0]===t[0]&&e[1]===t[1]}})),n.variable(t("vec2floor")).define("vec2floor",(function(){return function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}})),n.variable(t("vec2forEach")).define("vec2forEach",["vec2create"],(function(e){var t=e();return function(e,n,a,r,i,o){var c,s;for(n||(n=2),a||(a=0),s=r?Math.min(r*n+a,e.length):e.length,c=a;c<s;c+=n)t[0]=e[c],t[1]=e[c+1],i(t,t,o),e[c]=t[0],e[c+1]=t[1];return e}})),n.variable(t("vec2fromValues")).define("vec2fromValues",(function(){return function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}})),n.variable(t("vec2inverse")).define("vec2inverse",(function(){return function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}})),n.variable(t("vec2length")).define("vec2length",(function(){return function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}})),n.variable(t("vec2len")).define("vec2len",["vec2length"],(function(e){return e})),n.variable(t("vec2lerp")).define("vec2lerp",(function(){return function(e,t,n,a){var r=t[0],i=t[1];return e[0]=r+a*(n[0]-r),e[1]=i+a*(n[1]-i),e}})),n.variable(t("vec2limit")).define("vec2limit",(function(){return function(e,t,n){var a=t[0]*t[0]+t[1]*t[1];if(a>n*n){var r=Math.sqrt(a);e[0]=t[0]/r*n,e[1]=t[1]/r*n}else e[0]=t[0],e[1]=t[1];return e}})),n.variable(t("vec2max")).define("vec2max",(function(){return function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}})),n.variable(t("vec2min")).define("vec2min",(function(){return function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}})),n.variable(t("vec2multiply")).define("vec2multiply",(function(){return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}})),n.variable(t("vec2mul")).define("vec2mul",["vec2multiply"],(function(e){return e})),n.variable(t("vec2negate")).define("vec2negate",(function(){return function(e,t){return e[0]=-t[0],e[1]=-t[1],e}})),n.variable(t("vec2normalize")).define("vec2normalize",(function(){return function(e,t){var n=t[0],a=t[1],r=n*n+a*a;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e}})),n.variable(t("vec2random")).define("vec2random",(function(){return function(e,t){t=t||1;var n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}})),n.variable(t("vec2rotate")).define("vec2rotate",(function(){return function(e,t,n){var a=Math.cos(n),r=Math.sin(n),i=t[0],o=t[1];return e[0]=i*a-o*r,e[1]=i*r+o*a,e}})),n.variable(t("vec2round")).define("vec2round",(function(){return function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}})),n.variable(t("vec2scale")).define("vec2scale",(function(){return function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}})),n.variable(t("vec2scaleAndAdd")).define("vec2scaleAndAdd",(function(){return function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e}})),n.variable(t("vec2set")).define("vec2set",(function(){return function(e,t,n){return e[0]=t,e[1]=n,e}})),n.variable(t("vec2squaredDistance")).define("vec2squaredDistance",(function(){return function(e,t){var n=t[0]-e[0],a=t[1]-e[1];return n*n+a*a}})),n.variable(t("vec2sqrDist")).define("vec2sqrDist",["vec2squaredDistance"],(function(e){return e})),n.variable(t("vec2squaredLength")).define("vec2squaredLength",(function(){return function(e){var t=e[0],n=e[1];return t*t+n*n}})),n.variable(t("vec2sqrLen")).define("vec2sqrLen",["vec2squaredLength"],(function(e){return e})),n.variable(t("vec2subtract")).define("vec2subtract",(function(){return function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}})),n.variable(t("vec2sub")).define("vec2sub",["vec2subtract"],(function(e){return e})),n.variable(t("vec2transformMat2")).define("vec2transformMat2",(function(){return function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r,e[1]=n[1]*a+n[3]*r,e}})),n.variable(t("vec2transformMat2d")).define("vec2transformMat2d",(function(){return function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r+n[4],e[1]=n[1]*a+n[3]*r+n[5],e}})),n.variable(t("vec2transformMat3")).define("vec2transformMat3",(function(){return function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[3]*r+n[6],e[1]=n[1]*a+n[4]*r+n[7],e}})),n.variable(t("vec2transformMat4")).define("vec2transformMat4",(function(){return function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[4]*r+n[12],e[1]=n[1]*a+n[5]*r+n[13],e}})),n}var X=n(14),J=(n(177),n(111));function Q(){var e=Object(S.a)(["---\n## Deprecations\n"]);return Q=function(){return e},e}function $(){var e=Object(S.a)(["---\n## Internals"]);return $=function(){return e},e}function ee(){var e=Object(S.a)(["<a href>"]);return ee=function(){return e},e}function te(){var e=Object(S.a)(["<style>"]);return te=function(){return e},e}function ne(){var e=Object(S.a)(["---\n## Markup\n"]);return ne=function(){return e},e}function ae(){var e=Object(S.a)(["---\n## Images\n"]);return ae=function(){return e},e}function re(){var e=Object(S.a)(["---\n## Reactivity\n"]);return re=function(){return e},e}function ie(){var e=Object(S.a)(["# Toolbox\n\nA growing<sup>*</sup> library of functions for various tasks.\nThis notebook will change frequently. If you rely on it be sure to pin the version:\n","\n\n<small><sup>*</sup> <i>A bit of a mess right now as I move things around. Let's not focus on the bad things though, shall we? :D</i></small>\n\n"]);return ie=function(){return e},e}function oe(e,t){var n=e.module();n.variable(t()).define(["md","code","PINNED"],(function(e,t,n){return e(ie(),t("import {/* ... */} from '".concat(n,"'")))})),n.variable(t()).define(["md"],(function(e){return e(re())})),n.variable(t("linkViews")).define("linkViews",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enumerable:!0};return Object.entries(t).forEach((function(t){var a=Object(u.a)(t,2),r=a[0],i=a[1];Object.defineProperty(e,r,Object.assign({get:function(){return i.value}},n))})),e}})),n.variable(t()).define(["md"],(function(e){return e(ae())})),n.variable(t()).define(["signature","fitSize"],(function(e,t){return e(t,{description:"Scales dimensions proportionally to fit into the given width and/or height.",example:"\nconst [width, height, scale] = fitSize(img.naturalWidth, img.naturalHeight, {width: 500, height: 500});\nimg.width = width;\nimg.height = height;\n",tests:{"no target dimensions":function(e){var n=t(200,150),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(200===r,"width"),e(150===i,"height"),e(1===o,"scale")},"target width only":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t(200,150,{width:400}),r=Object(u.a)(a,3),i=r[0],o=r[1],s=r[2],n(400===i,"width"),n(300===o,"height"),n(2===s,"scale");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"target height only":function(e){var n=t(200,150,{height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"same aspect":function(e){var n=t(200,150,{width:400,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"smaller aspect ratio":function(e){var n=t(200,150,{width:600,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"greater aspect ratio":function(e){var n=t(200,150,{width:600,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")}}})})),n.variable(t("fitSize")).define("fitSize",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.width,r=n.height;n.crop;if(null==a&&null==r)return[e,t,1];var i=e/t;return null==a||null!=r&&i<a/r?[r*i,r,r/t]:[a,a/i,a/e]}})),n.variable(t()).define(["signature","importAsset"],(function(e,t){return e(t,{description:"Imports a remote asset and returns its local URL and blob.",example:"const {blob, url} = await importAsset('https://example.com/image.png');",tests:{"import asset":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("https://en.wikipedia.org/static/favicon/wikipedia.ico");case 2:a=e.sent,r=a.blob,i=a.url,n(r instanceof Blob,"blob"),n("string"===typeof i,"url");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})})),n.variable(t("importAsset")).define("importAsset",["invalidation"],(function(e){return function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(n).then((function(e){return e.blob()})).then((function(t){var n=URL.createObjectURL(t);return e.then((function(){return URL.revokeObjectURL(n)})),{url:n,blob:t}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n.variable(t()).define(["signature","importImage","DOM"],(function(e,t,n){return e(t,{description:"Returns an Image for a remote src. The image has been created from an object URL and won't taint a canvas.",example:"\nconst img = await importImage('https://example.com/image.png');\nconst ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\nctx.drawImage(img, 0, 0);\n  ",tests:{"tainted canvas":function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.element("img",{src:"https://i.imgur.com/D6H96Hc.png"}),e.next=3,a.decode();case 3:(r=n.context2d(a.naturalWidth,a.naturalHeight,1)).drawImage(a,0,0),i="";try{r.getImageData(0,0,1,1)}catch(o){i+=o}t(/^SecurityError/.test(i),"remote URL taints canvas");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"import image":function(){var e=Object(s.a)(c.a.mark((function e(a){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("https://i.imgur.com/D6H96Hc.png");case 2:r=e.sent,(i=n.context2d(r.naturalWidth,r.naturalHeight,1)).drawImage(r,0,0),o=i.getImageData(0,0,1,1).data,a(255===o[0],0===o[1],"Image can be imported and applied to canvas without tainting it");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})})),n.variable(t("importImage")).define("importImage",["DOM"],(function(e){return function(){var t=Object(s.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.element("img",{crossorigin:"anonymous",src:n}),t.abrupt("return",a.decode().then((function(){return a})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n.variable(t()).define(["md"],(function(e){return e(ne())})),n.variable(t("querylink")).define("querylink",["DOM"],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.query,i=void 0===r?function(e){return'https://duckduckgo.com/?q="'.concat(decodeURI(e),'"')}:r,o=e.element("a",Object(g.a)({href:n.href||i(t)},n));return o.textContent=t,o}})),n.variable(t()).define((function(){return""})),n.variable(t()).define(["signature","scopedStyle"],(function(e,t){return e(t,{description:"Creates a scoped `<style>` element from CSS.",example:"\nconst namespace = DOM.uid('scope').id;\nconst style = scopedStyle('.' + namespace, `\n  :scope { font-family: sans-serif }\n  :scope, :scope > * { padding: 0 }\n`);\nreturn html`<div class=\"${namespace}\">\n  ${style}\n  <span> text ...\n`;\n"})})),n.variable(t("scopedStyle")).define("scopedStyle",["html"],(function(e){return function(t,n){var a=e(te());return a.textContent=n.replace(/\:scope\b/g,t),a}})),n.variable(t()).define(["signature","getPinnedSlug"],(function(e,t){return e(t)})),n.variable(t("getPinnedSlug")).define("getPinnedSlug",["html"],(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,a=void 0===n?null:n,r=t.parseVersion,i=void 0===r?"v1":r,o=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.observablehq.com/".concat(t,".js?v=").concat(n)).then((function(e){return e.text()})).catch((function(e){return null})).then((function(e){return null==e?[]:e.split("\n",a+1).slice(0,a)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u={v1:function(e){return o(e,1,4).then((function(e){var t=e[0].slice("// URL: https://observablehq.com/".length).replace(/^d\//,""),n=e[3].slice("// Version: ".length);return"".concat(t,"@").concat(n)}))},v3:function(e){return o(e,3,1).then((function(e){return e[0].slice("// https://observablehq.com/".length).replace(/^d\//,"")}))}};try{var l=null!=a?a.replace(/^(?!@)/,"d/"):e(ee()).pathname.match(/^\/(d\/[a-f0-9]{16}|@[^\/]+\/[^@].*?)(?:$|\/)/)[1];return u[i](l).catch((function(e){return null}))}catch(d){return null}}})),n.variable(t()).define(["signature"],(function(e){return e("PINNED",{name:"PINNED",description:"Notebook slug, automatically pinned to the most recent version of the importing notebook.",example:'md`You can import my notebook this way:\n\\`\\`\\`javascript\nimport {foo} from "${PINNED}"\n\\`\\`\\``\n'})})),n.variable(t("PINNED")).define("PINNED",["getPinnedSlug"],(function(e){return e()})),n.variable(t()).define(["md"],(function(e){return e($())})),n.variable(t("readChunks")).define("readChunks",(function(){return function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,i,o,s,u,l,d,m=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},a=n.separator,r=void 0===a?10:a,i=n.limit,o=void 0===i?1/0:i,s=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},u=[],l=new Uint8Array,d=function e(){return t.read().then((function(n){var a=n.done,i=n.value,c=-1,d=0;if(i){for(console.log("chunk size",i.length);++c<i.length;)if(i[c]===r){if(u.push(s(l,i.slice(d,c))),u.length>=o)return t.cancel(),u;d=c+1}l=i.slice(d)}return a?(u.push(l),u):e()}))},e.abrupt("return",d());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),n.variable(t("PINNED_LIB")).define("PINNED_LIB",["getPinnedSlug"],(function(e){return e({name:"691ae3b95f02db79"})})),n.variable(t("viewof RUN_TESTS")).define("viewof RUN_TESTS",["deprecateImport","viewof _dep_RUN_TESTS"],(function(e,t){return e(t,"RUN_TESTS",!1)})),n.variable(t("RUN_TESTS")).define("RUN_TESTS",["Generators","viewof RUN_TESTS"],(function(e,t){return e.input(t)})),n.variable(t()).define(["md"],(function(e){return e(Q())})),n.variable(t("deprecateImport")).define("deprecateImport",["PINNED","PINNED_LIB"],(function(e,t){return function(n,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"3d9d1394d858ca97";return e&&e===t?r?void 0:n:(console.warn("".concat(a,' has been moved. Import it from "').concat(i,'".')),n)}}));var a=e.module(Te);return n.import("code","_dep_code",a),n.import("signature","_dep_signature",a),n.import("signature_theme","_dep_signature_theme",a),n.import("viewof RUN_TESTS","viewof _dep_RUN_TESTS",a),n.import("RUN_TESTS","_dep_RUN_TESTS",a),n.import("createStepper","_dep_createStepper",a),n.import("defaultTestRunner","_dep_defaultTestRunner",a),n.import("defaultSignatureParser","_dep_defaultSignatureParser",a),n.variable(t("signature")).define("signature",["deprecateImport","_dep_signature"],(function(e,t){return e(t,"signature",!1)})),n.variable(t("code")).define("code",["deprecateImport","_dep_code"],(function(e,t){return e(t,"code",!1)})),n.variable(t("signature_theme")).define("signature_theme",["deprecateImport","_dep_signature_theme"],(function(e,t){return e(t,"signature_theme")})),n.variable(t("createStepper")).define("createStepper",["deprecateImport","_dep_createStepper"],(function(e,t){return e(t,"createStepper")})),n.variable(t("defaultTestRunner")).define("defaultTestRunner",["deprecateImport","_dep_defaultTestRunner"],(function(e,t){return e(t,"defaultTestRunner")})),n.variable(t("defaultSignatureParser")).define("defaultSignatureParser",["deprecateImport","_dep_defaultSignatureParser"],(function(e,t){return e(t,"defaultSignatureParser")})),n}function ce(){var e=Object(S.a)(["---\n## Testing\n\nTests can be incorporated into the documentation and executed\n- by passing `{runTests: true}`, which will execute tests immediately,\n- by clicking the `Run tests` button inside the documentation cell,\n- or by passing a promise for `runTests`. This promise can be used to execute all tests on the page.\n\nSelect how tests should be run for the following example:\n"],["---\n## Testing\n\nTests can be incorporated into the documentation and executed\n- by passing \\`{runTests: true}\\`, which will execute tests immediately,\n- by clicking the \\`Run tests\\` button inside the documentation cell,\n- or by passing a promise for \\`runTests\\`. This promise can be used to execute all tests on the page.\n\nSelect how tests should be run for the following example:\n"]);return ce=function(){return e},e}function se(){var e=Object(S.a)(["\nIf you want to override the CSS globally (and also have shared instead of scoped styles), use the following steps:\n"]);return se=function(){return e},e}function ue(){var e=Object(S.a)(["\nTo override the CSS for a single instance, pass the default CSS along with your custom CSS:\n"]);return ue=function(){return e},e}function le(){var e=Object(S.a)(["---\n## Superstylin'\n\n***Note:*** *This section is currently being reworked.*\n\nTo extend the base theme, first import it:\n"]);return le=function(){return e},e}function de(){var e=Object(S.a)(["---\n\n## Old docs - under construction\n"]);return de=function(){return e},e}function me(){var e=Object(S.a)(["<tr data-status=",">\n        <td>","</td>\n        <td><span title=",">","</span> ","</td>"]);return me=function(){return e},e}function fe(){var e=Object(S.a)(["<table><thead><tr><th>Name</th><th>Result</th></tr><body>",""]);return fe=function(){return e},e}function pe(){var e=Object(S.a)(["---\n## Internals\n"]);return pe=function(){return e},e}function ve(){var e=Object(S.a)(["<div><button>Run all tests"]);return ve=function(){return e},e}function he(){var e=Object(S.a)(["```","\n","\n```"],["\\`\\`\\`","\\n","\\n\\`\\`\\`"]);return he=function(){return e},e}function ge(){var e=Object(S.a)(["Examples:"]);return ge=function(){return e},e}function be(){var e=Object(S.a)(["Example:"]);return be=function(){return e},e}function Fe(){var e=Object(S.a)(["<div class=examples>",""]);return Fe=function(){return e},e}function Ee(){var e=Object(S.a)(["<div class=description>",""]);return Ee=function(){return e},e}function we(){var e=Object(S.a)(['<a class=link href="#','">']);return we=function(){return e},e}function ye(){var e=Object(S.a)(["<"," class=signature>","",""]);return ye=function(){return e},e}function je(){var e=Object(S.a)(["<",' class="','">',""]);return je=function(){return e},e}function Ue(){var e=Object(S.a)(["",""]);return Ue=function(){return e},e}function xe(){var e=Object(S.a)(["Test results:"]);return xe=function(){return e},e}function Se(){var e=Object(S.a)(["<div class=tests>",""]);return Se=function(){return e},e}function Oe(){var e=Object(S.a)(["<p class=cta>"," to view results"]);return Oe=function(){return e},e}function ke(){var e=Object(S.a)(["<button>Run tests"]);return ke=function(){return e},e}function Me(){var e=Object(S.a)(["\nDocumentation template for functions. Extracts the function head from the function passed to **`fn`**:\n- If `fn` is a named function, the head is returned as written.\n- If `fn` is an arrow function, the declaration will be reformatted and the `function` keyword injected. If `name` was set, it will be injected as the function name.\n- Any other argument type is passed through unaltered.\n\n**Note:** Arrow functions are nameless, even when assigned to a variable. In these cases `name` must be provided explicitely.\n\nAll settings are optional. Available **`options`**:\n",""],["\nDocumentation template for functions. Extracts the function head from the function passed to **\\`fn\\`**:\n- If \\`fn\\` is a named function, the head is returned as written.\n- If \\`fn\\` is an arrow function, the declaration will be reformatted and the \\`function\\` keyword injected. If \\`name\\` was set, it will be injected as the function name.\n- Any other argument type is passed through unaltered.\n\n**Note:** Arrow functions are nameless, even when assigned to a variable. In these cases \\`name\\` must be provided explicitely.\n\nAll settings are optional. Available **\\`options\\`**:\n",""]);return Me=function(){return e},e}function Ne(){var e=Object(S.a)(["---"]);return Ne=function(){return e},e}function Ce(){var e=Object(S.a)(["# Signature\n\nThis notebook offers a set of documentation helpers.\n\nFor more examples please see [Toolbox](https://observablehq.com/d/691ae3b95f02db79).\n"]);return Ce=function(){return e},e}function Te(e,t){var n=e.module();n.variable(t()).define(["md"],(function(e){return e(Ce())})),n.variable(t()).define(["md"],(function(e){return e(Ne())})),n.variable(t()).define(["signature","md"],(function(e,t){return e(e,{description:t(Me(),Object.entries({description:"Rendered as Markdown if a string, otherwise passed through.",example:"Single value or array of values. String values are formatted as Javascript code, everything else gets passed through.",name:"Anchor name to link to. Defaults to function name.",scope:"Class name to scope CSS selectors. Defaults to unique string.",css:"The theme CSS. If `scope` is used, the CSS should start every selector with `:scope`. Defaults to `signature_theme`.",open:"Boolean that controls the toggle state of the details wrapper. Set to `null` to disable collapsing.",tests:"Object map of test functions, keyed by test name. Each function receives `assert(condition, assertion)`   as argument. Async functions are supported.",runTests:"Boolean or Promise, controls test execution. Set to `false` to disable test output.",testRunner:"Executes tests and builds results markup. See [`defaultTestRunner()`](#defaultTestRunner) for details."}).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return"- `".concat(n,":` ").concat(a,"\n")}))),example:['\n// Basic use\nsignature(myUsefulFunc, {\n  description: "\'Tis a very useful function, this construct of strung-together characters."\n})\n  ',"\n// Tests\nsignature(myTestedFunc, {\n  tests: {\n    'can retrieve data': async (assert) => {\n      const data = await myTestedFunc().getData();\n      assert(Array.isArray(data), 'data is array');\n      assert(data.length, 'data is not empty');\n    },\n    'is this finished?': assert => {\n      assert(myTestedFunc() !== 'todo: implement', 'actually implemented');\n    },\n    'Look, ma! No assert!': () => {\n      try { myTestedFunc().notImplemented() }\n      catch(e) { throw Error(`Hey signature(), catch this! ${e}`) };\n    }\n}})\n  "],tests:{"signature parsing":function(t){var n=function(n,a,r){var i=e(r,{name:a,formatter:function(e){return e.signature.textContent.trim()}});t(n===i,n)};n("function()",void 0,(function(){})),n("function foo1()",void 0,(function(){})),n("function foo2()","foo2",(function(){})),n("function()",void 0,(function(){})),n("function foo3()","foo3",(function(){})),n("async function()",void 0,Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),n("async function foo4(a)","foo4",function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n("async function foo5()",void 0,function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),n("async function* foo6()","foo6",Object(J.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),n("function*()",void 0,c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n('function(a,b=({foo:"bar"}))',void 0,(function(e){}))}}})})),n.variable(t("signature")).define("signature",["RUN_TESTS","DOM","signature_theme","defaultSignatureParser","defaultTestRunner","html","md","code","scopedStyle"],(function(e,t,n,a,r,i,o,c,s){return function(u){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=l.name,m=void 0===d?"function"===typeof u&&u.name.length?u.name:null:d,f=l.description,p=void 0===f?null:f,v=l.example,h=void 0===v?null:v,g=l.open,b=void 0===g||g,F=l.tests,E=void 0===F?{}:F,w=l.runTests,y=void 0===w?e.promise:w,j=l.scope,U=void 0===j?t.uid("css-scope").id:j,x=l.css,S=void 0===x?n:x,O=l.formatter,k=void 0===O?B:O,M=l.signatureParser,N=void 0===M?a:M,C=l.testRunner,T=void 0===C?r:C,A="function"!==typeof u?u:N(u,m),R=null;if(y&&E&&Object.keys(E).length){var P=T(E),I=P.list,L=P.run,D=i(ke()),_=i(Oe(),D);R=i(Se(),[o(xe()),_]),Promise.race([Promise.resolve(y),new Promise((function(e){return D.onclick=e}))]).then((function(){return _.replaceWith(I),L()}))}return k({signature:"string"===typeof A?c(A):A,description:"string"===typeof p?o(Ue(),p):p,examples:(null==h?[]:Array.isArray(h)?h:[h]).map((function(e){return"string"===typeof e?c(e):e})),testList:R},{name:m,open:b,css:S,scope:U});function B(e,t){var n=e.signature,a=e.description,r=e.examples,c=e.testList,u=t.name,l=t.open,d=t.scope,m=t.css;return i(je(),null==l?"div":"details ".concat(l?"open":""),d,[m?null==d?m:s("."+d,m):"",i(ye(),null==l?"div":"summary",n,u&&u.length?i(we(),u):""),null==a?"":i(Ee(),a),r.length?i(Fe(),[r.length<2?o(be()):o(ge())].concat(Object(X.a)(r))):"",c||""])}}})),n.variable(t("signature_theme")).define("signature_theme",(function(){return'\n:scope {\n  border: 1px solid #eee;\n  padding: .5em 1em;\n  margin-bottom: 1em;\n}\n:scope > div {\n  border-top: 1px solid #eee;\n}\n:scope > summary:focus {\n  outline: none;\n}\n:scope > summary {\n  padding-left: 1.2em;\n  position: relative;\n}\n:scope > summary::-webkit-details-marker {\n  display: none;\n}\n:scope > summary:before {\n  position: absolute;\n  left: 0;\n  content: "\u25ba";\n}\n:scope[open] > summary:before {\n  content: "\u25bc";\n}\n:scope .signature {\n  display: flex;\n  align-items: center;\n}\n:scope .examples .code {\n  background: #f5f5f5;\n  padding: .5rem;\n}\n:scope .link:before {\n  content: "";\n  display: block;\n  width: 1rem;\n  height: 1rem;\n  background: url(https://raw.githubusercontent.com/encharm/Font-Awesome-SVG-PNG/master/black/png/32/link.png) center 100%/contain;\n  margin-left: .5rem;\n  opacity: .3;\n}\n:scope .signature:hover .link:hover:before { opacity: 1}\n:scope .tests .cta {\n  font-style: italic;\n}\n:scope .tests th, :scope .tests td { padding: .25em .5em }\n:scope .tests tr[data-status="pending"] { background: hsl(40,90%,90%); opacity: .5 }\n:scope .tests tr[data-status="error"]   { background: hsl( 0,90%,90%)}\n:scope .tests tr[data-status="success"] { background: hsl(90,90%,90%)}\n'})),n.variable(t()).define(["signature","code"],(function(e,t){return e(t,{description:"Creates syntax-highlighted output.",example:"\nconst myCss = `.container { background: red; }`;\nreturn code(myCss, {\n  // Optional, defaults to Javascript. Supported languages:\n  // \n  language: 'css',\n  // Removes leading and trailing empty lines.\n  trim: false\n});"})})),n.variable(t("code")).define("code",["md"],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.type,r=void 0===a?"javascript":a,i=n.trim,o=void 0===i||i,c=n.className,s=void 0===c?"code":c,u=e(he(),r,o?t.replace(/^\s*\n|\s+?$/g,""):t);return s&&u.classList.add("code"),u}})),n.variable(t()).define(["signature","PINNED_LIB"],(function(e,t){return e("RUN_TESTS",{name:"RUN_TESTS",description:"Button that triggers all tests that have not run yet.",example:'\nimport {viewof RUN_TESTS} from "'.concat(t,'"\n// In another cell:\nviewof RUN_TESTS\n')})})),n.variable(t("viewof RUN_TESTS")).define("viewof RUN_TESTS",["createStepper","html"],(function(e,t){var n=e(),a=t(ve());return a.onclick=function(e){e.stopPropagation(),n.next()},a.value=n,a})),n.variable(t("RUN_TESTS")).define("RUN_TESTS",["Generators","viewof RUN_TESTS"],(function(e,t){return e.input(t)})),n.variable(t()).define(["md"],(function(e){return e(pe())})),n.variable(t("createStepper")).define("createStepper",(function(){return function(){var e=function(){},t={step:-1,next:function(){return t.step++,e(),t.promise=new Promise((function(t){return e=t})),t}};return t.next()}})),n.variable(t("defaultTestRunner")).define("defaultTestRunner",["html","DOM"],(function(e,t){return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.assert,i=void 0===r?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";if(!e)throw t}:r,o=a.formatList,l=void 0===o?function(t){return e(fe(),t)}:o,d=a.formatItem,m=void 0===d?function(n,a,r){var i=null==a?"pending":a?"success":"error",o={pending:"\u231b",success:"\u2705",error:"\u2757"}[i];return e(me(),i,t.text(n),i,o,r||"")}:d,f=Object.entries(n).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return{name:n,node:m(n),run:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.call(null,i);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0);case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}})),p=l(f.map((function(e){return e.node}))),v=function(){return Promise.all(f.map((function(e){var t=e.name,n=e.node;return(0,e.run)().then((function(e){return n.replaceWith(m(t,void 0===e,e))}))})))};return{list:p,run:v}}})),n.variable(t("defaultSignatureParser")).define("defaultSignatureParser",(function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.toString(),a=0,r=0,i=function(e){switch(e){case"(":++r;break;case")":--r;break;case"{":case"=":if(0===r)return!1}return!0};a<n.length&&i(n[a++]););var o=n.substring(0,a-1).trim();if(""!==e.name)return o;var c=o.match(/^(async\s*)?(function\s*)?(\*)?/),s=c[1]?"async ":"",u=c[3]?"*":"",l=null!=t?" ".concat(t):"",d=o.substring(c[0].length).trim();return"("!==d[0]&&(d="(".concat(d,")")),"".concat(s,"function").concat(u).concat(l).concat(d)}}));var a=e.module(oe);n.import("getPinnedSlug",a),n.variable(t("PINNED_LIB")).define("PINNED_LIB",["getPinnedSlug"],(function(e){return e("3d9d1394d858ca97")})),n.variable(t()).define(["md"],(function(e){return e(de())})),n.variable(t("demoFunction")).define("demoFunction",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==n&&null==a)return[e,t,1];var r=e/t;return null==n||null!=a&&r<n/a?[a*r,a,a/t]:[n,n/r,n/e]}})),n.variable(t()).define(["md"],(function(e){return e(le())})),n.variable(t()).define(["md"],(function(e){return e(ue())})),n.variable(t()).define(["signature","demoFunction","signature_theme"],(function(e,t,n){return e(t,{description:"Scales dimensions proportionally to fit into the given width and/or height.",example:"const [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);",css:"\n".concat(n,"\n:scope {\n  background: LightYellow;\n  box-shadow: 1px 2px 5px -3px;\n  font-family: sans-serif;\n}\n:scope .description {\n  font-size: 1.2rem;\n  font-style: italic;\n}\n:scope .examples .code {\n  background: NavajoWhite;\n}\n  ")})})),n.variable(t()).define(["md"],(function(e){return e(se())}));var r=e.module(oe);return n.import("scopedStyle",r),n.variable(t()).define(["scopedStyle","signature_theme"],(function(e,t){return e(".my-shared-scope","\n".concat(t,"\n// Adds \n:scope { border: 10px solid #888 }\n"))})),n.variable(t("myCustomSig")).define("myCustomSig",["signature"],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t,Object(g.a)({scope:"my-shared-scope",css:null},n))}})),n.variable(t()).define(["myCustomSig","demoFunction"],(function(e,t){return e(t,{description:"Scales dimensions proportionally to fit into the given width and/or height.",example:"const [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);"})})),n.variable(t()).define(["md"],(function(e){return e(ce())})),n.variable(t("viewof runType")).define("viewof runType",["DOM"],(function(e){return e.select(["wait for interaction","run immediately","hide tests"])})),n.variable(t("runType")).define("runType",["Generators","viewof runType"],(function(e,t){return e.input(t)})),n.variable(t()).define(["signature","demoFunction","RUN_TESTS","runType","Promises"],(function(e,t,n,a,r){return e(t,{description:"Scales dimensions proportionally to fit into the given width and/or height.",example:"\nconst [width, height, scale] = scaleContain(img.naturalWidth, img.naturalHeight, 500, 500);\nimg.width = width;\nimg.height = height;\n",runTests:{"run immediately":!0,"hide tests":!1,"wait for interaction":n.promise}[a],tests:{"no target dimensions":function(e){({}).callUndefined();var n=t(200,150),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(200===r,"width"),e(150===i,"height"),e(1===o,"scale")},"target width only":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,i,o,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delay(3e3);case 2:a=t(200,150,400),i=Object(u.a)(a,3),o=i[0],s=i[1],l=i[2],n(400===o,"width"),n(300===s,"height"),n(2===l,"scale");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"target height only":function(e){var n=t(200,150,null,300),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"same aspect":function(e){var n=t(200,150,400,300),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"smaller aspect ratio":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,i,o,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delay(2e3);case 2:a=t(200,150,600,300),i=Object(u.a)(a,3),o=i[0],s=i[1],l=i[2],n(400===o,"width"),n(300===s,"height"),n(0===l,"scale");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"greater aspect ratio":function(e){var n=t(200,150,600,300),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")}}})})),n}function Ae(){var e=Object(S.a)(["---\n## Deprecations\n"]);return Ae=function(){return e},e}function Re(){var e=Object(S.a)(["---\n## Internals"]);return Re=function(){return e},e}function Pe(){var e=Object(S.a)(["<a href>"]);return Pe=function(){return e},e}function Ie(){var e=Object(S.a)(["<style>"]);return Ie=function(){return e},e}function Le(){var e=Object(S.a)(["---\n## Markup\n"]);return Le=function(){return e},e}function De(){var e=Object(S.a)(["---\n## Images\n"]);return De=function(){return e},e}function _e(){var e=Object(S.a)(["---\n## Reactivity\n"]);return _e=function(){return e},e}function Be(){var e=Object(S.a)(["# Toolbox\n\nA growing<sup>*</sup> library of functions for various tasks.\nThis notebook will change frequently. If you rely on it be sure to pin the version:\n","\n\n<small><sup>*</sup> <i>A bit of a mess right now as I move things around. Let's not focus on the bad things though, shall we? :D</i></small>\n\n"]);return Be=function(){return e},e}function Ge(e,t){var n=e.module();n.variable(t()).define(["md","code","PINNED"],(function(e,t,n){return e(Be(),t("import {/* ... */} from '".concat(n,"'")))})),n.variable(t()).define(["md"],(function(e){return e(_e())})),n.variable(t("linkViews")).define("linkViews",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enumerable:!0};return Object.entries(t).forEach((function(t){var a=Object(u.a)(t,2),r=a[0],i=a[1];Object.defineProperty(e,r,Object.assign({get:function(){return i.value}},n))})),e}})),n.variable(t()).define(["md"],(function(e){return e(De())})),n.variable(t()).define(["signature","fitSize"],(function(e,t){return e(t,{description:"Scales dimensions proportionally to fit into the given width and/or height.",example:"\nconst [width, height, scale] = fitSize(img.naturalWidth, img.naturalHeight, {width: 500, height: 500});\nimg.width = width;\nimg.height = height;\n",tests:{"no target dimensions":function(e){var n=t(200,150),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(200===r,"width"),e(150===i,"height"),e(1===o,"scale")},"target width only":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t(200,150,{width:400}),r=Object(u.a)(a,3),i=r[0],o=r[1],s=r[2],n(400===i,"width"),n(300===o,"height"),n(2===s,"scale");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"target height only":function(e){var n=t(200,150,{height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"same aspect":function(e){var n=t(200,150,{width:400,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"smaller aspect ratio":function(e){var n=t(200,150,{width:600,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")},"greater aspect ratio":function(e){var n=t(200,150,{width:600,height:300}),a=Object(u.a)(n,3),r=a[0],i=a[1],o=a[2];e(400===r,"width"),e(300===i,"height"),e(2===o,"scale")}}})})),n.variable(t("fitSize")).define("fitSize",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.width,r=n.height;n.crop;if(null==a&&null==r)return[e,t,1];var i=e/t;return null==a||null!=r&&i<a/r?[r*i,r,r/t]:[a,a/i,a/e]}})),n.variable(t()).define(["signature","importAsset"],(function(e,t){return e(t,{description:"Imports a remote asset and returns its local URL and blob.",example:"const {blob, url} = await importAsset('https://example.com/image.png');",tests:{"import asset":function(){var e=Object(s.a)(c.a.mark((function e(n){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("https://en.wikipedia.org/static/favicon/wikipedia.ico");case 2:a=e.sent,r=a.blob,i=a.url,n(r instanceof Blob,"blob"),n("string"===typeof i,"url");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})})),n.variable(t("importAsset")).define("importAsset",["invalidation"],(function(e){return function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(n).then((function(e){return e.blob()})).then((function(t){var n=URL.createObjectURL(t);return e.then((function(){return URL.revokeObjectURL(n)})),{url:n,blob:t}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n.variable(t()).define(["signature","importImage","DOM"],(function(e,t,n){return e(t,{description:"Returns an Image for a remote src. The image has been created from an object URL and won't taint a canvas.",example:"\nconst img = await importImage('https://example.com/image.png');\nconst ctx = DOM.context2d(img.naturalWidth, img.naturalHeight, 1);\nctx.drawImage(img, 0, 0);\n  ",tests:{"tainted canvas":function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.element("img",{src:"https://i.imgur.com/D6H96Hc.png"}),e.next=3,a.decode();case 3:(r=n.context2d(a.naturalWidth,a.naturalHeight,1)).drawImage(a,0,0),i="";try{r.getImageData(0,0,1,1)}catch(o){i+=o}t(/^SecurityError/.test(i),"remote URL taints canvas");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"import image":function(){var e=Object(s.a)(c.a.mark((function e(a){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("https://i.imgur.com/D6H96Hc.png");case 2:r=e.sent,(i=n.context2d(r.naturalWidth,r.naturalHeight,1)).drawImage(r,0,0),o=i.getImageData(0,0,1,1).data,a(255===o[0],0===o[1],"Image can be imported and applied to canvas without tainting it");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})})),n.variable(t("importImage")).define("importImage",["DOM"],(function(e){return function(){var t=Object(s.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.element("img",{crossorigin:"anonymous",src:n}),t.abrupt("return",a.decode().then((function(){return a})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n.variable(t()).define(["md"],(function(e){return e(Le())})),n.variable(t("querylink")).define("querylink",["DOM"],(function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.query,i=void 0===r?function(e){return'https://duckduckgo.com/?q="'.concat(decodeURI(e),'"')}:r,o=e.element("a",Object(g.a)({href:n.href||i(t)},n));return o.textContent=t,o}})),n.variable(t()).define((function(){return""})),n.variable(t()).define(["signature","scopedStyle"],(function(e,t){return e(t,{description:"Creates a scoped `<style>` element from CSS.",example:"\nconst namespace = DOM.uid('scope').id;\nconst style = scopedStyle('.' + namespace, `\n  :scope { font-family: sans-serif }\n  :scope, :scope > * { padding: 0 }\n`);\nreturn html`<div class=\"${namespace}\">\n  ${style}\n  <span> text ...\n`;\n"})})),n.variable(t("scopedStyle")).define("scopedStyle",["html"],(function(e){return function(t,n){var a=e(Ie());return a.textContent=n.replace(/\:scope\b/g,t),a}})),n.variable(t()).define(["signature","getPinnedSlug"],(function(e,t){return e(t)})),n.variable(t("getPinnedSlug")).define("getPinnedSlug",["html"],(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,a=void 0===n?null:n,r=t.parseVersion,i=void 0===r?"v1":r,o=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.observablehq.com/".concat(t,".js?v=").concat(n)).then((function(e){return e.text()})).catch((function(e){return null})).then((function(e){return null==e?[]:e.split("\n",a+1).slice(0,a)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u={v1:function(e){return o(e,1,4).then((function(e){var t=e[0].slice("// URL: https://observablehq.com/".length).replace(/^d\//,""),n=e[3].slice("// Version: ".length);return"".concat(t,"@").concat(n)}))},v3:function(e){return o(e,3,1).then((function(e){return e[0].slice("// https://observablehq.com/".length).replace(/^d\//,"")}))}};try{var l=null!=a?a.replace(/^(?!@)/,"d/"):e(Pe()).pathname.match(/^\/(d\/[a-f0-9]{16}|@[^\/]+\/[^@].*?)(?:$|\/)/)[1];return u[i](l).catch((function(e){return null}))}catch(d){return null}}})),n.variable(t()).define(["signature"],(function(e){return e("PINNED",{name:"PINNED",description:"Notebook slug, automatically pinned to the most recent version of the importing notebook.",example:'md`You can import my notebook this way:\n\\`\\`\\`javascript\nimport {foo} from "${PINNED}"\n\\`\\`\\``\n'})})),n.variable(t("PINNED")).define("PINNED",["getPinnedSlug"],(function(e){return e()})),n.variable(t()).define(["md"],(function(e){return e(Re())})),n.variable(t("readChunks")).define("readChunks",(function(){return function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,r,i,o,s,u,l,d,m=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},a=n.separator,r=void 0===a?10:a,i=n.limit,o=void 0===i?1/0:i,s=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},u=[],l=new Uint8Array,d=function e(){return t.read().then((function(n){var a=n.done,i=n.value,c=-1,d=0;if(i){for(console.log("chunk size",i.length);++c<i.length;)if(i[c]===r){if(u.push(s(l,i.slice(d,c))),u.length>=o)return t.cancel(),u;d=c+1}l=i.slice(d)}return a?(u.push(l),u):e()}))},e.abrupt("return",d());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),n.variable(t("PINNED_LIB")).define("PINNED_LIB",["getPinnedSlug"],(function(e){return e({name:"691ae3b95f02db79"})})),n.variable(t("viewof RUN_TESTS")).define("viewof RUN_TESTS",["deprecateImport","viewof _dep_RUN_TESTS"],(function(e,t){return e(t,"RUN_TESTS",!1)})),n.variable(t("RUN_TESTS")).define("RUN_TESTS",["Generators","viewof RUN_TESTS"],(function(e,t){return e.input(t)})),n.variable(t()).define(["md"],(function(e){return e(Ae())})),n.variable(t("deprecateImport")).define("deprecateImport",["PINNED","PINNED_LIB"],(function(e,t){return function(n,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"3d9d1394d858ca97";return e&&e===t?r?void 0:n:(console.warn("".concat(a,' has been moved. Import it from "').concat(i,'".')),n)}}));var a=e.module(Te);return n.import("code","_dep_code",a),n.import("signature","_dep_signature",a),n.import("signature_theme","_dep_signature_theme",a),n.import("viewof RUN_TESTS","viewof _dep_RUN_TESTS",a),n.import("RUN_TESTS","_dep_RUN_TESTS",a),n.import("createStepper","_dep_createStepper",a),n.import("defaultTestRunner","_dep_defaultTestRunner",a),n.import("defaultSignatureParser","_dep_defaultSignatureParser",a),n.variable(t("signature")).define("signature",["deprecateImport","_dep_signature"],(function(e,t){return e(t,"signature",!1)})),n.variable(t("code")).define("code",["deprecateImport","_dep_code"],(function(e,t){return e(t,"code",!1)})),n.variable(t("signature_theme")).define("signature_theme",["deprecateImport","_dep_signature_theme"],(function(e,t){return e(t,"signature_theme")})),n.variable(t("createStepper")).define("createStepper",["deprecateImport","_dep_createStepper"],(function(e,t){return e(t,"createStepper")})),n.variable(t("defaultTestRunner")).define("defaultTestRunner",["deprecateImport","_dep_defaultTestRunner"],(function(e,t){return e(t,"defaultTestRunner")})),n.variable(t("defaultSignatureParser")).define("defaultSignatureParser",["deprecateImport","_dep_defaultSignatureParser"],(function(e,t){return e(t,"defaultSignatureParser")})),n}function ze(){var e=Object(S.a)(["## License\n\nThe code in this notebook is MIT Licensed."]);return ze=function(){return e},e}function Ve(){var e=Object(S.a)(['<span style="color:blue">SVG element</span>']);return Ve=function(){return e},e}function qe(){var e=Object(S.a)(['<span style="color:green">HTML canvas</span>']);return qe=function(){return e},e}function We(){var e=Object(S.a)(['<span style="color:red"><code>regl</code> WebGL context</span>']);return We=function(){return e},e}function He(){var e=Object(S.a)(["The view below shows a ",", a ",", and a "," stacked upon each other and living together in harmony."]);return He=function(){return e},e}function Ye(){var e=Object(S.a)(["## Sample Usage"]);return Ye=function(){return e},e}function Ke(){var e=Object(S.a)(["## viewportAxes\n\nRender basic SVG axes given a viewport and two `d3` scales."],["## viewportAxes\n\nRender basic SVG axes given a viewport and two \\`d3\\` scales."]);return Ke=function(){return e},e}function Ze(){var e=Object(S.a)(["## createViewport\n\nCreate a simple representation of a viewport"]);return Ze=function(){return e},e}function Xe(){var e=Object(S.a)(["4 \times 4"],["4 \\times 4"]);return Xe=function(){return e},e}function Je(){var e=Object(S.a)(["## createReglMap\n\nCreate a `regl` command to configure a single triangle covering the whole viewport. Accepts options with an optional `transform` parameter defining the name of a uniform to use as a 3d homogeneous (",") matrix uniform to be applied in the vertex shader."],["## createReglMap\n\nCreate a \\`regl\\` command to configure a single triangle covering the whole viewport. Accepts options with an optional \\`transform\\` parameter defining the name of a uniform to use as a 3d homogeneous (",") matrix uniform to be applied in the vertex shader."]);return Je=function(){return e},e}function Qe(){var e=Object(S.a)(["4 \times 4"],["4 \\times 4"]);return Qe=function(){return e},e}function $e(){var e=Object(S.a)(["3 \times 3"],["3 \\times 3"]);return $e=function(){return e},e}function et(){var e=Object(S.a)(["## createReglLinearScaleConfiguration\n\nCreate a regl command which adds 2d (",") and and 3d (",") homogeneous transformation matrices to `regl` context and uniforms. Must be invoked with two `d3` `linearScales` and a `callback`."],["## createReglLinearScaleConfiguration\n\nCreate a regl command which adds 2d (",") and and 3d (",") homogeneous transformation matrices to \\`regl\\` context and uniforms. Must be invoked with two \\`d3\\` \\`linearScales\\` and a \\`callback\\`."]);return et=function(){return e},e}function tt(){var e=Object(S.a)(["## createReglViewportConfiguration\n\nConfigure a regl viewport independent of pixel ratio given a layer stack. Returns a `regl` command which may be invoked with a `viewport` and a `callback`."],["## createReglViewportConfiguration\n\nConfigure a regl viewport independent of pixel ratio given a layer stack. Returns a \\`regl\\` command which may be invoked with a \\`viewport\\` and a \\`callback\\`."]);return tt=function(){return e},e}function nt(){var e=Object(S.a)(["## createLayerStack\n\nCreate a stack of layers (first on bottom). Each item receives width, height, and dpi. `layerConstructors` is either an array or an object of constructors for each layer. If an array, the returned layers are referenced by index. If an object, stable ordering of keys is assumed and layers may be referenced by name."],["## createLayerStack\n\nCreate a stack of layers (first on bottom). Each item receives width, height, and dpi. \\`layerConstructors\\` is either an array or an object of constructors for each layer. If an array, the returned layers are referenced by index. If an object, stable ordering of keys is assumed and layers may be referenced by name."]);return nt=function(){return e},e}function at(){var e=Object(S.a)(["## reglCanvasWithOptions\n\nA convenience function to reduce boilerplate by currying arguments. To create a function which strictly accepts `width`, `height`, and `dpi`, e.g.\n\n```js\nfn = (width, height, dpi) => reglCanvas(width, height, dpi, { ...reglOptions })\n```\n\nyou may instead write\n\n```js\nfn = reglCanvasWithOptions({ ...reglOptions })\n```\n"],["## reglCanvasWithOptions\n\nA convenience function to reduce boilerplate by currying arguments. To create a function which strictly accepts \\`width\\`, \\`height\\`, and \\`dpi\\`, e.g.\n\n\\`\\`\\`js\nfn = (width, height, dpi) => reglCanvas(width, height, dpi, { ...reglOptions })\n\\`\\`\\`\n\nyou may instead write\n\n\\`\\`\\`js\nfn = reglCanvasWithOptions({ ...reglOptions })\n\\`\\`\\`\n"]);return at=function(){return e},e}function rt(){var e=Object(S.a)(["## reusableReglCanvas"]);return rt=function(){return e},e}function it(){var e=Object(S.a)(["## reglCanvas\n\nCreate a [regl](https:/github.com/regl-project/regl) canvas using syntax which roughly mirrors that of [@observablehq/stdlib's DOM.context2d method](https://github.com/observablehq/stdlib)."]);return it=function(){return e},e}function ot(){var e=Object(S.a)(["\n- It should use x0, y0, x1, y1 for the viewport. Not margins. Much more portable, except for the fact that you have to carry around the DPI along with it.\n- ~~It should add a WebGL context to an SVG as a foreign object, if possible. The reason I focused on stacking them is that WebGL contexts are limited and sooner or later you make subplots or layers and regret needing many WebGL contexts in a single plot. I was trying to make heavy use of viewports and scissoring for the sake of efficiency and minimizing contexts, but I could still do that and play the SVG game a bit better.~~\n- Update: WebGL *does not* play well with SVG as a foreign object. There are some really obscure rendering bugs that prevent WebGL contexts from obeying last-on-top SVG-style ordering. My conclusion is that it is *not*, in fact, wise to go overboard with fanciness and instead to just layer the elements.\n"]);return ot=function(){return e},e}function ct(){var e=Object(S.a)(["~~~javascript\nimport { reglCanvas } from '","'\n~~~"]);return ct=function(){return e},e}function st(){var e=Object(S.a)(['<div style="border:1px solid black; border-radius: 3px; padding: 10px; max-width:640px;">\ud83d\udc49<em style="color:#c22">NOTE:</em> I\'m learning Observable! You should <a href="https://observablehq.com/@bryangingechen/version-pinning-for-notebooks">pin the version</a> if you use any functions herein:\n\n',"\n\nThis notebook is highly subject to changes and regrets. My biggest current regrets are:\n","</span>"]);return st=function(){return e},e}function ut(){var e=Object(S.a)(["# regl-tools\n\nThis notebook implements a number of helper methods for simple regl, canvas and SVG plots in Observable. The goal is simple: to the extent reasonably possible, creating plots should contain information about the particular plot, not about setup and rendering.\n\nTo this end, it uses `d3` scales and makes some opinionated choices about how to represent things, though the result is hopefully general enough that it's more useful than constraining."],["# regl-tools\n\nThis notebook implements a number of helper methods for simple regl, canvas and SVG plots in Observable. The goal is simple: to the extent reasonably possible, creating plots should contain information about the particular plot, not about setup and rendering.\n\nTo this end, it uses \\`d3\\` scales and makes some opinionated choices about how to represent things, though the result is hopefully general enough that it's more useful than constraining."]);return ut=function(){return e},e}function lt(e,t){var n=e.module();n.variable(t()).define(["md"],(function(e){return e(ut())})),n.variable(t()).define(["html","md","PINNED"],(function(e,t,n){return e(st(),t(ct(),n),t(ot()))}));var a=e.module(k);n.import("createReglCamera",a),n.import("createInteractions",a),n.variable(t()).define(["md"],(function(e){return e(it())})),n.variable(t("reglCanvas")).define("reglCanvas",["createREGL"],(function(e){return function(t,n,a,r){a=void 0===a?devicePixelRatio:a,r=r||{};var i=document.createElement("canvas");i.width=a*t,i.height=a*n,i.style.width=t+"px";var o=e(Object.assign({},r,{pixelRatio:a,canvas:i}));return i.value=o,i.__reglConfig={dpi:a,reglOptions:r},i}})),n.variable(t()).define(["md"],(function(e){return e(rt())})),n.variable(t("reusableReglCanvas")).define("reusableReglCanvas",["width","reglCanvas"],(function(e,t){return function(n,a){var r=void 0===a.dpi?devicePixelRatio:a.dpi,i=a.reglOptions||{},o={dpi:r,reglOptions:i};return n&&JSON.stringify(o)===JSON.stringify(n.__reglConfig)?(n.width=Math.floor(a.width*r),n.height=Math.floor(a.height*r),n.style.width="".concat(e,"px"),n):(n&&n.value&&n.value.destroy&&(n.value.destroy(),delete n.value),t(a.width,a.height,r,i))}})),n.variable(t()).define(["md"],(function(e){return e(at())})),n.variable(t("reglCanvasWithOptions")).define("reglCanvasWithOptions",["reglCanvas"],(function(e){return function(t){return function(n,a,r){return e(n,a,r,t)}}})),n.variable(t("getOrAttachReglFO")).define("getOrAttachReglFO",["createREGL"],(function(e){return function(t,n,a,r,i){var o=t.selectAll(".regl-canvas").data([null]).join((function(e){return e.append("foreignObject")})).attr("class","regl-canvas").attr("width",n).attr("height",a);o.selectAll("canvas").data([null]).join((function(e){return e.append("xhtml:canvas")})).attr("width",n*r).attr("height",a*r).style("width",n+"px").style("height",a+"px");var c=o.select("canvas").node(),s=c.value=c.value||e(Object.assign(i||{},{canvas:c,pixelRatio:r}));return s.data=s.data||{},c}})),n.variable(t()).define(["md"],(function(e){return e(nt())})),n.variable(t("createLayerStack")).define("createLayerStack",["Element"],(function(e){return function(t,n,a,r){t=Math.floor(t),n=Math.floor(n),a=void 0===a?devicePixelRatio:a;var i,o=Math.floor(t*a),c=Math.floor(n*a),s=document.createElement("div");function u(r,i){var o,c=r(t,n,a);return c instanceof e?c=(o=c).value||o:o=c.canvas||c,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.width="100%",o.style.height="100%",o.style.zIndex=i,s.appendChild(o),c}if(s.style.position="relative",s.style.width=t+"px",s.style.height=n+"px",Array.isArray(r))i=r.map(u);else{var l=Object.keys(r);i={},l.forEach((function(e,t){i[e]=u(r[e],t)}))}return{layers:i,container:s,dpiWidth:o,dpiHeight:c,dpi:a,width:t,height:n}}})),n.variable(t()).define(["md"],(function(e){return e(tt())})),n.variable(t("createReglViewportConfiguration")).define("createReglViewportConfiguration",["mat3create"],(function(e){return function(t){e();var n=t({scissor:{enable:!0,box:{x:function(e,t){return e.pixelRatio*t.margin.l},y:function(e,t){return e.pixelRatio*t.margin.b},width:function(e,t){return e.framebufferWidth-e.pixelRatio*(t.margin.r+t.margin.l)},height:function(e,t){return e.framebufferHeight-e.pixelRatio*(t.margin.t+t.margin.b)}}},viewport:{x:function(e,t){return e.pixelRatio*t.margin.l},y:function(e,t){return e.pixelRatio*t.margin.b},width:function(e,t){return e.framebufferWidth-e.pixelRatio*(t.margin.r+t.margin.l)},height:function(e,t){return e.framebufferHeight-e.pixelRatio*(t.margin.t+t.margin.b)}},uniforms:{viewportResolution:function(e,t){return[e.viewportWidth,e.viewportHeight]},framebufferResolution:function(e){return[e.framebufferWidth,e.framebufferHeight]},inverseViewportResolution:function(e,t){return[1/e.viewportWidth,1/e.viewportHeight]},inverseFramebufferResolution:function(e){return[1/e.framebufferWidth,1/e.framebufferHeight]}}});return function(e,t){n(e,t)}}})),n.variable(t()).define(["md","tex"],(function(e,t){return e(et(),t($e()),t(Qe()))})),n.variable(t("createReglLinearScaleConfiguration")).define("createReglLinearScaleConfiguration",["mat3create","mat4create","mat3fromLinearScales","mat3invert","mat4fromMat3"],(function(e,t,n,a,r){return function(i){var o={view3:e(),inverseView3:e(),view:t(),inverseView:t()},c=i({context:{view3:i.prop("view3"),inverseView3:i.prop("inverseView3"),view:i.prop("view"),inverseView:i.prop("inverseView")},uniforms:{view3:i.prop("view3"),inverseView3:i.prop("inverseView3"),view:i.prop("view"),inverseView:i.prop("inverseView")}});return function(e,t,i){n(o.view3,e,t),a(o.inverseView3,o.view3),r(o.view,o.view3),r(o.inverseView,o.inverseView3),c(o,i)}}})),n.variable(t()).define(["md","tex"],(function(e,t){return e(Je(),t(Xe()))})),n.variable(t("createReglMap")).define("createReglMap",(function(){return function(e,t){var n=void 0===(t=t||{}).transform?"inverseView":t.transform;return e({vert:"\n      precision highp float;\n      ".concat(n?"uniform mat4 ".concat(n,";"):"","\n      attribute vec2 aUV;\n      varying vec2 xy;\n      void main () {\n        xy = ").concat(n?"(".concat(n," * vec4(aUV, 0, 1)).xy"):"aUV",";\n        gl_Position = vec4(aUV, 0, 1);\n      }"),attributes:{aUV:[-4,-4,4,-4,0,4]},depth:{enable:!1},primitive:"triangles",count:3})}})),n.variable(t("mat3ViewportFromLinearScales")).define("mat3ViewportFromLinearScales",(function(){return function(e,t,n){var a=t.range(),r=n.range(),i=a[1]-a[0],o=r[0]-r[1];return e[0]=.5*i,e[1]=0,e[2]=0,e[3]=0,e[4]=-.5*o,e[5]=0,e[6]=.5*i+a[0],e[7]=.5*o+r[1],e[8]=1,e}})),n.variable(t("mat3fromLinearScales")).define("mat3fromLinearScales",(function(){return function(e,t,n){var a=t.domain(),r=n.domain(),i=2/(a[1]-a[0]),o=2/(r[1]-r[0]);return e[0]=i,e[1]=0,e[2]=0,e[3]=0,e[4]=o,e[5]=0,e[6]=-1-i*a[0],e[7]=-1-o*r[0],e[8]=1,e}})),n.variable(t()).define(["md"],(function(e){return e(Ze())})),n.variable(t("createViewport")).define("createViewport",(function(){return function(e,t){return{width:e.width,height:e.height,dpi:e.dpi,margin:Object.assign({t:0,r:0,b:0,l:0},t||{})}}})),n.variable(t()).define(["md"],(function(e){return e(Ke())})),n.variable(t("viewportAxes")).define("viewportAxes",["d3"],(function(e){return function(t,n,a,r){r=r||{},t.margin=void 0===t.margin?{t:0,r:0,b:0,l:0}:t.margin,r.xLabelSpacing=void 0===r.xLabelSpacing?80:r.xLabelSpacing,r.yLabelSpacing=void 0===r.yLabelSpacing?80:r.yLabelSpacing;var i=void 0===r.xAxis?e.axisBottom:r.xAxis,o=void 0===r.yAxis?e.axisLeft:r.yAxis,c=n.range(),s=n.range();return t.width=void 0===t.width?c[1]-c[0]:t.width,t.height=void 0===t.height?s[1]-s[0]:t.height,function(e){var c=e.select("g.x.axis");c.empty()&&(c=e.append("g").attr("class","x axis")),c.attr("transform","translate(0,"+(t.height-t.margin.b)+")").call(i(n).ticks(Math.floor((t.width-t.margin.l-t.margin.r)/r.xLabelSpacing)));var s=e.select("g.y.axis");return s.empty()&&(s=e.append("g").attr("class","y axis")),s.attr("transform","translate("+t.margin.l+", 0)").call(o(a).ticks(Math.floor((t.height-t.margin.t-t.margin.b)/r.yLabelSpacing))),e}}})),n.variable(t("constrainLinearScaleAspectRatio")).define("constrainLinearScaleAspectRatio",(function(){return function(e,t,n){var a=e.domain(),r=t.domain(),i=e.range(),o=t.range(),c=a[1]-a[0],s=i[1]-i[0],u=r[1]-r[0],l=(o[1]-o[0])/u,d=s/c,m=Math.abs(d/l),f=.5*(a[0]+a[1]);return e.domain([f-.5*c*m/n,f+.5*c*m/n]),e}})),n.variable(t("persistentZoom")).define("persistentZoom",["d3"],(function(e){return function(t,n,a,r,i){return e.zoom().on("zoom",(function(){var i,o=e.event.transform;i=t.range().map(o.invertX,o),t.domain(a.domain()),t.domain(i.map(t.invert,t)),i=n.range().map(o.invertY,o),n.domain(r.domain()),n.domain(i.map(n.invert,n))}))}})),n.variable(t("createTextureLookupTable")).define("createTextureLookupTable",(function(){return function(e,t,n){for(var a=e*t*(n=n||2),r=new Float32Array(a),i=0,o=0;o<a;i++,o+=n)r[o]=(i%e+.5)/e,r[o+1]=(.5+(i/e|0))/t;return r}})),n.variable(t("canWriteToFBOOfType")).define("canWriteToFBOOfType",(function(){return function(e,t){if(t=t||"float",!e.hasExtension("oes_texture_".concat(t.replace(" ","_"))))return!1;try{e.framebuffer({colorType:t,colorFormat:"rgba",radius:1});var n,a=e.framebuffer({colorType:"uint8",colorFormat:"rgba",radius:1}),r=e({vert:"\n      precision highp float;\n      attribute vec2 aXY;\n      void main () {\n        gl_Position = vec4(aXY, 0, 1);\n        gl_PointSize = 1.0;\n      }",frag:"\n      precision highp float;\n      void main () {\n        gl_FragColor = vec4(1, 0, 0, 1);\n      }",primitive:"points",count:1,attributes:{aXY:[0,0]},depth:{enable:!1}}),i=e({vert:"\n      precision highp float;\n      attribute vec2 aXY;\n      void main () {\n        gl_Position = vec4(aXY, 0, 1);\n      }",frag:"\n      precision highp float;\n      void main () {\n        gl_FragColor = vec4(1, 0, 0, 1);\n      }",attributes:{aXY:[-4,-4,4,-4,0,4]},count:3,primitive:"triangles",depth:{enable:!1}});return r(),a.use((function(){i(),n=e.read()})),0!==n[0]&&0===n[1]&&0===n[2]&&0!==n[3]}catch(o){return!1}}})),n.variable(t()).define(["md"],(function(e){return e(Ye())})),n.variable(t("stack")).define("stack",["createLayerStack","width","height","reglCanvas","DOM"],(function(e,t,n,a,r){return e(t,n,devicePixelRatio,{regl:function(e,t,n){return a(e,t,n)},canvas:r.context2d,svg:r.svg})})),n.variable(t("viewport")).define("viewport",["createViewport","stack"],(function(e,t){return e(t,{t:10,r:15,b:22,l:37})})),n.variable(t()).define(["md","html"],(function(e,t){return e(He(),t(We()),t(qe()),t(Ve()))})),n.variable(t()).define(["stack","d3","viewport","constrainLinearScaleAspectRatio","viewportAxes","configureViewport","configureLinearScales","drawStrip","mat3multiply","mat3create","mat3ViewportFromLinearScales","mat3fromLinearScales","vec2transformMat3"],c.a.mark((function e(t,n,a,r,i,o,s,u,l,d,m,f,p){var v,h,g,b,F,E,w,y,j,U;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=t.layers.regl,h=t.layers.canvas,g=n.select(t.layers.svg),b=n.scaleLinear().domain([-3,3]).range([a.margin.l,a.width-a.margin.r]).clamp(!0),F=r(n.scaleLinear().domain([-1.5,1.5]).range([a.height-a.margin.b,a.margin.t]).clamp(!0),b,1),w=[[1,-1],[1,1],[-1,-1],[-1,1]],y=v.buffer(w),g.selectAll("g.axes").remove(),g.append("g").attr("class","axes").call(i(a,b,F)),j=g.selectAll("g.handles").remove(),j=g.selectAll("g.handles").data([w]).enter().append("g").attr("class","handles"),U=j.selectAll("circle").data((function(e){return e})).enter().append("circle").attr("cursor","move").attr("r",5).attr("stroke-width",30).attr("stroke","transparent").attr("fill","blue").call(n.drag().on("drag",(function(e){e[0]=b.invert(n.event.x),e[1]=F.invert(n.event.y),E()}))),(E=function(){U.attr("cx",(function(e){return b(e[0])})).attr("cy",(function(e){return F(e[1])})),y.subdata(w),v.poll(),v.clear({color:[1,1,1,1]}),o(a,(function(e){e.viewport3;s(b,F,(function(e){e.view3;u({points:y,count:w.length})}))}));var e=l(d(),m(d(),b,F),f(d(),b,F));h.clearRect(0,0,t.width,t.height),h.beginPath(),h.lineWidth=4,h.strokeStyle="#3a3",h.moveTo.apply(h,p([],w[1],e)),h.lineTo.apply(h,p([],w[2],e)),h.moveTo.apply(h,p([],w[3],e)),h.lineTo.apply(h,p([],w[0],e)),h.stroke()})(),e.next=16,t.container;case 16:case"end":return e.stop()}}),e)}))),n.variable(t("configureLinearScales")).define("configureLinearScales",["createReglLinearScaleConfiguration","regl"],(function(e,t){return e(t)})),n.variable(t("regl")).define("regl",["stack"],(function(e){return e.layers.regl})),n.variable(t("height")).define("height",["width"],(function(e){return.5*e})),n.variable(t("configureViewport")).define("configureViewport",["createReglViewportConfiguration","regl"],(function(e,t){return e(t)})),n.variable(t("drawStrip")).define("drawStrip",["regl"],(function(e){return e({vert:"\n    precision highp float;\n    uniform mat4 view;\n    attribute vec2 xy;\n    void main () {\n      gl_Position = view * vec4(xy, 0, 1);\n    }",frag:"\n    precision highp float;\n    void main () {\n      gl_FragColor = vec4(1.0, 0.8, 0.8, 1);\n    }",attributes:{xy:e.prop("points")},primitive:"triangle strip",depth:{enable:!1},count:e.prop("count")})})),n.variable(t("d3")).define("d3",["require"],(function(e){return e("d3@5")})),n.variable(t("createREGL")).define("createREGL",["require"],(function(e){return e("regl")}));var r=e.module(P);n.import("mat4create",r),n.import("mat4fromMat3",r);var i=e.module(z);n.import("mat3create",i),n.import("mat3invert",i),n.import("mat3multiply",i);var o=e.module(Z);n.import("vec2transformMat3",o);var s=e.module(Ge);return n.import("PINNED",s),n.variable(t()).define(["md"],(function(e){return e(ze())})),n.variable(t("LICENSE")).define("LICENSE",(function(){return"mit"})),n}function dt(e,t){var n=e.module();n.variable(t("viewof regl")).define("viewof regl",["createREGL","invalidation"],(function(e,t){console.log("reloaded");var n=devicePixelRatio,a=document.createElement("canvas");a.width=Math.floor(280*n),a.height=Math.floor(500*n),a.style.width="".concat(120,"px"),a.style.height="".concat(125,"px");var r=e({canvas:a,pixelRatio:n,extensions:["OES_standard_derivatives"],optionalExtensions:["OES_element_index_uint"]});return a.value=r,t.then((function(){return r.destroy()})),a})),n.variable(t("regl")).define("regl",["Generators","viewof regl"],(function(e,t){return e.input(t)})),n.variable(t("time")).define("time",(function(){return 3})),n.variable(t()).define((function(){return window.scrollY})),n.variable(t("opacity")).define("opacity",(function(){return.85})),n.variable(t("passes")).define("passes",(function(){return["Solid surface pass","Fake transparency pass"]})),n.variable(t("gridOpacity")).define("gridOpacity",(function(){return 0})),n.variable(t("gridWidth")).define("gridWidth",(function(){return.5})),n.variable(t("cartoonEdgeWidth")).define("cartoonEdgeWidth",(function(){return 2.5})),n.variable(t("cartoonEdgeOpacity")).define("cartoonEdgeOpacity",(function(){return 1})),n.variable(t("specular")).define("specular",(function(){return 1})),n.variable(t()).define(["camera","buffers","opacity","specular","cartoonEdgeWidth","cartoonEdgeOpacity","gridWidth","gridOpacity","regl","setUniforms","passes","drawMesh","invalidation"],(function(e,t,n,a,r,i,o,c,s,u,l,d,m){e.taint();var f={buffers:t,opacity:n,specular:a,cartoonEdgeWidth:r,cartoonEdgeOpacity:i,gridWidth:o,gridOpacity:c},p=s.frame((function(){e((function(e){e.dirty&&u((function(){s.clear({color:[1,1,1,1]}),~l.indexOf("Solid surface pass")&&d(Object(g.a)(Object(g.a)({},f),{},{solidPass:!0})),~l.indexOf("Fake transparency pass")&&d(Object(g.a)(Object(g.a)({},f),{},{solidPass:!1}))}))}))}));m.then((function(){return p.cancel()}))})),n.variable(t("createREGL")).define("createREGL",["require"],(function(e){return e("regl")})),n.variable(t("mesh")).define("mesh",["meshFromFunction"],(function(e){return e((function(e,t){return[e,t]}),{resolution:[151,151],uDomain:[0,1.5],vDomain:[-Math.PI,Math.PI],uPeriodic:!1,vPeriodic:!0})})),n.variable(t("drawMesh")).define("drawMesh",["regl"],(function(e){return e({vert:"\n    precision highp float;\n    attribute vec2 uv;\n    uniform mat4 projection, view;\n    varying vec3 vPosition, vNormal;\n    varying vec2 vUV;\n    uniform float time;\n\n    // Our function!\n    vec3 f(vec2 uv) {\n      float r2 = dot(uv, uv);\n      float s = 8.0 * sqrt(r2);\n      float t = time * 4.0;\n      return vec3(\n        uv.x,\n        -4.0 / sqrt(t*t+ s * s),\n        uv.y\n      );\n    }\n\n    void main () {\n      vUV = uv.x * vec2(cos(uv.y), sin(uv.y));\n      vPosition = f(vUV);\n\n      // We differentiate the surface numerically to get the partial\n      // derivative wrt u and v, then take the cross product to get\n      // the surface normal.\n      float dx = 1e-2;\n      vec3 dpdu = f(vUV + vec2(dx, 0)) - vPosition;\n      vec3 dpdv = f(vUV + vec2(0, dx)) - vPosition;\n      vNormal = normalize(cross(dpdu, dpdv));\n\n      gl_Position = projection * view * vec4(vPosition, 1);\n    }\n  ",frag:"\n    #extension GL_OES_standard_derivatives : enable\n    precision highp float;\n    varying vec3 vPosition, vNormal;\n    uniform vec3 eye;\n    uniform bool solidPass;\n    varying vec2 vUV;\n    uniform float pixelRatio, opacity, cartoonEdgeWidth, gridOpacity, specular, cartoonEdgeOpacity, gridWidth;\n\n    // This function implements a constant-width grid as a function of\n    // a two-dimensional input. This makes it possible to draw a grid\n    // which does not line up with the triangle edges.\n    // from: https://github.com/rreusser/glsl-solid-wireframe\n    float gridFactor (vec2 parameter, float width, float feather) {\n      float w1 = width - feather * 0.5;\n      vec2 d = fwidth(parameter);\n      vec2 looped = 0.5 - abs(mod(parameter, 1.0) - 0.5);\n      vec2 a2 = smoothstep(d * w1, d * (w1 + feather), looped);\n      return min(a2.x, a2.y);\n    }\n\n    void main () {\n      vec3 normal = normalize(vNormal);\n\n      // The dot product of the view direction and surface normal.\n      float vDotN = abs(dot(normal, normalize(vPosition - eye)));\n\n      // We divide vDotN by its gradient magnitude in screen space to\n      // give a function which goes roughly from 0 to 1 over a single\n      // pixel right at glancing angles. i.e. cartoon edges!\n      float cartoonEdge = smoothstep(0.75, 1.25, vDotN / fwidth(vDotN) / (cartoonEdgeWidth * pixelRatio));\n\n      // Combine the gridlines and cartoon edges\n      float grid = gridFactor(vUV * 10.0, 0.5 * gridWidth * pixelRatio, 0.5);\n      float combinedGrid = max(cartoonEdgeOpacity * (1.0 - cartoonEdge), gridOpacity * (1.0 - grid));\n\n      if (solidPass) {\n        // If the surface pass, we compute some shading\n        float shade = 0.2 + mix(1.2, specular * pow(vDotN, 3.0), 0.5);\n        vec3 colorFromNormal = (0.5 - (gl_FrontFacing ? 1.0 : -1.0) * 0.5 * normal);\n        vec3 baseColor = gl_FrontFacing ? vec3(12.0/255.0, 80.0/255.0, 255.0/255.0) : vec3(255.0/255.0, 116.0/255.0, 241.0/255.0);\n\n        vec3 color = shade * mix(\n            baseColor,\n            colorFromNormal,\n            0.0\n          );\n        // Apply the gridlines\n        color = mix(color, vec3(0), opacity * combinedGrid);\n        gl_FragColor = vec4(pow(color, vec3(0.454)), 1.0);\n      } else {\n        // If the wireframe pass, we just draw black lines with some alpha\n        gl_FragColor = vec4(\n          // To get the opacity to mix ~correctly, we use reverse-add blending mode\n          // so that white here shows up as black gridlines. This could be simplified\n          // by doing a bit more math to get the mixing right with just additive blending.\n          vec3(1),\n          (1.0 - opacity) * combinedGrid\n        );\n\n        if (gl_FragColor.a < 1e-3) discard;\n      }\n    }\n  ",primitive:"triangles",uniforms:{solidPass:e.prop("solidPass"),opacity:e.prop("opacity"),cartoonEdgeWidth:e.prop("cartoonEdgeWidth"),cartoonEdgeOpacity:e.prop("cartoonEdgeOpacity"),gridOpacity:e.prop("gridOpacity"),gridWidth:e.prop("gridWidth"),specular:e.prop("specular")},attributes:{uv:e.prop("buffers.uv")},depth:{enable:e.prop("solidPass")},blend:{enable:function(e,t){return!t.solidPass},func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:1,dstAlpha:1},equation:{rgb:"reverse subtract",alpha:"add"}},elements:e.prop("buffers.elements")})})),n.variable(t("setUniforms")).define("setUniforms",["regl","time"],(function(e,t){return e({uniforms:{projection:e.context("projection"),view:e.context("view"),eye:e.context("eye"),pixelRatio:e.context("pixelRatio"),time:function(e,n){return t}}})})),n.variable(t("buffers")).define("buffers",["regl","mesh","invalidation"],(function(e,t,n){var a=e.buffer(t.positions.flat()),r=e.elements(t.cells.flat());return n.then((function(){a.destroy(),r.destroy()})),{uv:a,elements:r}})),n.variable(t("meshFromFunction")).define("meshFromFunction",(function(){return function(e,t){var n,a,r,i,o=void 0===(t=t||{}).resolution?11:t.resolution,c=Array.isArray(t.resolution)?t.resolution[0]:o,s=Array.isArray(t.resolution)?t.resolution[1]:o,u=void 0===t.uDomain?[0,1]:t.uDomain,l=void 0===t.vDomain?[0,1]:t.vDomain,d=c,m=s;t.vPeriodic||(d+=1),t.uPeriodic||(m+=1);var f=[],p=[];for(n=0;n<d;n++)for(r=u[0]+(u[1]-u[0])*n/c,a=0;a<m;a++)i=l[0]+(l[1]-l[0])*a/s,f.push(e(r,i));for(n=0;n<c;n++){var v=n+1;for(t.vPeriodic&&(v%=c),a=0;a<s;a++){var h=a+1;t.uPeriodic&&(h%=s),p.push([n+d*a,v+d*a,v+d*h]),p.push([n+d*a,v+d*h,n+d*h])}}return{positions:f,cells:p}}})),n.variable(t("camera")).define("camera",["createReglCamera","regl","phi"],(function(e,t,n){return e(t,{distance:10,phi:n,theta:0})})),n.variable(t("phi")).define("phi",(function(){return 0}));var a=e.module(lt);return n.import("createReglCamera",a),n.import("createInteractions",a),n.variable(t("LICENSE")).define("LICENSE",(function(){return"mit"})),n}var mt=function(){var e=Object(a.useRef)(),t=Object(a.useState)(),n=Object(u.a)(t,2),i=n[0],o=n[1];return Object(a.useEffect)((function(){var t=(new x.b).module(dt,(function(t){return"viewof regl"===t?x.a.into(e.current.querySelector(".viewof-regl"))():["drawMesh","setUniforms","buffers","camera"].includes(t)}));t.redefine("phi",1.6),t.redefine("time",3),o(t)}),[]),Object(a.useEffect)((function(){var e=function(){var e=window.scrollY>100?1:window.scrollY/100,t=1.6-1.21*e,n=3-2.57*e;i.redefine("phi",t),i.redefine("time",n)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[i]),r.a.createElement("div",{className:"FakeTransparencyForDSurfaces",ref:e},r.a.createElement("div",{className:"viewof-regl"}))},ft=n(25),pt=ft.format(",.0f"),vt=ft.format(",.3f");var ht=Object(d.h)((function(){var e=Object(a.useContext)(b).data,t=e.actors;return r.a.createElement("section",{id:"market",className:"container"},r.a.createElement("div",{class:"section minerbar"},r.a.createElement("div",{class:"minerId"},r.a.createElement(l.b,{to:"/market"},"Market"))),r.a.createElement("div",{id:"actors",className:"section"},r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:e&&r.a.createElement(r.a.Fragment,null,vt(t&&t.totalProviderLockedCollateral),r.a.createElement(h,null)),desc:"Provider Collateral"}),r.a.createElement(v,{title:e&&r.a.createElement(r.a.Fragment,null,vt(t&&t.totalClientStorageFee),r.a.createElement(h,null)),desc:"Client Storage Fee"}),r.a.createElement(v,{title:t&&r.a.createElement(r.a.Fragment,null,pt(t.nextId)),desc:"Total deals"})),"These numbers are approximate projections based on the current network state and may be incorrect, do your own research."),r.a.createElement("div",{className:"section"},r.a.createElement("h3",null,"Asks")),r.a.createElement("div",{className:"spacerace card section"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-sm space table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Miner"),r.a.createElement("th",{scope:"col"},"Power"),r.a.createElement("th",{scope:"col"},"Ask"))),r.a.createElement("tbody",null,e&&e.miners&&Object.keys(e.miners).map((function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("th",{scope:"row"},n+1),r.a.createElement("td",{align:"right",className:"minerAddress"},r.a.createElement(l.b,{to:"/miners/".concat(e.miners[t].address)},e.miners[t].address)),r.a.createElement("td",{align:"right"},p()(e.miners[t].rawPower,{standard:"iec"})),r.a.createElement("td",{align:"right"},e.miners[t].price?"".concat(vt(e.miners[t].price/1e18*2880*30*1024)," FIL TiB/month"):"no price"))})))))))}));function gt(e){var t=e.deadline,n=e.head,a=t;return r.a.createElement("div",{className:"deadlines windowpost"},r.a.createElement("div",{className:0===a.LiveSectors?"deadline opacity5":"deadline"},r.a.createElement("div",{className:"out"},"In ",a.Close-n.Height),r.a.createElement("div",{className:"hddWrapper"},r.a.createElement("div",{className:"in"},Math.round(32*a.LiveSectors/1024)," TiB"),r.a.createElement("div",{className:"hdds"},Object(X.a)(Array(Math.ceil(Math.round(32*a.LiveSectors/1024-+a.FaultyPower.Raw/1099511627776)/8))).map((function(e,t){return r.a.createElement("div",{key:t,className:"hdd"}," ")})),Object(X.a)(Array(Math.ceil(Math.round(+a.FaultyPower.Raw/1099511627776)/8))).map((function(e,t){return r.a.createElement("div",{key:t,className:"hdd faulty"}," ")}))))))}function bt(){var e=Object(a.useContext)(b).data,t=e.miners,n=e.head;return t?r.a.createElement("section",{className:"container"},"Listing WindowPoSt duties of the top 50 miners.",t&&Object.keys(t).slice(0,40).map((function(e,a){return r.a.createElement("div",{className:"flex",key:a},r.a.createElement(l.b,{to:"/miners/".concat(t[e].address)},t[e].address),t[e].deadlines&&r.a.createElement(gt,{head:n,deadline:t[e].deadlines.nextDeadlines[47]}),t[e].prevDeadlines&&r.a.createElement(gt,{head:n,deadline:t[e].prevDeadlines.nextDeadlines[47]}))}))):null}var Ft=n(39),Et=n.n(Ft);function wt(e){var t=e.minerId,n=e.deadlines,a=e.head,i=e.link,o=e.out;return i||(i=function(e){return"/miners/".concat(t,"/deadlines/").concat(e.Index)}),o||(o=function(e){var t=e.d,n=e.head;e.i;return"In ".concat(t.Close-n.Height)}),a&&n?r.a.createElement("div",{className:"deadlines windowpost"},n&&n.map((function(e,t){return r.a.createElement("div",{key:t,className:0===e.LiveSectors?"deadline opacity5":"deadline"},r.a.createElement(l.b,{to:i(e)},r.a.createElement("div",{className:"out"},o({d:e,head:a,i:t})),r.a.createElement("div",{className:"hddWrapper"},r.a.createElement("div",{className:"in"},Math.round(32*e.LiveSectors/1024)," TiB"),r.a.createElement("div",{className:"hdds"},Object(X.a)(Array(Math.ceil(Math.round(32*e.LiveSectors/1024-+e.FaultyPower.Raw/1099511627776)/8))).map((function(e,t){return r.a.createElement("div",{key:t,className:"hdd"}," ")})),Object(X.a)(Array(Math.ceil(Math.round(+e.FaultyPower.Raw/1099511627776)/8))).map((function(e,t){return r.a.createElement("div",{key:t,className:"hdd faulty"}," ")}))))))}))):r.a.createElement(r.a.Fragment,null)}function yt(){var e=Object(a.useContext)(b).data;if(!e)return r.a.createElement("section",{id:"LookUp",className:"container"},"loading");var t=e.miners,n=e.head;return r.a.createElement("section",{id:"LookUp",className:"container"},"Listing WindowPoSt duties of the top 50 miners.",t&&Object.keys(t).slice(0,50).map((function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(l.b,{to:"/miners/".concat(t[e].address)},t[e].address),r.a.createElement(wt,{minerId:t[e].address,deadlines:t[e].deadlines.nextDeadlines||[],head:n}))})))}var jt=n(34),Ut={AC:{code:"AC",unicode:"U+1F1E6 U+1F1E8",name:"Ascension Island",emoji:"\ud83c\udde6\ud83c\udde8"},AD:{code:"AD",unicode:"U+1F1E6 U+1F1E9",name:"Andorra",emoji:"\ud83c\udde6\ud83c\udde9"},AE:{code:"AE",unicode:"U+1F1E6 U+1F1EA",name:"United Arab Emirates",emoji:"\ud83c\udde6\ud83c\uddea"},AF:{code:"AF",unicode:"U+1F1E6 U+1F1EB",name:"Afghanistan",emoji:"\ud83c\udde6\ud83c\uddeb"},AG:{code:"AG",unicode:"U+1F1E6 U+1F1EC",name:"Antigua & Barbuda",emoji:"\ud83c\udde6\ud83c\uddec"},AI:{code:"AI",unicode:"U+1F1E6 U+1F1EE",name:"Anguilla",emoji:"\ud83c\udde6\ud83c\uddee"},AL:{code:"AL",unicode:"U+1F1E6 U+1F1F1",name:"Albania",emoji:"\ud83c\udde6\ud83c\uddf1"},AM:{code:"AM",unicode:"U+1F1E6 U+1F1F2",name:"Armenia",emoji:"\ud83c\udde6\ud83c\uddf2"},AO:{code:"AO",unicode:"U+1F1E6 U+1F1F4",name:"Angola",emoji:"\ud83c\udde6\ud83c\uddf4"},AQ:{code:"AQ",unicode:"U+1F1E6 U+1F1F6",name:"Antarctica",emoji:"\ud83c\udde6\ud83c\uddf6"},AR:{code:"AR",unicode:"U+1F1E6 U+1F1F7",name:"Argentina",emoji:"\ud83c\udde6\ud83c\uddf7"},AS:{code:"AS",unicode:"U+1F1E6 U+1F1F8",name:"American Samoa",emoji:"\ud83c\udde6\ud83c\uddf8"},AT:{code:"AT",unicode:"U+1F1E6 U+1F1F9",name:"Austria",emoji:"\ud83c\udde6\ud83c\uddf9"},AU:{code:"AU",unicode:"U+1F1E6 U+1F1FA",name:"Australia",emoji:"\ud83c\udde6\ud83c\uddfa"},AW:{code:"AW",unicode:"U+1F1E6 U+1F1FC",name:"Aruba",emoji:"\ud83c\udde6\ud83c\uddfc"},AX:{code:"AX",unicode:"U+1F1E6 U+1F1FD",name:"\xc5land Islands",emoji:"\ud83c\udde6\ud83c\uddfd"},AZ:{code:"AZ",unicode:"U+1F1E6 U+1F1FF",name:"Azerbaijan",emoji:"\ud83c\udde6\ud83c\uddff"},BA:{code:"BA",unicode:"U+1F1E7 U+1F1E6",name:"Bosnia & Herzegovina",emoji:"\ud83c\udde7\ud83c\udde6"},BB:{code:"BB",unicode:"U+1F1E7 U+1F1E7",name:"Barbados",emoji:"\ud83c\udde7\ud83c\udde7"},BD:{code:"BD",unicode:"U+1F1E7 U+1F1E9",name:"Bangladesh",emoji:"\ud83c\udde7\ud83c\udde9"},BE:{code:"BE",unicode:"U+1F1E7 U+1F1EA",name:"Belgium",emoji:"\ud83c\udde7\ud83c\uddea"},BF:{code:"BF",unicode:"U+1F1E7 U+1F1EB",name:"Burkina Faso",emoji:"\ud83c\udde7\ud83c\uddeb"},BG:{code:"BG",unicode:"U+1F1E7 U+1F1EC",name:"Bulgaria",emoji:"\ud83c\udde7\ud83c\uddec"},BH:{code:"BH",unicode:"U+1F1E7 U+1F1ED",name:"Bahrain",emoji:"\ud83c\udde7\ud83c\udded"},BI:{code:"BI",unicode:"U+1F1E7 U+1F1EE",name:"Burundi",emoji:"\ud83c\udde7\ud83c\uddee"},BJ:{code:"BJ",unicode:"U+1F1E7 U+1F1EF",name:"Benin",emoji:"\ud83c\udde7\ud83c\uddef"},BL:{code:"BL",unicode:"U+1F1E7 U+1F1F1",name:"St. Barth\xe9lemy",emoji:"\ud83c\udde7\ud83c\uddf1"},BM:{code:"BM",unicode:"U+1F1E7 U+1F1F2",name:"Bermuda",emoji:"\ud83c\udde7\ud83c\uddf2"},BN:{code:"BN",unicode:"U+1F1E7 U+1F1F3",name:"Brunei",emoji:"\ud83c\udde7\ud83c\uddf3"},BO:{code:"BO",unicode:"U+1F1E7 U+1F1F4",name:"Bolivia",emoji:"\ud83c\udde7\ud83c\uddf4"},BQ:{code:"BQ",unicode:"U+1F1E7 U+1F1F6",name:"Caribbean Netherlands",emoji:"\ud83c\udde7\ud83c\uddf6"},BR:{code:"BR",unicode:"U+1F1E7 U+1F1F7",name:"Brazil",emoji:"\ud83c\udde7\ud83c\uddf7"},BS:{code:"BS",unicode:"U+1F1E7 U+1F1F8",name:"Bahamas",emoji:"\ud83c\udde7\ud83c\uddf8"},BT:{code:"BT",unicode:"U+1F1E7 U+1F1F9",name:"Bhutan",emoji:"\ud83c\udde7\ud83c\uddf9"},BV:{code:"BV",unicode:"U+1F1E7 U+1F1FB",name:"Bouvet Island",emoji:"\ud83c\udde7\ud83c\uddfb"},BW:{code:"BW",unicode:"U+1F1E7 U+1F1FC",name:"Botswana",emoji:"\ud83c\udde7\ud83c\uddfc"},BY:{code:"BY",unicode:"U+1F1E7 U+1F1FE",name:"Belarus",emoji:"\ud83c\udde7\ud83c\uddfe"},BZ:{code:"BZ",unicode:"U+1F1E7 U+1F1FF",name:"Belize",emoji:"\ud83c\udde7\ud83c\uddff"},CA:{code:"CA",unicode:"U+1F1E8 U+1F1E6",name:"Canada",emoji:"\ud83c\udde8\ud83c\udde6"},CC:{code:"CC",unicode:"U+1F1E8 U+1F1E8",name:"Cocos (Keeling) Islands",emoji:"\ud83c\udde8\ud83c\udde8"},CD:{code:"CD",unicode:"U+1F1E8 U+1F1E9",name:"Congo - Kinshasa",emoji:"\ud83c\udde8\ud83c\udde9"},CF:{code:"CF",unicode:"U+1F1E8 U+1F1EB",name:"Central African Republic",emoji:"\ud83c\udde8\ud83c\uddeb"},CG:{code:"CG",unicode:"U+1F1E8 U+1F1EC",name:"Congo - Brazzaville",emoji:"\ud83c\udde8\ud83c\uddec"},CH:{code:"CH",unicode:"U+1F1E8 U+1F1ED",name:"Switzerland",emoji:"\ud83c\udde8\ud83c\udded"},CI:{code:"CI",unicode:"U+1F1E8 U+1F1EE",name:"C\xf4te d\u2019Ivoire",emoji:"\ud83c\udde8\ud83c\uddee"},CK:{code:"CK",unicode:"U+1F1E8 U+1F1F0",name:"Cook Islands",emoji:"\ud83c\udde8\ud83c\uddf0"},CL:{code:"CL",unicode:"U+1F1E8 U+1F1F1",name:"Chile",emoji:"\ud83c\udde8\ud83c\uddf1"},CM:{code:"CM",unicode:"U+1F1E8 U+1F1F2",name:"Cameroon",emoji:"\ud83c\udde8\ud83c\uddf2"},CN:{code:"CN",unicode:"U+1F1E8 U+1F1F3",name:"China",emoji:"\ud83c\udde8\ud83c\uddf3"},CO:{code:"CO",unicode:"U+1F1E8 U+1F1F4",name:"Colombia",emoji:"\ud83c\udde8\ud83c\uddf4"},CP:{code:"CP",unicode:"U+1F1E8 U+1F1F5",name:"Clipperton Island",emoji:"\ud83c\udde8\ud83c\uddf5"},CR:{code:"CR",unicode:"U+1F1E8 U+1F1F7",name:"Costa Rica",emoji:"\ud83c\udde8\ud83c\uddf7"},CU:{code:"CU",unicode:"U+1F1E8 U+1F1FA",name:"Cuba",emoji:"\ud83c\udde8\ud83c\uddfa"},CV:{code:"CV",unicode:"U+1F1E8 U+1F1FB",name:"Cape Verde",emoji:"\ud83c\udde8\ud83c\uddfb"},CW:{code:"CW",unicode:"U+1F1E8 U+1F1FC",name:"Cura\xe7ao",emoji:"\ud83c\udde8\ud83c\uddfc"},CX:{code:"CX",unicode:"U+1F1E8 U+1F1FD",name:"Christmas Island",emoji:"\ud83c\udde8\ud83c\uddfd"},CY:{code:"CY",unicode:"U+1F1E8 U+1F1FE",name:"Cyprus",emoji:"\ud83c\udde8\ud83c\uddfe"},CZ:{code:"CZ",unicode:"U+1F1E8 U+1F1FF",name:"Czechia",emoji:"\ud83c\udde8\ud83c\uddff"},DE:{code:"DE",unicode:"U+1F1E9 U+1F1EA",name:"Germany",emoji:"\ud83c\udde9\ud83c\uddea"},DG:{code:"DG",unicode:"U+1F1E9 U+1F1EC",name:"Diego Garcia",emoji:"\ud83c\udde9\ud83c\uddec"},DJ:{code:"DJ",unicode:"U+1F1E9 U+1F1EF",name:"Djibouti",emoji:"\ud83c\udde9\ud83c\uddef"},DK:{code:"DK",unicode:"U+1F1E9 U+1F1F0",name:"Denmark",emoji:"\ud83c\udde9\ud83c\uddf0"},DM:{code:"DM",unicode:"U+1F1E9 U+1F1F2",name:"Dominica",emoji:"\ud83c\udde9\ud83c\uddf2"},DO:{code:"DO",unicode:"U+1F1E9 U+1F1F4",name:"Dominican Republic",emoji:"\ud83c\udde9\ud83c\uddf4"},DZ:{code:"DZ",unicode:"U+1F1E9 U+1F1FF",name:"Algeria",emoji:"\ud83c\udde9\ud83c\uddff"},EA:{code:"EA",unicode:"U+1F1EA U+1F1E6",name:"Ceuta & Melilla",emoji:"\ud83c\uddea\ud83c\udde6"},EC:{code:"EC",unicode:"U+1F1EA U+1F1E8",name:"Ecuador",emoji:"\ud83c\uddea\ud83c\udde8"},EE:{code:"EE",unicode:"U+1F1EA U+1F1EA",name:"Estonia",emoji:"\ud83c\uddea\ud83c\uddea"},EG:{code:"EG",unicode:"U+1F1EA U+1F1EC",name:"Egypt",emoji:"\ud83c\uddea\ud83c\uddec"},EH:{code:"EH",unicode:"U+1F1EA U+1F1ED",name:"Western Sahara",emoji:"\ud83c\uddea\ud83c\udded"},ER:{code:"ER",unicode:"U+1F1EA U+1F1F7",name:"Eritrea",emoji:"\ud83c\uddea\ud83c\uddf7"},ES:{code:"ES",unicode:"U+1F1EA U+1F1F8",name:"Spain",emoji:"\ud83c\uddea\ud83c\uddf8"},ET:{code:"ET",unicode:"U+1F1EA U+1F1F9",name:"Ethiopia",emoji:"\ud83c\uddea\ud83c\uddf9"},EU:{code:"EU",unicode:"U+1F1EA U+1F1FA",name:"European Union",emoji:"\ud83c\uddea\ud83c\uddfa"},FI:{code:"FI",unicode:"U+1F1EB U+1F1EE",name:"Finland",emoji:"\ud83c\uddeb\ud83c\uddee"},FJ:{code:"FJ",unicode:"U+1F1EB U+1F1EF",name:"Fiji",emoji:"\ud83c\uddeb\ud83c\uddef"},FK:{code:"FK",unicode:"U+1F1EB U+1F1F0",name:"Falkland Islands",emoji:"\ud83c\uddeb\ud83c\uddf0"},FM:{code:"FM",unicode:"U+1F1EB U+1F1F2",name:"Micronesia",emoji:"\ud83c\uddeb\ud83c\uddf2"},FO:{code:"FO",unicode:"U+1F1EB U+1F1F4",name:"Faroe Islands",emoji:"\ud83c\uddeb\ud83c\uddf4"},FR:{code:"FR",unicode:"U+1F1EB U+1F1F7",name:"France",emoji:"\ud83c\uddeb\ud83c\uddf7"},GA:{code:"GA",unicode:"U+1F1EC U+1F1E6",name:"Gabon",emoji:"\ud83c\uddec\ud83c\udde6"},GB:{code:"GB",unicode:"U+1F1EC U+1F1E7",name:"United Kingdom",emoji:"\ud83c\uddec\ud83c\udde7"},GD:{code:"GD",unicode:"U+1F1EC U+1F1E9",name:"Grenada",emoji:"\ud83c\uddec\ud83c\udde9"},GE:{code:"GE",unicode:"U+1F1EC U+1F1EA",name:"Georgia",emoji:"\ud83c\uddec\ud83c\uddea"},GF:{code:"GF",unicode:"U+1F1EC U+1F1EB",name:"French Guiana",emoji:"\ud83c\uddec\ud83c\uddeb"},GG:{code:"GG",unicode:"U+1F1EC U+1F1EC",name:"Guernsey",emoji:"\ud83c\uddec\ud83c\uddec"},GH:{code:"GH",unicode:"U+1F1EC U+1F1ED",name:"Ghana",emoji:"\ud83c\uddec\ud83c\udded"},GI:{code:"GI",unicode:"U+1F1EC U+1F1EE",name:"Gibraltar",emoji:"\ud83c\uddec\ud83c\uddee"},GL:{code:"GL",unicode:"U+1F1EC U+1F1F1",name:"Greenland",emoji:"\ud83c\uddec\ud83c\uddf1"},GM:{code:"GM",unicode:"U+1F1EC U+1F1F2",name:"Gambia",emoji:"\ud83c\uddec\ud83c\uddf2"},GN:{code:"GN",unicode:"U+1F1EC U+1F1F3",name:"Guinea",emoji:"\ud83c\uddec\ud83c\uddf3"},GP:{code:"GP",unicode:"U+1F1EC U+1F1F5",name:"Guadeloupe",emoji:"\ud83c\uddec\ud83c\uddf5"},GQ:{code:"GQ",unicode:"U+1F1EC U+1F1F6",name:"Equatorial Guinea",emoji:"\ud83c\uddec\ud83c\uddf6"},GR:{code:"GR",unicode:"U+1F1EC U+1F1F7",name:"Greece",emoji:"\ud83c\uddec\ud83c\uddf7"},GS:{code:"GS",unicode:"U+1F1EC U+1F1F8",name:"South Georgia & South Sandwich Islands",emoji:"\ud83c\uddec\ud83c\uddf8"},GT:{code:"GT",unicode:"U+1F1EC U+1F1F9",name:"Guatemala",emoji:"\ud83c\uddec\ud83c\uddf9"},GU:{code:"GU",unicode:"U+1F1EC U+1F1FA",name:"Guam",emoji:"\ud83c\uddec\ud83c\uddfa"},GW:{code:"GW",unicode:"U+1F1EC U+1F1FC",name:"Guinea-Bissau",emoji:"\ud83c\uddec\ud83c\uddfc"},GY:{code:"GY",unicode:"U+1F1EC U+1F1FE",name:"Guyana",emoji:"\ud83c\uddec\ud83c\uddfe"},HK:{code:"HK",unicode:"U+1F1ED U+1F1F0",name:"Hong Kong SAR China",emoji:"\ud83c\udded\ud83c\uddf0"},HM:{code:"HM",unicode:"U+1F1ED U+1F1F2",name:"Heard & McDonald Islands",emoji:"\ud83c\udded\ud83c\uddf2"},HN:{code:"HN",unicode:"U+1F1ED U+1F1F3",name:"Honduras",emoji:"\ud83c\udded\ud83c\uddf3"},HR:{code:"HR",unicode:"U+1F1ED U+1F1F7",name:"Croatia",emoji:"\ud83c\udded\ud83c\uddf7"},HT:{code:"HT",unicode:"U+1F1ED U+1F1F9",name:"Haiti",emoji:"\ud83c\udded\ud83c\uddf9"},HU:{code:"HU",unicode:"U+1F1ED U+1F1FA",name:"Hungary",emoji:"\ud83c\udded\ud83c\uddfa"},IC:{code:"IC",unicode:"U+1F1EE U+1F1E8",name:"Canary Islands",emoji:"\ud83c\uddee\ud83c\udde8"},ID:{code:"ID",unicode:"U+1F1EE U+1F1E9",name:"Indonesia",emoji:"\ud83c\uddee\ud83c\udde9"},IE:{code:"IE",unicode:"U+1F1EE U+1F1EA",name:"Ireland",emoji:"\ud83c\uddee\ud83c\uddea"},IL:{code:"IL",unicode:"U+1F1EE U+1F1F1",name:"Israel",emoji:"\ud83c\uddee\ud83c\uddf1"},IM:{code:"IM",unicode:"U+1F1EE U+1F1F2",name:"Isle of Man",emoji:"\ud83c\uddee\ud83c\uddf2"},IN:{code:"IN",unicode:"U+1F1EE U+1F1F3",name:"India",emoji:"\ud83c\uddee\ud83c\uddf3"},IO:{code:"IO",unicode:"U+1F1EE U+1F1F4",name:"British Indian Ocean Territory",emoji:"\ud83c\uddee\ud83c\uddf4"},IQ:{code:"IQ",unicode:"U+1F1EE U+1F1F6",name:"Iraq",emoji:"\ud83c\uddee\ud83c\uddf6"},IR:{code:"IR",unicode:"U+1F1EE U+1F1F7",name:"Iran",emoji:"\ud83c\uddee\ud83c\uddf7"},IS:{code:"IS",unicode:"U+1F1EE U+1F1F8",name:"Iceland",emoji:"\ud83c\uddee\ud83c\uddf8"},IT:{code:"IT",unicode:"U+1F1EE U+1F1F9",name:"Italy",emoji:"\ud83c\uddee\ud83c\uddf9"},JE:{code:"JE",unicode:"U+1F1EF U+1F1EA",name:"Jersey",emoji:"\ud83c\uddef\ud83c\uddea"},JM:{code:"JM",unicode:"U+1F1EF U+1F1F2",name:"Jamaica",emoji:"\ud83c\uddef\ud83c\uddf2"},JO:{code:"JO",unicode:"U+1F1EF U+1F1F4",name:"Jordan",emoji:"\ud83c\uddef\ud83c\uddf4"},JP:{code:"JP",unicode:"U+1F1EF U+1F1F5",name:"Japan",emoji:"\ud83c\uddef\ud83c\uddf5"},KE:{code:"KE",unicode:"U+1F1F0 U+1F1EA",name:"Kenya",emoji:"\ud83c\uddf0\ud83c\uddea"},KG:{code:"KG",unicode:"U+1F1F0 U+1F1EC",name:"Kyrgyzstan",emoji:"\ud83c\uddf0\ud83c\uddec"},KH:{code:"KH",unicode:"U+1F1F0 U+1F1ED",name:"Cambodia",emoji:"\ud83c\uddf0\ud83c\udded"},KI:{code:"KI",unicode:"U+1F1F0 U+1F1EE",name:"Kiribati",emoji:"\ud83c\uddf0\ud83c\uddee"},KM:{code:"KM",unicode:"U+1F1F0 U+1F1F2",name:"Comoros",emoji:"\ud83c\uddf0\ud83c\uddf2"},KN:{code:"KN",unicode:"U+1F1F0 U+1F1F3",name:"St. Kitts & Nevis",emoji:"\ud83c\uddf0\ud83c\uddf3"},KP:{code:"KP",unicode:"U+1F1F0 U+1F1F5",name:"North Korea",emoji:"\ud83c\uddf0\ud83c\uddf5"},KR:{code:"KR",unicode:"U+1F1F0 U+1F1F7",name:"South Korea",emoji:"\ud83c\uddf0\ud83c\uddf7"},KW:{code:"KW",unicode:"U+1F1F0 U+1F1FC",name:"Kuwait",emoji:"\ud83c\uddf0\ud83c\uddfc"},KY:{code:"KY",unicode:"U+1F1F0 U+1F1FE",name:"Cayman Islands",emoji:"\ud83c\uddf0\ud83c\uddfe"},KZ:{code:"KZ",unicode:"U+1F1F0 U+1F1FF",name:"Kazakhstan",emoji:"\ud83c\uddf0\ud83c\uddff"},LA:{code:"LA",unicode:"U+1F1F1 U+1F1E6",name:"Laos",emoji:"\ud83c\uddf1\ud83c\udde6"},LB:{code:"LB",unicode:"U+1F1F1 U+1F1E7",name:"Lebanon",emoji:"\ud83c\uddf1\ud83c\udde7"},LC:{code:"LC",unicode:"U+1F1F1 U+1F1E8",name:"St. Lucia",emoji:"\ud83c\uddf1\ud83c\udde8"},LI:{code:"LI",unicode:"U+1F1F1 U+1F1EE",name:"Liechtenstein",emoji:"\ud83c\uddf1\ud83c\uddee"},LK:{code:"LK",unicode:"U+1F1F1 U+1F1F0",name:"Sri Lanka",emoji:"\ud83c\uddf1\ud83c\uddf0"},LR:{code:"LR",unicode:"U+1F1F1 U+1F1F7",name:"Liberia",emoji:"\ud83c\uddf1\ud83c\uddf7"},LS:{code:"LS",unicode:"U+1F1F1 U+1F1F8",name:"Lesotho",emoji:"\ud83c\uddf1\ud83c\uddf8"},LT:{code:"LT",unicode:"U+1F1F1 U+1F1F9",name:"Lithuania",emoji:"\ud83c\uddf1\ud83c\uddf9"},LU:{code:"LU",unicode:"U+1F1F1 U+1F1FA",name:"Luxembourg",emoji:"\ud83c\uddf1\ud83c\uddfa"},LV:{code:"LV",unicode:"U+1F1F1 U+1F1FB",name:"Latvia",emoji:"\ud83c\uddf1\ud83c\uddfb"},LY:{code:"LY",unicode:"U+1F1F1 U+1F1FE",name:"Libya",emoji:"\ud83c\uddf1\ud83c\uddfe"},MA:{code:"MA",unicode:"U+1F1F2 U+1F1E6",name:"Morocco",emoji:"\ud83c\uddf2\ud83c\udde6"},MC:{code:"MC",unicode:"U+1F1F2 U+1F1E8",name:"Monaco",emoji:"\ud83c\uddf2\ud83c\udde8"},MD:{code:"MD",unicode:"U+1F1F2 U+1F1E9",name:"Moldova",emoji:"\ud83c\uddf2\ud83c\udde9"},ME:{code:"ME",unicode:"U+1F1F2 U+1F1EA",name:"Montenegro",emoji:"\ud83c\uddf2\ud83c\uddea"},MF:{code:"MF",unicode:"U+1F1F2 U+1F1EB",name:"St. Martin",emoji:"\ud83c\uddf2\ud83c\uddeb"},MG:{code:"MG",unicode:"U+1F1F2 U+1F1EC",name:"Madagascar",emoji:"\ud83c\uddf2\ud83c\uddec"},MH:{code:"MH",unicode:"U+1F1F2 U+1F1ED",name:"Marshall Islands",emoji:"\ud83c\uddf2\ud83c\udded"},MK:{code:"MK",unicode:"U+1F1F2 U+1F1F0",name:"Macedonia",emoji:"\ud83c\uddf2\ud83c\uddf0"},ML:{code:"ML",unicode:"U+1F1F2 U+1F1F1",name:"Mali",emoji:"\ud83c\uddf2\ud83c\uddf1"},MM:{code:"MM",unicode:"U+1F1F2 U+1F1F2",name:"Myanmar (Burma)",emoji:"\ud83c\uddf2\ud83c\uddf2"},MN:{code:"MN",unicode:"U+1F1F2 U+1F1F3",name:"Mongolia",emoji:"\ud83c\uddf2\ud83c\uddf3"},MO:{code:"MO",unicode:"U+1F1F2 U+1F1F4",name:"Macau SAR China",emoji:"\ud83c\uddf2\ud83c\uddf4"},MP:{code:"MP",unicode:"U+1F1F2 U+1F1F5",name:"Northern Mariana Islands",emoji:"\ud83c\uddf2\ud83c\uddf5"},MQ:{code:"MQ",unicode:"U+1F1F2 U+1F1F6",name:"Martinique",emoji:"\ud83c\uddf2\ud83c\uddf6"},MR:{code:"MR",unicode:"U+1F1F2 U+1F1F7",name:"Mauritania",emoji:"\ud83c\uddf2\ud83c\uddf7"},MS:{code:"MS",unicode:"U+1F1F2 U+1F1F8",name:"Montserrat",emoji:"\ud83c\uddf2\ud83c\uddf8"},MT:{code:"MT",unicode:"U+1F1F2 U+1F1F9",name:"Malta",emoji:"\ud83c\uddf2\ud83c\uddf9"},MU:{code:"MU",unicode:"U+1F1F2 U+1F1FA",name:"Mauritius",emoji:"\ud83c\uddf2\ud83c\uddfa"},MV:{code:"MV",unicode:"U+1F1F2 U+1F1FB",name:"Maldives",emoji:"\ud83c\uddf2\ud83c\uddfb"},MW:{code:"MW",unicode:"U+1F1F2 U+1F1FC",name:"Malawi",emoji:"\ud83c\uddf2\ud83c\uddfc"},MX:{code:"MX",unicode:"U+1F1F2 U+1F1FD",name:"Mexico",emoji:"\ud83c\uddf2\ud83c\uddfd"},MY:{code:"MY",unicode:"U+1F1F2 U+1F1FE",name:"Malaysia",emoji:"\ud83c\uddf2\ud83c\uddfe"},MZ:{code:"MZ",unicode:"U+1F1F2 U+1F1FF",name:"Mozambique",emoji:"\ud83c\uddf2\ud83c\uddff"},NA:{code:"NA",unicode:"U+1F1F3 U+1F1E6",name:"Namibia",emoji:"\ud83c\uddf3\ud83c\udde6"},NC:{code:"NC",unicode:"U+1F1F3 U+1F1E8",name:"New Caledonia",emoji:"\ud83c\uddf3\ud83c\udde8"},NE:{code:"NE",unicode:"U+1F1F3 U+1F1EA",name:"Niger",emoji:"\ud83c\uddf3\ud83c\uddea"},NF:{code:"NF",unicode:"U+1F1F3 U+1F1EB",name:"Norfolk Island",emoji:"\ud83c\uddf3\ud83c\uddeb"},NG:{code:"NG",unicode:"U+1F1F3 U+1F1EC",name:"Nigeria",emoji:"\ud83c\uddf3\ud83c\uddec"},NI:{code:"NI",unicode:"U+1F1F3 U+1F1EE",name:"Nicaragua",emoji:"\ud83c\uddf3\ud83c\uddee"},NL:{code:"NL",unicode:"U+1F1F3 U+1F1F1",name:"Netherlands",emoji:"\ud83c\uddf3\ud83c\uddf1"},NO:{code:"NO",unicode:"U+1F1F3 U+1F1F4",name:"Norway",emoji:"\ud83c\uddf3\ud83c\uddf4"},NP:{code:"NP",unicode:"U+1F1F3 U+1F1F5",name:"Nepal",emoji:"\ud83c\uddf3\ud83c\uddf5"},NR:{code:"NR",unicode:"U+1F1F3 U+1F1F7",name:"Nauru",emoji:"\ud83c\uddf3\ud83c\uddf7"},NU:{code:"NU",unicode:"U+1F1F3 U+1F1FA",name:"Niue",emoji:"\ud83c\uddf3\ud83c\uddfa"},NZ:{code:"NZ",unicode:"U+1F1F3 U+1F1FF",name:"New Zealand",emoji:"\ud83c\uddf3\ud83c\uddff"},OM:{code:"OM",unicode:"U+1F1F4 U+1F1F2",name:"Oman",emoji:"\ud83c\uddf4\ud83c\uddf2"},PA:{code:"PA",unicode:"U+1F1F5 U+1F1E6",name:"Panama",emoji:"\ud83c\uddf5\ud83c\udde6"},PE:{code:"PE",unicode:"U+1F1F5 U+1F1EA",name:"Peru",emoji:"\ud83c\uddf5\ud83c\uddea"},PF:{code:"PF",unicode:"U+1F1F5 U+1F1EB",name:"French Polynesia",emoji:"\ud83c\uddf5\ud83c\uddeb"},PG:{code:"PG",unicode:"U+1F1F5 U+1F1EC",name:"Papua New Guinea",emoji:"\ud83c\uddf5\ud83c\uddec"},PH:{code:"PH",unicode:"U+1F1F5 U+1F1ED",name:"Philippines",emoji:"\ud83c\uddf5\ud83c\udded"},PK:{code:"PK",unicode:"U+1F1F5 U+1F1F0",name:"Pakistan",emoji:"\ud83c\uddf5\ud83c\uddf0"},PL:{code:"PL",unicode:"U+1F1F5 U+1F1F1",name:"Poland",emoji:"\ud83c\uddf5\ud83c\uddf1"},PM:{code:"PM",unicode:"U+1F1F5 U+1F1F2",name:"St. Pierre & Miquelon",emoji:"\ud83c\uddf5\ud83c\uddf2"},PN:{code:"PN",unicode:"U+1F1F5 U+1F1F3",name:"Pitcairn Islands",emoji:"\ud83c\uddf5\ud83c\uddf3"},PR:{code:"PR",unicode:"U+1F1F5 U+1F1F7",name:"Puerto Rico",emoji:"\ud83c\uddf5\ud83c\uddf7"},PS:{code:"PS",unicode:"U+1F1F5 U+1F1F8",name:"Palestinian Territories",emoji:"\ud83c\uddf5\ud83c\uddf8"},PT:{code:"PT",unicode:"U+1F1F5 U+1F1F9",name:"Portugal",emoji:"\ud83c\uddf5\ud83c\uddf9"},PW:{code:"PW",unicode:"U+1F1F5 U+1F1FC",name:"Palau",emoji:"\ud83c\uddf5\ud83c\uddfc"},PY:{code:"PY",unicode:"U+1F1F5 U+1F1FE",name:"Paraguay",emoji:"\ud83c\uddf5\ud83c\uddfe"},QA:{code:"QA",unicode:"U+1F1F6 U+1F1E6",name:"Qatar",emoji:"\ud83c\uddf6\ud83c\udde6"},RE:{code:"RE",unicode:"U+1F1F7 U+1F1EA",name:"R\xe9union",emoji:"\ud83c\uddf7\ud83c\uddea"},RO:{code:"RO",unicode:"U+1F1F7 U+1F1F4",name:"Romania",emoji:"\ud83c\uddf7\ud83c\uddf4"},RS:{code:"RS",unicode:"U+1F1F7 U+1F1F8",name:"Serbia",emoji:"\ud83c\uddf7\ud83c\uddf8"},RU:{code:"RU",unicode:"U+1F1F7 U+1F1FA",name:"Russia",emoji:"\ud83c\uddf7\ud83c\uddfa"},RW:{code:"RW",unicode:"U+1F1F7 U+1F1FC",name:"Rwanda",emoji:"\ud83c\uddf7\ud83c\uddfc"},SA:{code:"SA",unicode:"U+1F1F8 U+1F1E6",name:"Saudi Arabia",emoji:"\ud83c\uddf8\ud83c\udde6"},SB:{code:"SB",unicode:"U+1F1F8 U+1F1E7",name:"Solomon Islands",emoji:"\ud83c\uddf8\ud83c\udde7"},SC:{code:"SC",unicode:"U+1F1F8 U+1F1E8",name:"Seychelles",emoji:"\ud83c\uddf8\ud83c\udde8"},SD:{code:"SD",unicode:"U+1F1F8 U+1F1E9",name:"Sudan",emoji:"\ud83c\uddf8\ud83c\udde9"},SE:{code:"SE",unicode:"U+1F1F8 U+1F1EA",name:"Sweden",emoji:"\ud83c\uddf8\ud83c\uddea"},SG:{code:"SG",unicode:"U+1F1F8 U+1F1EC",name:"Singapore",emoji:"\ud83c\uddf8\ud83c\uddec"},SH:{code:"SH",unicode:"U+1F1F8 U+1F1ED",name:"St. Helena",emoji:"\ud83c\uddf8\ud83c\udded"},SI:{code:"SI",unicode:"U+1F1F8 U+1F1EE",name:"Slovenia",emoji:"\ud83c\uddf8\ud83c\uddee"},SJ:{code:"SJ",unicode:"U+1F1F8 U+1F1EF",name:"Svalbard & Jan Mayen",emoji:"\ud83c\uddf8\ud83c\uddef"},SK:{code:"SK",unicode:"U+1F1F8 U+1F1F0",name:"Slovakia",emoji:"\ud83c\uddf8\ud83c\uddf0"},SL:{code:"SL",unicode:"U+1F1F8 U+1F1F1",name:"Sierra Leone",emoji:"\ud83c\uddf8\ud83c\uddf1"},SM:{code:"SM",unicode:"U+1F1F8 U+1F1F2",name:"San Marino",emoji:"\ud83c\uddf8\ud83c\uddf2"},SN:{code:"SN",unicode:"U+1F1F8 U+1F1F3",name:"Senegal",emoji:"\ud83c\uddf8\ud83c\uddf3"},SO:{code:"SO",unicode:"U+1F1F8 U+1F1F4",name:"Somalia",emoji:"\ud83c\uddf8\ud83c\uddf4"},SR:{code:"SR",unicode:"U+1F1F8 U+1F1F7",name:"Suriname",emoji:"\ud83c\uddf8\ud83c\uddf7"},SS:{code:"SS",unicode:"U+1F1F8 U+1F1F8",name:"South Sudan",emoji:"\ud83c\uddf8\ud83c\uddf8"},ST:{code:"ST",unicode:"U+1F1F8 U+1F1F9",name:"S\xe3o Tom\xe9 & Pr\xedncipe",emoji:"\ud83c\uddf8\ud83c\uddf9"},SV:{code:"SV",unicode:"U+1F1F8 U+1F1FB",name:"El Salvador",emoji:"\ud83c\uddf8\ud83c\uddfb"},SX:{code:"SX",unicode:"U+1F1F8 U+1F1FD",name:"Sint Maarten",emoji:"\ud83c\uddf8\ud83c\uddfd"},SY:{code:"SY",unicode:"U+1F1F8 U+1F1FE",name:"Syria",emoji:"\ud83c\uddf8\ud83c\uddfe"},SZ:{code:"SZ",unicode:"U+1F1F8 U+1F1FF",name:"Swaziland",emoji:"\ud83c\uddf8\ud83c\uddff"},TA:{code:"TA",unicode:"U+1F1F9 U+1F1E6",name:"Tristan da Cunha",emoji:"\ud83c\uddf9\ud83c\udde6"},TC:{code:"TC",unicode:"U+1F1F9 U+1F1E8",name:"Turks & Caicos Islands",emoji:"\ud83c\uddf9\ud83c\udde8"},TD:{code:"TD",unicode:"U+1F1F9 U+1F1E9",name:"Chad",emoji:"\ud83c\uddf9\ud83c\udde9"},TF:{code:"TF",unicode:"U+1F1F9 U+1F1EB",name:"French Southern Territories",emoji:"\ud83c\uddf9\ud83c\uddeb"},TG:{code:"TG",unicode:"U+1F1F9 U+1F1EC",name:"Togo",emoji:"\ud83c\uddf9\ud83c\uddec"},TH:{code:"TH",unicode:"U+1F1F9 U+1F1ED",name:"Thailand",emoji:"\ud83c\uddf9\ud83c\udded"},TJ:{code:"TJ",unicode:"U+1F1F9 U+1F1EF",name:"Tajikistan",emoji:"\ud83c\uddf9\ud83c\uddef"},TK:{code:"TK",unicode:"U+1F1F9 U+1F1F0",name:"Tokelau",emoji:"\ud83c\uddf9\ud83c\uddf0"},TL:{code:"TL",unicode:"U+1F1F9 U+1F1F1",name:"Timor-Leste",emoji:"\ud83c\uddf9\ud83c\uddf1"},TM:{code:"TM",unicode:"U+1F1F9 U+1F1F2",name:"Turkmenistan",emoji:"\ud83c\uddf9\ud83c\uddf2"},TN:{code:"TN",unicode:"U+1F1F9 U+1F1F3",name:"Tunisia",emoji:"\ud83c\uddf9\ud83c\uddf3"},TO:{code:"TO",unicode:"U+1F1F9 U+1F1F4",name:"Tonga",emoji:"\ud83c\uddf9\ud83c\uddf4"},TR:{code:"TR",unicode:"U+1F1F9 U+1F1F7",name:"Turkey",emoji:"\ud83c\uddf9\ud83c\uddf7"},TT:{code:"TT",unicode:"U+1F1F9 U+1F1F9",name:"Trinidad & Tobago",emoji:"\ud83c\uddf9\ud83c\uddf9"},TV:{code:"TV",unicode:"U+1F1F9 U+1F1FB",name:"Tuvalu",emoji:"\ud83c\uddf9\ud83c\uddfb"},TW:{code:"TW",unicode:"U+1F1F9 U+1F1FC",name:"Taiwan",emoji:"\ud83c\uddf9\ud83c\uddfc"},TZ:{code:"TZ",unicode:"U+1F1F9 U+1F1FF",name:"Tanzania",emoji:"\ud83c\uddf9\ud83c\uddff"},UA:{code:"UA",unicode:"U+1F1FA U+1F1E6",name:"Ukraine",emoji:"\ud83c\uddfa\ud83c\udde6"},UG:{code:"UG",unicode:"U+1F1FA U+1F1EC",name:"Uganda",emoji:"\ud83c\uddfa\ud83c\uddec"},UM:{code:"UM",unicode:"U+1F1FA U+1F1F2",name:"U.S. Outlying Islands",emoji:"\ud83c\uddfa\ud83c\uddf2"},UN:{code:"UN",unicode:"U+1F1FA U+1F1F3",name:"United Nations",emoji:"\ud83c\uddfa\ud83c\uddf3"},US:{code:"US",unicode:"U+1F1FA U+1F1F8",name:"United States",emoji:"\ud83c\uddfa\ud83c\uddf8"},UY:{code:"UY",unicode:"U+1F1FA U+1F1FE",name:"Uruguay",emoji:"\ud83c\uddfa\ud83c\uddfe"},UZ:{code:"UZ",unicode:"U+1F1FA U+1F1FF",name:"Uzbekistan",emoji:"\ud83c\uddfa\ud83c\uddff"},VA:{code:"VA",unicode:"U+1F1FB U+1F1E6",name:"Vatican City",emoji:"\ud83c\uddfb\ud83c\udde6"},VC:{code:"VC",unicode:"U+1F1FB U+1F1E8",name:"St. Vincent & Grenadines",emoji:"\ud83c\uddfb\ud83c\udde8"},VE:{code:"VE",unicode:"U+1F1FB U+1F1EA",name:"Venezuela",emoji:"\ud83c\uddfb\ud83c\uddea"},VG:{code:"VG",unicode:"U+1F1FB U+1F1EC",name:"British Virgin Islands",emoji:"\ud83c\uddfb\ud83c\uddec"},VI:{code:"VI",unicode:"U+1F1FB U+1F1EE",name:"U.S. Virgin Islands",emoji:"\ud83c\uddfb\ud83c\uddee"},VN:{code:"VN",unicode:"U+1F1FB U+1F1F3",name:"Vietnam",emoji:"\ud83c\uddfb\ud83c\uddf3"},VU:{code:"VU",unicode:"U+1F1FB U+1F1FA",name:"Vanuatu",emoji:"\ud83c\uddfb\ud83c\uddfa"},WF:{code:"WF",unicode:"U+1F1FC U+1F1EB",name:"Wallis & Futuna",emoji:"\ud83c\uddfc\ud83c\uddeb"},WS:{code:"WS",unicode:"U+1F1FC U+1F1F8",name:"Samoa",emoji:"\ud83c\uddfc\ud83c\uddf8"},XK:{code:"XK",unicode:"U+1F1FD U+1F1F0",name:"Kosovo",emoji:"\ud83c\uddfd\ud83c\uddf0"},YE:{code:"YE",unicode:"U+1F1FE U+1F1EA",name:"Yemen",emoji:"\ud83c\uddfe\ud83c\uddea"},YT:{code:"YT",unicode:"U+1F1FE U+1F1F9",name:"Mayotte",emoji:"\ud83c\uddfe\ud83c\uddf9"},ZA:{code:"ZA",unicode:"U+1F1FF U+1F1E6",name:"South Africa",emoji:"\ud83c\uddff\ud83c\udde6"},ZM:{code:"ZM",unicode:"U+1F1FF U+1F1F2",name:"Zambia",emoji:"\ud83c\uddff\ud83c\uddf2"},ZW:{code:"ZW",unicode:"U+1F1FF U+1F1FC",name:"Zimbabwe",emoji:"\ud83c\uddff\ud83c\uddfc"}};function xt(e){var t,n=e.minerId,a=e.deadlineId,i=e.sectorId,o=e.type,c=e.miner,s=e.sector;return r.a.createElement("div",{className:"section minerbar"},r.a.createElement("div",{className:"minerId"},!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/address/".concat(n)},n),r.a.createElement("span",{className:"tinyarrow"},r.a.createElement("a",{href:"https://filfox.info/en/address/".concat(n)},"\u2197")),r.a.createElement("span",{className:"rekt rekt-miner"},"MINER"),c&&c.deposits&&0!==+c.deposits.feeDebt&&r.a.createElement("span",{className:"rekt"},"DEBT")),"sector"===o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/miners/".concat(n,"/sectors/").concat(i)},"Sector ",i),"faulty"===s&&r.a.createElement("span",{className:"rekt"},"FAULTY"),"recovering"===s&&r.a.createElement("span",{className:"rekt rekt-green"},"RECOVERING"),"terminated"===s&&r.a.createElement("span",{className:"rekt rekt-black"},"TERMINATED")),"deadline"===o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/miners/".concat(n,"/deadlines/").concat(a)},"Deadline ",a))),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backto"},r.a.createElement(l.b,{to:"/miners/".concat(n)},"See address",r.a.createElement("span",{className:"bolder"}," ",n)),"sector"===o&&void 0!==a&&r.a.createElement(l.b,{to:"/miners/".concat(n,"/deadlines/").concat(a)},"See deadline",r.a.createElement("span",{className:"bolder"}," ",a)))),!o&&r.a.createElement("div",null,c&&((null===(t=c.tag)||void 0===t?void 0:t.name)||c.country)&&r.a.createElement("span",{className:"miner-name"},c.tag.name,c&&c.country&&"  ".concat(Ut[c.country].emoji))))}var St=n(25),Ot=St.format(","),kt=St.format(",.1f");var Mt=Object(d.h)((function(e){var t,n=e.client,i=Object(d.g)(),o=i.minerId,m=i.deadlineId,f=Object(a.useState)(),p=Object(u.a)(f,2),h=p[0],F=p[1],E=Object(a.useState)({}),w=Object(u.a)(E,2),y=w[0],j=w[1],U=Object(a.useState)(),x=Object(u.a)(U,2),S=x[0],O=x[1],k=Object(a.useContext)(b).data;return Object(a.useEffect)((function(){S&&(console.log(">> today is set",S),n.fetchPartitionsSectors(S.deadlines[m].Partitions).then((function(e){F(e)})).catch((function(e){console.error("failed to load sectors")})))}),[S]),Object(a.useEffect)((function(){if(o&&k.head&&m){var e=Math.ceil(k.head.Height/2880),t=Object(X.a)(Array(e)).map((function(t,n){return{height:2880*n<=k.head.Height?2880*n:k.head.Height,day:e-n-1}})).reverse();if(console.log(">>> epochs",t),!S){try{Et()(40,t,function(){var e=Object(s.a)(c.a.mark((function e(t){var a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.day,r=t.height,e.prev=1,e.next=4,n.fetchTipsetHead(r);case 4:i=e.sent,e.next=7;break;case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),console.log("could not fetch head",o,a,r,e.t0),e.abrupt("return");case 13:return e.prev=13,e.next=16,n.fetchDeadlines(o,i);case 16:s=e.sent,e.next=19;break;case 19:y[a]=s,j(Object(g.a)({},y)),0===a&&O(s),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(13),console.log("could not find",o,a,r,e.t1);case 27:case"end":return e.stop()}}),e,null,[[1,9],[13,24]])})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log("trouble with ",a)}return function(){!1}}}}),[n,k.head,o,m,S]),r.a.createElement("section",{className:"container"},r.a.createElement(xt,{minerId:o,deadlineId:m,type:"deadline"}),r.a.createElement("div",{className:"section wpost"},r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:y&&y[0]&&"".concat(kt(32*+y[0].deadlines[m].LiveSectors/1024)," TiB"),desc:"".concat(y&&y[0]?Ot(y[0].deadlines[m].LiveSectors):""," Live Sectors")}),r.a.createElement(v,{title:y&&y[0]&&"".concat(kt(+y[0].deadlines[m].FaultyPower.Raw/1099511627776)," TiB"),desc:"".concat(y&&y[0]?Ot(+y[0].deadlines[m].FaultyPower.Raw/34359738368):""," Faulty Sectors")}))),r.a.createElement("div",{className:"section wpost"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col section-title"},r.a.createElement("h3",null,"History"),r.a.createElement("a",{"data-tip":!0,"data-for":"wpost-desc"},"(what is this?)"),r.a.createElement(jt.a,{id:"wpost-desc",effect:"solid",place:"top"},r.a.createElement("span",null,"List of 48 WindowPoSt submission deadlines ordered by due time (in epochs).",r.a.createElement("br",null),"Bars represent ~8TB disks to be proven, white are healthy disks, red are faulty.")))),r.a.createElement(wt,{link:function(e){return"/miners/".concat(o,"/deadlines/").concat(m)},deadlines:(t=m,Object.keys(y).sort((function(e,t){return+e-+t})).map((function(e){return[e,y[e]]})).map((function(e){var n=Object(u.a)(e,2);return n[0],n[1].deadlines[t]})).flat()),head:k.head,out:function(e){e.d,e.head;var t=e.i;return 0===t?"Today":"".concat(t,"d ago")}})),r.a.createElement("div",{className:"section sectors"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col section-title"},r.a.createElement("h3",null,"Sectors"),r.a.createElement("a",{"data-tip":!0,"data-for":"sectors-desc"},"(what is this?)"),r.a.createElement(jt.a,{id:"sectors-desc",effect:"solid",place:"top"},r.a.createElement("span",null,"Each square is a 32GiB sector.")))),h&&r.a.createElement("div",null,h.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h4",null,"Partition ",t," ",Object.keys(e[0].Faults).length===e[0].Sectors.length&&r.a.createElement("span",{className:"rekt"},"REKT")),r.a.createElement("div",{className:"s-partition"},e[0].Sectors.map((function(t){return r.a.createElement(l.b,{to:"/miners/".concat(o,"/sectors/").concat(t)},r.a.createElement("div",{key:t,className:"s-sector ".concat(e[0].Faults[t]&&"faulty"," ").concat(e[0].Terminated[t]&&"terminated"," ").concat(e[0].Recoveries[t]&&"recovering")},r.a.createElement("span",null,t)))}))))})))))})),Nt=n(25),Ct=Nt.format(","),Tt=Nt.format(",.2f");var At=Object(d.h)((function(){var e,t,n=Object(a.useContext)(b).data,i=Object(d.g)().minerId,o=n.economics,c=n.miners,s=n.actors,u=n.head,l=Object(a.useMemo)((function(){return o?+o.sectorFaultFee:0}),[o]),m=Object(a.useMemo)((function(){return o?+o.sectorProjectedReward:0}),[o]),f=Object(a.useMemo)((function(){return o?+o.sectorProjectedReward1:0}),[o]),p=Object(a.useMemo)((function(){return c&&c[i]?c[i]:void 0}),[c]);return p?r.a.createElement("section",{className:"container"},r.a.createElement(xt,{minerId:i,miner:p}),r.a.createElement("div",{id:"deposits",className:"section"},r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.balance||0),r.a.createElement(h,null)),desc:"Balance"}),r.a.createElement(v,{title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.available||0),r.a.createElement(h,null)),desc:"Available"}),r.a.createElement(v,{desc:"Vesting",title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.lockedFunds||0),r.a.createElement(h,null))})),r.a.createElement("div",{className:"grid grid-4"},r.a.createElement(v,{title:p.deadlines&&"".concat(Tt(32*p.deadlines.sectorsCount/1024)," TiB"),desc:"".concat(p.deadlines&&Ct(p.deadlines.sectorsCount)||""," Total Sectors")}),r.a.createElement(v,{title:p.deadlines&&"".concat(Tt(32*p.deadlines.activeCount/1024)," TiB"),desc:"".concat(p.deadlines&&Ct(p.deadlines.activeCount)||""," Active Sectors")}),r.a.createElement(v,{title:p.deadlines&&"".concat(Tt(32*p.deadlines.faultsCount/1024)," TiB"),desc:"".concat(p.deadlines&&Ct(p.deadlines.faultsCount)||""," Faulty Sectors")}),r.a.createElement(v,{title:Ct(p.preCommitsCount||0),desc:"PreCommits"}))),r.a.createElement("div",{id:"sectors"},r.a.createElement("h3",null,"Economics"),r.a.createElement("div",{className:"grid grid-4"},r.a.createElement(v,{title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.initialPledge),r.a.createElement(h,null)),desc:"Initial Pledge"}),r.a.createElement(v,{desc:"PreCommit Deposit",title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.preCommitDeposits||0),r.a.createElement(h,null))}),r.a.createElement(v,{title:p.deposits&&r.a.createElement(r.a.Fragment,null,Ct(p.deposits.feeDebt||0),r.a.createElement(h,null)),desc:"Fee Debt"}),r.a.createElement(v,{title:p.deposits&&"".concat(Tt((+p.deposits.available+ +p.deposits.lockedFunds)/+l||0)),desc:"Faults to Debt"})),r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:p.deadlines&&f&&r.a.createElement(r.a.Fragment,null,Tt(f*p.deadlines.activeCount),r.a.createElement(h,null)),desc:"Daily reward*"}),r.a.createElement(v,{title:p.deadlines&&m&&r.a.createElement(r.a.Fragment,null,Tt(m*p.deadlines.activeCount),r.a.createElement(h,null)),desc:"360-Day reward*"}),r.a.createElement(v,{title:p.deadlines&&m&&r.a.createElement(r.a.Fragment,null,Tt(32*p.deadlines.activeCount/(+s.totalBytesCommitted/Math.pow(2,30))*14400)),desc:"Daily Blocks*"})),"(*) These numbers are projections and do not take into account several factors like network growth. Do your own research."),p.deadlines&&r.a.createElement("div",{className:"section wpost"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col section-title"},r.a.createElement("h3",null,"Deadlines"),r.a.createElement("a",{"data-tip":!0,"data-for":"wpost-desc"},"(what is this?)"),r.a.createElement(jt.a,{id:"wpost-desc",effect:"solid",place:"top"},r.a.createElement("span",null,"List of 48 WindowPoSt submission deadlines ordered by due time (in epochs).",r.a.createElement("br",null),"Bars represent ~8TB disks to be proven, white are healthy disks, red are faulty.")))),r.a.createElement(wt,{minerId:i,deadlines:p.deadlines.nextDeadlines,head:u,link:function(){return"/miners/".concat(i)}})),p.deadlines&&r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col section-title"},r.a.createElement("h3",null,"Upcoming Deadline"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"timeline"}),r.a.createElement("ul",null,r.a.createElement("li",null,"PoStSubmissions:",p.deadlines.nextDeadlines[0].PostSubmissions),r.a.createElement("li",null,"Sectors to Prove:"," ",p.deadlines.nextDeadlines[0].LiveSectors),r.a.createElement("li",null,"Current Deadline: ",p.deadlines.deadline.Index),r.a.createElement("li",null,"FaultCutoff:"," ",p.deadlines.deadline.FaultCutoff-u.Height),r.a.createElement("li",null,"Challenge: ",p.deadlines.deadline.Challenge-u.Height),r.a.createElement("li",null,p.deadlines.deadline.Open-u.Height>0?"Open":"Opened",": ",p.deadlines.deadline.Open-u.Height),r.a.createElement("li",null,"Close: ",p.deadlines.deadline.Close-u.Height))),r.a.createElement("div",{className:"col"},r.a.createElement(wt,{minerId:i,deadlines:[p.deadlines.nextDeadlines[0]],head:u})))),p.preCommits&&r.a.createElement("div",{id:"provecommit",className:"section"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col section-title"},r.a.createElement("h3",null,"New sectors"),r.a.createElement("a",{"data-tip":!0,"data-for":"provecommit-desc"},"(what is this?)"),r.a.createElement(jt.a,{id:"provecommit-desc",effect:"solid",place:"top"},r.a.createElement("span",null,"List of ProveCommits ordered by due time (in epochs).",r.a.createElement("br",null),"Circles represent sectors to be proven.")))),0===(null===(e=p.preCommits.preCommitDeadlines)||void 0===e?void 0:e.length)&&r.a.createElement("div",null,"No new sectors"),r.a.createElement("div",{className:"deadlines provecommit"},null===(t=p.preCommits.preCommitDeadlines)||void 0===t?void 0:t.map((function(e,t){return r.a.createElement("div",{key:t,className:"deadline"},r.a.createElement("div",{className:"out"},"In ",e.Expiry-u.Height),r.a.createElement("div",{className:"hddWrapper"},r.a.createElement("div",{className:"in"},Math.round(e.Sectors.length)," sectors"),r.a.createElement("div",{className:"hdds"},e.Sectors.map((function(e){return r.a.createElement("div",{key:e,className:"hdd"},"")})))))}))))):r.a.createElement(r.a.Fragment,null)})),Rt=n(25).format(",");var Pt=Object(d.h)((function(){var e=Object(d.g)().minerId,t=Object(a.useContext)(b).data.miners,n=Object(a.useMemo)((function(){return t&&t[e]?t[e]:void 0}),[t]);return n?r.a.createElement("section",{className:"container"},r.a.createElement(xt,{minerId:e,miner:n}),r.a.createElement("div",{id:"deposits",className:"section"},r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:n.deposits&&r.a.createElement(r.a.Fragment,null,Rt(n.deposits.balance||0),r.a.createElement(h,null)),desc:"Balance"})))):r.a.createElement(r.a.Fragment,null)}));var It=Object(d.h)((function(e){var t=e.client,n=Object(d.g)().minerId,i=Object(a.useState)(),o=Object(u.a)(i,2),c=o[0],s=o[1],l=Object(a.useContext)(b).data.head;return Object(a.useEffect)((function(){t&&l&&t.fetchActor(n,l.Cids).then((function(e){console.log(e),s(e.type)})).catch((function(e){console.error("actor type not supported"),s("NotSupported")}))}),[t,l]),r.a.createElement(r.a.Fragment,null,(null===c||void 0===c?void 0:c.includes("storageMinerActor"))&&r.a.createElement(d.a,{to:"/miners/".concat(n)}),"NotSupported"===c&&r.a.createElement(r.a.Fragment,null,"Actor type not supported"))})),Lt=function(){return Dt.apply(this,arguments)};function Dt(){return(Dt=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api3.drand.sh/health");case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t=n(25).format(",");function Bt(){var e=new Date("2020-08-24 22:00:00Z").getTime();return Math.floor((Date.now()-e)/1e3/30)}function Gt(){var e=Object(a.useState)(Bt()),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(),l=Object(u.a)(o,2),d=l[0],m=l[1],f=Object(a.useContext)(b).data.head;return Object(a.useEffect)((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lt().then((function(e){d&&e.current===d.current||m(e)})),Bt()!==n&&i(Bt());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),5e3);return function(){clearInterval(t)}}),[]),r.a.createElement("div",{className:"d-none d-md-block"},r.a.createElement("div",{className:"tiny-grid"},r.a.createElement("div",null,"Filecoin Status"," ",r.a.createElement("span",null,f&&f.Height<n?n-f.Height===1?"behind":"receiving":"ok")),r.a.createElement("div",{className:"tiny"},"Current Tipset"," ",f?r.a.createElement("a",{href:"https://filfox.info/en/tipset/".concat(f.Height)},_t(f.Height)):r.a.createElement("p",null,"loading")),r.a.createElement("div",{className:"tiny"},"Expected Tipset"," ",r.a.createElement("a",{href:"https://filfox.info/en/tipset/".concat(n)},_t(n))),r.a.createElement("div",{className:"tiny"},"Drand Status"," ",r.a.createElement("span",null,d&&d.current<d.expected?"catching up":"ok")),r.a.createElement("div",{className:"tiny"},"Current Drand"," ",r.a.createElement("a",{href:"https://api.drand.sh/public/".concat(d&&d.current)},_t(d&&d.current))),r.a.createElement("div",{className:"tiny"},"Expected Drand"," ",r.a.createElement("a",{href:"https://api.drand.sh/public/".concat(d&&d.expected)},_t(d&&d.expected)))))}var zt=n(77),Vt=n.n(zt),qt=n(74);function Wt(){var e=Object(a.useState)(void 0),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useRef)(null),l=Object(a.useRef)(null),d=Object(a.useContext)(b).data,m=function(e){l.current.addEventListener("show.bs.collapse",(function(){e.update()})),l.current.addEventListener("hide.bs.collapse",(function(){e.update()}))},f=d.gas.growth,p=f.dataCommits,v=f.dataWposts,h=f.rounds,g={title:{display:!0,text:"Growth rate and proven sectors"},scales:{yAxes:[{id:"commits",type:"linear",position:"left",scaleLabel:{labelString:"Estimated Growth Rate (PB/day) ",display:!0}},{id:"wposts",type:"linear",position:"right",scaleLabel:{labelString:"Estimated Sectors Proven per height",display:!0}}]}},F=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,r,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0==(t=n)?(a=[{data:p,borderColor:Xt.blue,fill:!1,label:"Estimated growth rate in PB per day",yAxisID:"commits"},{data:v,borderColor:Xt.red,fill:!1,label:"Estimated number of proven sectors per height",yAxisID:"wposts"}],r={datasets:a,labels:h},s=o.current.getContext("2d"),u=new Vt.a(s,{type:"line",data:r,options:g}),m(t=u)):(t.data.datasets[0].data=p,t.data.datasets[1].data=v,t.data.labels=h,t.update()),i(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){F()}),[d]),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"growth"},r.a.createElement("h2",null,r.a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseGrowth","aria-expanded":"true","aria-controls":"collapseBiggest"},"Growth evolution"))),r.a.createElement("div",{id:"collapseGrowth",ref:l,className:"collapse","aria-labelledby":"growth","data-parent":"#accordionExample"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-12"},void 0==n&&r.a.createElement("p",null," Loading.... "),r.a.createElement("canvas",{ref:o},"Loading...")))))}function Ht(){var e=Object(a.useState)(void 0),t=Object(u.a)(e,2),n=t[0],i=t[1],o=Object(a.useRef)(null),l=Object(a.useRef)(null),d=Object(a.useContext)(b).data.gas.biggestUsers,m=d.height,f=d.data,p=function(e){l.current.addEventListener("show.bs.collapse",(function(){e.update()})),l.current.addEventListener("hide.bs.collapse",(function(){e.update()}))},v=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,r,s,u,l,d,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(f),a=Object.values(f),r=[{data:a,backgroundColor:Object(qt.a)(Xt,(function(e,t){return e})).slice(0,a.length),label:"transaction gas"}],s={title:{display:!0,text:"Gas usage at height ".concat(m)}},u={datasets:r,labels:t},void 0==(l=n)?(d=o.current.getContext("2d"),v=new Vt.a(d,{type:"doughnut",data:u,options:s}),p(l=v)):(n.data.datasets[0].data=a,n.options=s,n.update()),i(l);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[d]),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"biggestGas"},r.a.createElement("h2",null,r.a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseBiggest","aria-expanded":"true","aria-controls":"collapseBiggest"},"Biggest gas users"))),r.a.createElement("div",{id:"collapseBiggest",ref:l,className:"collapse","aria-labelledby":"biggestGas","data-parent":"#accordionExample"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-12"},void 0==n&&r.a.createElement("p",null," Loading.... "),r.a.createElement("canvas",{ref:o},"Loading...")))))}function Yt(){var e=Object(a.useContext)(b).data.gas.usage,t=e.pre,n=e.total,i=e.prove,o=e.wpost,c=["","Average Count","Average GasUsed ","Ratio over total GasUsed","Average GasLimit","Ratio avg over total GasLimit","Ratio GasUsed over GasLimit","Ratio GasUsed over BlockLimit","Ratio GasLimit over BlockLimit"],s=Array(c.length-1).fill(0);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",id:"headingOne"},r.a.createElement("h2",null,r.a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},"Gas usage table"))),r.a.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("p",null," ","This table shows different statistics about the gas usage per epoch. All results are averaged accross the last",3," epochs. You can find a complete description of each column below the table."," "),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,c.map((function(e){return r.a.createElement("th",{key:e}," ",e," ")})))),r.a.createElement("tbody",null,r.a.createElement(Kt,{name:"All transactions:",values:n.length>0?n:s}),r.a.createElement(Kt,{name:"WindowPoSt:",values:o.length>0?o:s}),r.a.createElement(Kt,{name:"PreCommit:",values:t.length>0?t:s}),r.a.createElement(Kt,{name:"ProveCommit:",values:i.length>0?i:s}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-0"}," "),r.a.createElement("div",{className:"col-11"},r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Average Count:")," number of transaction per epoch in average of the method"," "),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Average GasUsed:")," gas used per transaction of the method"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Ratio over total GasUsed:")," Precedent number divided by the total gas used in avg per epoch"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Average GasLimit:")," gas limit set per transaction of the method"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Ratio over total GasLimit:")," Precedent number divided by the total gas limit in avg per epoch"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Ratio GasUsed over GasLimit:")," Total gas used for the method over total gas limit in avg per epoch"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Total GasUsed over BlockLimit:")," Total gas used divided by total gas limit set per epoch computed with number of blocks"),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Total GasLimit over BlockLimit:")," Total gas limit divided by total gas limit set per epoch computed with number of blocks per epoch"))))))))}function Kt(e){return r.a.createElement("tr",null,r.a.createElement("td",null," ",e.name," "),e.values.map((function(e,t){return r.a.createElement("td",{key:t.toString()},isNaN(e)||Math.ceil(e)===e?e:e.toFixed(2))})))}var Zt=Object(d.h)((function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"accordion col-12",id:"accordionExample"},r.a.createElement(Wt,null),r.a.createElement(Ht,null),r.a.createElement(Yt,null)))})),Xt={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"},Jt=n(25),Qt=Jt.format(","),$t=(Jt.format(",.1f"),Jt.format(",.4f"));Object(d.h)((function(e){e.miners;var t=e.client,n=e.head,i=Object(d.g)(),o=i.minerId,l=i.sectorId,m=Object(a.useState)(),f=Object(u.a)(m,2),p=(f[0],f[1],Object(a.useState)({})),g=Object(u.a)(p,2),b=(g[0],g[1],Object(a.useState)()),F=Object(u.a)(b,2),E=(F[0],F[1],Object(a.useState)()),w=Object(u.a)(E,2),y=w[0],j=w[1],U=Object(a.useState)(),x=Object(u.a)(U,2),S=x[0],O=x[1],k=Object(a.useState)(),M=Object(u.a)(k,2),N=M[0],C=M[1];return Object(a.useEffect)((function(){if(console.log("loading sector",l,o),n&&t){var e=function(){var e=Object(s.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.StateSectorGetInfo(o,+l,n.Cids);case 2:a=e.sent,j(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(s.a)(c.a.mark((function e(){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.client.StateSectorPartition(o,+l,n.Cids);case 2:return a=e.sent,O(a),e.next=6,t.fetchPartitionsSectorsState(n,o,a.Deadline);case 6:r=e.sent,console.log(r[a.Partition]),r[a.Partition]&&((i=r[a.Partition]).Recoveries[l]?C("recovering"):i.Faults[l]?C("faulty"):i.Live[l]||C("terminated"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a()}}),[t,n]),r.a.createElement("section",{className:"container"},r.a.createElement(xt,{type:"sector",minerId:o,sectorId:l,deadlineId:S&&S.Partition,sector:N}),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"grid"},r.a.createElement(v,{title:y&&"".concat(Qt(+y.Activation)),desc:"Activation Epoch"}),r.a.createElement(v,{title:y&&"".concat(Qt(+y.Expiration)),desc:"Expiration Epoch"}),r.a.createElement(v,{title:y&&"".concat(Qt(+y.Expiration-n.Height)),desc:"Expiration from now"}),r.a.createElement(v,{title:y&&r.a.createElement(r.a.Fragment,null,$t(+y.InitialPledge/1e18),r.a.createElement(h,null)),desc:"Initial Pledge"}),r.a.createElement(v,{title:y&&r.a.createElement(r.a.Fragment,null,$t(+y.ExpectedDayReward/1e18),r.a.createElement(h,null)),desc:"Projected Daily Reward"}),r.a.createElement(v,{title:y&&"".concat(Qt(y.DealIDs?y.DealIDs.length:"0")),desc:"Deals"}))),r.a.createElement("div",{class:"section"},y&&y.DealIDs&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Deals"),r.a.createElement("ul",null,y.DealIDs.map((function(e){return r.a.createElement("li",{key:e},e)}))))))})),n(179),n(180),n(182);var en=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(new m.a("wss://node.glif.io/space07/lotus/rpc/v0"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(F,null,r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(Gt,{client:n})),r.a.createElement("header",{className:"container-fluid"},r.a.createElement(l.b,{to:"/"},r.a.createElement("h1",{id:"logo",className:"logo"},r.a.createElement("span",null,"spacegap")))),r.a.createElement("div",{className:"container"},r.a.createElement(mt,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/miners/:minerId/deadlines/:deadlineId"},r.a.createElement(Mt,{client:n})),r.a.createElement(d.b,{path:"/miners/:minerId"},r.a.createElement(At,null)),r.a.createElement(d.b,{path:"/address/:minerId"},r.a.createElement(It,{client:n})),r.a.createElement(d.b,{path:"/accounts/:minerId"},r.a.createElement(Pt,null)),r.a.createElement(d.b,{path:"/full"},r.a.createElement(yt,null)),r.a.createElement(d.b,{path:"/status"},r.a.createElement(bt,null)),r.a.createElement(d.b,{path:"/gas"},r.a.createElement(Zt,null)),r.a.createElement(d.b,{path:"/market"},r.a.createElement(ht,null)),r.a.createElement(d.b,{path:"/"},r.a.createElement(U,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.render(a.createElement(a.StrictMode,null,a.createElement(en,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(1),n(3),n(9),n(10);var a=n(4);Math.pow(10,9);function r(e,t){return Object.entries(e).map((function(e,n){var r=Object(a.a)(e,2),i=r[0],o=r[1];return t(o,i,n)}))}}},[[112,1,2]]]);
//# sourceMappingURL=main.b708caaa.chunk.js.map